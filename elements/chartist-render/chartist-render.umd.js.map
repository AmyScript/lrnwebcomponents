{"version":3,"file":"chartist-render.umd.js","sources":["chartist-render.umd.js"],"sourcesContent":["import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"./lib/chartist-lib.js\";\n/**\n`chartist-render`\nA LRN element\n\n@demo demo/index.html\n\n@microcopy - the mental model for this element\n -\n -\n -\n\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n    </style>\n    <div id=\"chart\" chart\\$=\"[[__chartId]]\" class\\$=\"ct-chart [[scale]]\"></div>\n`,\n\n  is: \"chartist-render\",\n\n  listeners: {\n    \"chart.tap\": \"makeChart\",\n    created: \"_onCreated\"\n  },\n\n  properties: {\n    /**\n     * The unique identifier of the chart.\n     */\n    id: {\n      type: String,\n      value: \"chart\"\n    },\n    /**\n     * The type of chart:bar, line, or pie\n     */\n    type: {\n      type: String,\n      value: \"bar\"\n    },\n    /**\n     * The scale of the chart. (See https://gionkunz.github.io/chartist-js/api-documentation.html)\n     */\n    scale: {\n      type: String,\n      observer: \"makeChart\"\n    },\n    /**\n     * The chart title used for accessibility.\n     */\n    chartTitle: {\n      type: String,\n      value: null,\n      observer: \"makeChart\"\n    },\n    /**\n     * The chart description used for accessibility.\n     */\n    chartDesc: {\n      type: String,\n      value: \"\",\n      observer: \"makeChart\"\n    },\n    /**\n     * The chart data.\n     */\n    data: {\n      type: Object,\n      value: null,\n      observer: \"makeChart\"\n    },\n    /**\n     * The options available at  https://gionkunz.github.io/chartist-js/api-documentation.html.\n     */\n    options: {\n      type: Object,\n      value: null,\n      observer: \"makeChart\"\n    },\n    /**\n     * The responsive options. (See https://gionkunz.github.io/chartist-js/api-documentation.html.)\n     */\n    responsiveOptions: {\n      type: Array,\n      value: [],\n      observer: \"makeChart\"\n    },\n    /**\n     * The show data in table form as well? Default is false.\n     */\n    showTable: {\n      type: Boolean,\n      value: false,\n      observer: \"makeChart\"\n    }\n  },\n\n  attached: function() {\n    let root = this;\n    root.__chartId = root._getUniqueId(\"chartist-render-\");\n    root._chartReady();\n  },\n\n  /**\n   * Makes chart and returns the chart object.\n   */\n  _checkReady: function() {\n    let root = this;\n    setInterval(root._chartReady, 500);\n  },\n\n  /**\n   * Makes chart and returns the chart object.\n   */\n  _chartReady: function() {\n    let root = this,\n      query = '[chart=\"' + root.__chartId + '\"]',\n      container = document.querySelector(query);\n    if (container !== null) {\n      root.fire(\"chartist-render-ready\", this);\n      if (root.data !== null) root.makeChart();\n      clearInterval(root._checkReady);\n    }\n  },\n\n  /**\n   * Makes chart and returns the chart object.\n   */\n  makeChart: function() {\n    let root = this,\n      chart;\n\n    if (\n      root.data !== null &&\n      root.querySelector('[chart=\"' + root.__chartId + '\"]') !== null\n    ) {\n      if (root.type == \"bar\") {\n        chart = Chartist.Bar(\n          '[chart=\"' + root.__chartId + '\"]',\n          root.data,\n          root.options,\n          root.responsiveOptions\n        );\n      } else if (root.type == \"line\") {\n        chart = Chartist.Line(\n          '[chart=\"' + root.__chartId + '\"]',\n          root.data,\n          root.options,\n          root.responsiveOptions\n        );\n      } else if (root.type == \"pie\") {\n        chart = Chartist.Pie(\n          '[chart=\"' + root.__chartId + '\"]',\n          root.data,\n          root.options,\n          root.responsiveOptions\n        );\n      }\n      root.fire(\"chartist-render-draw\", chart);\n      chart.on(\"created\", function() {\n        root.addA11yFeatures(chart.container.childNodes[0]);\n      });\n      return chart;\n    } else {\n      return null;\n    }\n  },\n\n  /**\n   * Add accessibility features.\n   */\n  addA11yFeatures: function(svg) {\n    let desc =\n      this.data.labels !== undefined && this.data.labels !== null\n        ? this.chartDesc + this.makeA11yTable(svg)\n        : this.chartDesc;\n    this._addA11yFeature(svg, \"desc\", desc);\n    this._addA11yFeature(svg, \"title\", this.chartTitle);\n    svg.setAttribute(\n      \"aria-labelledby\",\n      this.__chartId + \"-chart-title \" + this.__chartId + \"-chart-desc\"\n    );\n  },\n\n  /**\n   * Add accessibility features.\n   */\n  makeA11yTable: function(svg) {\n    let title =\n      this.chartTitle !== null ? this.chartTitle : \"A \" + this.type + \" chart.\";\n    let table = [\n      '<table summary=\"Each column is a series of data, and the first column is the data label.\">',\n      \"<caption>\" + title + \"</caption>\",\n      \"<tbody>\"\n    ];\n    for (var i = 0; i < this.data.labels.length; i++) {\n      table.push('<tr><th scope=\"row\">' + this.data.labels[i] + \"</th>\");\n      if (this.type == \"pie\") {\n        table.push(\"<td>\" + this.data.series[i] + \"</td>\");\n      } else {\n        for (var j = 0; j < this.data.series.length; j++) {\n          table.push(\"<td>\" + this.data.series[j][i] + \"</td>\");\n        }\n      }\n      table.push(\"</tr>\");\n    }\n    table.push(\"</tbody></table>\");\n    return table.join(\"\");\n  },\n\n  /**\n   * For inserting chart title and description.\n   */\n  _addA11yFeature: function(svg, tag, html) {\n    let el = document.createElement(tag);\n    let first = svg.childNodes[0];\n    el.innerHTML = html;\n    el.setAttribute(\"id\", this.__chartId + \"-chart-\" + tag);\n    svg.insertBefore(el, first);\n  },\n\n  /*\n   *\n   */\n  _getUniqueId(prefix) {\n    let id = prefix + Date.now();\n    while (document.querySelector('[chart=\"' + id + '\"]') !== null) {\n      id = prefix + Date.now();\n    }\n    return id;\n  }\n});\n"],"names":["_template","html","is","listeners","created","properties","id","type","String","value","scale","observer","chartTitle","chartDesc","data","Object","options","responsiveOptions","Array","showTable","Boolean","attached","this","__chartId","_getUniqueId","_chartReady","_checkReady","setInterval","query","document","querySelector","fire","makeChart","clearInterval","chart","root","Chartist","Bar","Line","Pie","on","addA11yFeatures","container","childNodes","svg","desc","undefined","labels","makeA11yTable","_addA11yFeature","setAttribute","table","i","length","push","series","j","join","tag","el","createElement","first","innerHTML","insertBefore","prefix","Date","now"],"mappings":"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"}