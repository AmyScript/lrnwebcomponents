{"version":3,"file":"lrndesign-contentsequencer.umd.js","sources":["lib/layout-style.js","lib/contentsequencer-style.js","lrndesign-contentsequencer.umd.js"],"sourcesContent":["import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout.js\";\nvar $_documentContainer = document.createElement(\"div\");\n$_documentContainer.setAttribute(\"style\", \"display: none;\");\n\n$_documentContainer.innerHTML = `<dom-module id=\"layout-style\">\n  <template>\n    <style>\n      .layout {\n        @apply(--layout);\n      }\n      .layout.horizontal {\n        @apply(--layout-horizontal);\n      }\n      .layout.vertical {\n        @apply(--layout-vertical);\n      }\n      .layout.center {\n        @apply(--layout-center);\n      }\n      .layout.center-center {\n        @apply(--layout-center-center);\n      }\n      .flex {\n        @apply(--layout-flex);\n      }\n      .two {\n        @apply(--layout-flex-2);\n      }\n      .end-justified {\n        @apply(--layout-end-justified);\n      }\n      .end {\n        @apply(--layout-end);\n      }\n      .justified {\n        @apply(--layout-justified);\n      }\n      .self-center {\n        @apply(--layout-self-center);\n      }\n      .wrap {\n         @apply(--layout-wrap);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer);\n\n/*\nCopyright (c) 2016 Google Inc.\n\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not\nuse this file except in compliance with the License. You may obtain a copy of\nthe License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\nWARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\nLicense for the specific language governing permissions and limitations under\nthe License.\n*/\n","import \"@polymer/paper-styles/color.js\";\nvar $_documentContainer = document.createElement(\"div\");\n$_documentContainer.setAttribute(\"style\", \"display: none;\");\n\n$_documentContainer.innerHTML = `<dom-module id=\"contentsequencer-style\">\n  <template strip-whitespace=\"\">\n    <style>\n\n:host {\n  display: block;\n  line-height: 24px;\n\n  --paper-menu: {\n    cursor: pointer;\n    background: inherit;\n    padding: 0;\n  };\n\n  --app-drawer-content-container: {\n    background: var(--lrndesign-contentsequencer-background, --paper-grey-100);\n  };\n\n  --nav-height: 64px;\n}\n\n\n:host([theme=\"minimal\"]) {\n  position: relative;\n}\n\n#headerpanel {\n  position: fixed;\n  left: 0;\n  right: 0;\n  z-index: 1;\n  margin-left: 256px; /* drawer width */\n}\n\n#headerpanel[narrow] {\n  margin-left: 0;\n}\n\napp-drawer-layout {\n  overflow-x: hidden;\n}\n\n.drawer-content-wrapper {\n  padding: 16px;\n}\n\n#main-content {\n  background: var(--lrndesign-contentsequencer-background, --paper-grey-300);\n}\n\n#pages {\n  top: var(--nav-height);\n}\n\n#controls[narrow] {\n  width: 100%;\n}\n\n#main-toolbar {\n  background: var(--lrndesign-contentsequencer-header-background, --paper-blue-600);\n  color: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: var(--nav-height);\n  padding: 0 16px;\n}\n\n#main-toolbar .title {\n  margin: 0 8px;\n  flex: 1;\n  font-weight: 300;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\npaper-icon-button[icon=menu] {\n  margin-right: 0 !important;\n}\n\npaper-fab {\n  --paper-fab-keyboard-focus-background: var(--lrndesign-contentsequencer-fab-background, --paper-blue-700);\n  --paper-fab-background: var(--lrndesign-contentsequencer-fab-background, --paper-blue-700);\n  flex-shrink: 0;\n}\n\n/* override external styles */\n:host([theme=\"minimal\"]) #resumeDialog > * {\n  margin-top: 20px;\n  padding: 0 24px;\n}\n\n:host([theme=\"minimal\"]) #resumeDialog .buttons {\n  padding: 8px 8px 8px 24px;\n  margin: 0;\n}\n\n.countdown iron-icon {\n  margin-right: 3px;\n}\n\n:host(:not([theme=\"minimal\"])) #drawer .countdown {\n  display: none;\n}\n\n:host([theme=\"minimal\"]) #drawer .countdown {\n  padding: 0 16px 16px 16px;\n  font-style: italic;\n  color: var(--paper-blue-500);\n  -webkit-flex-shrink: 0;\n  flex-shrink: 0;\n}\n\n#controls {\n  position: fixed;\n  right: 0;\n  bottom: 16px;\n  padding: 0 16px;\n  width: calc(100% - 256px); /* width of drawer */\n  box-sizing: border-box;\n  pointer-events: none; /* allow users to scroll */\n}\n\n#controls .fabs {\n  /* Note: custom props don't work in calc(). */\n  max-width: calc(800px + 175px);\n  margin: 0 auto;\n}\n\n.navbutton {\n  pointer-events: initial; /* make sure buttons are clickable */\n}\n\n.navbutton.prevbutton {\n  transition: transform 300ms ease-in-out;\n}\n\n.navbutton.prevbutton[disabled] {\n  background: var(--lrndesign-contentsequencer-fab-background);\n  color: white;\n  transform: scale(0);\n}\n\n.navbutton.donebutton {\n  background: var(--google-green-500);\n}\n\n#toc {\n  /* ensures bottom of nav scrolling meny doesn't overlap with file bug link. */\n  margin-bottom: 1.5em;\n}\n\n.toc-item {\n  font-size: 14px;\n  color: var(--paper-grey-500);\n  overflow: hidden;\n  border-radius: 4px;\n  padding: 6px 16px;\n  box-sizing: content-box; /* override users that set * selector box-sizing. */\n}\n\n.toc-item i {\n  display: inline-block;\n  font-style: normal;\n  width: 24px;\n  min-width: 24px;\n  background: #fff;\n  border-radius: 50%;\n  text-align: center;\n  height: 24px;\n  vertical-align: middle;\n  line-height: 24px;\n  border: 2px solid var(--paper-grey-400);\n  margin-right: 8px;\n  font-weight: 400;\n}\n\n.toc-item i:before,\n.toc-item i:after {\n  content: '';\n  display: block;\n  border-left: 1px solid var(--paper-grey-400);\n  width: 0;\n  height: 44px;\n  z-index: 1;\n  margin-top: 1px;\n}\n\n.toc-item i:before {\n  margin-top: -44px;\n  margin-left: 11px;\n}\n\n.toc-item i:after {\n  margin-left: 11px;\n}\n\n.toc-item.completed {\n  color: var(--paper-grey-900);\n}\n\n.toc-item.iron-selected {\n  color: var(--paper-grey-900);\n  background-color: var(--paper-grey-300);\n  font-weight: 600;\n}\n\n.toc-item.completed i,\n.toc-item.completed i:before,\n.toc-item.completed i:after,\n.toc-item.iron-selected i,\n.toc-item.iron-selected i:before {\n  border-color: var(--paper-blue-500);\n}\n\n.toc-item:first-of-type i:before,\n.toc-item:last-of-type i:after {\n  display: none;\n}\n\n#metadata {\n  color: var(--lrndesign-contentsequencer-footer-text-color, #777);\n  font-size: 0.7em;\n  flex: 0 0 80px;\n}\n\n#feedback a {\n  color: currentcolor;\n}\n\n@media (min-width: 641px) {\n  :host(:not([theme=\"minimal\"])) #pages {\n    margin-top: 32px;\n  }\n  #controls {\n    padding: 0 32px;\n    bottom: 32px;\n  }\n}\n\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer);\n\n/*\nCopyright (c) 2015 Google Inc.\n\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not\nuse this file except in compliance with the License. You may obtain a copy of\nthe License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\nWARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\nLicense for the specific language governing permissions and limitations under\nthe License.\n*/\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport * as async from \"@polymer/polymer/lib/utils/async.js\";\nimport { IronA11yKeysBehavior } from \"@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@polymer/iron-localstorage/iron-localstorage.js\";\nimport \"@polymer/neon-animation/neon-animated-pages.js\";\nimport \"@polymer/neon-animation/animations/slide-from-right-animation.js\";\nimport \"@polymer/neon-animation/animations/slide-from-left-animation.js\";\nimport \"@polymer/neon-animation/animations/slide-right-animation.js\";\nimport \"@polymer/neon-animation/animations/slide-left-animation.js\";\nimport \"@polymer/app-layout/app-header-layout/app-header-layout.js\";\nimport \"@polymer/app-layout/app-drawer/app-drawer.js\";\nimport \"@polymer/app-layout/app-drawer-layout/app-drawer-layout.js\";\nimport \"@polymer/paper-button/paper-button.js\";\nimport \"@polymer/paper-dialog/paper-dialog.js\";\nimport \"@polymer/paper-fab/paper-fab.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu.js\";\nimport \"@polymer/paper-listbox/paper-listbox.js\";\nimport \"@polymer/paper-item/paper-item.js\";\nimport \"./lib/layout-style.js\";\nimport \"./lib/contentsequencer-style.js\";\nvar $_documentContainer = document.createElement(\"div\");\n$_documentContainer.setAttribute(\"style\", \"display: none;\");\n\n$_documentContainer.innerHTML = `<dom-module id=\"lrndesign-contentsequencer\">\n  <template strip-whitespace=\"\">\n    <style include=\"layout-style\"></style>\n    <style include=\"contentsequencer-style\"></style>\n\n    <iron-localstorage name=\"{{title}}\" value=\"{{state}}\" hidden=\"\" on-iron-localstorage-load-empty=\"_stateInit\" on-iron-localstorage-load=\"_stateLoaded\">\n    </iron-localstorage>\n\n    <app-drawer-layout fullbleed=\"\" narrow=\"{{_narrow}}\">\n      <app-drawer id=\"drawer\" swipe-open=\"\">\n\n        <div class=\"drawer-content-wrapper layout vertical\" style=\"height:100%\">\n\n          <div class=\"flex\" style=\"overflow: auto;\">\n            <div title=\"Time remaining\" hidden\\$=\"{{!_isPositiveNum(duration)}}\" class=\"countdown layout horizontal\">\n              <iron-icon icon=\"schedule\"></iron-icon> <span>[[remaining]]</span>\n            </div>\n\n            <paper-dropdown-menu id=\"toc\" class=\"flex\" on-iron-select=\"_allowcontentsequencerComplete\">\n              <paper-listbox slot=\"dropdown-content\" selected=\"{{selected}}\">\n              <template is=\"dom-repeat\" items=\"{{steps}}\" strip-whitespace=\"\">\n                <paper-item class\\$=\"{{_tocItemClass(selected, index)}}\">\n                  <i>{{item.step}}</i><span>{{item.label}}</span>\n                </paper-item>\n              </template>\n              </paper-listbox>\n            </paper-dropdown-menu>\n          </div>\n\n        </div>\n\n      </app-drawer>\n\n      <app-header-layout fullbleed=\"\">\n\n        <div id=\"headerpanel\" fixed=\"\" narrow\\$=\"[[_narrow]]\">\n          <div id=\"main-toolbar\" hidden\\$=\"[[noToolbar]]\">\n            <h3 class=\"title\">[[title]]</h3>\n            <div title=\"Time remaining\" hidden\\$=\"{{!_isPositiveNum(duration)}}\" class=\"countdown layout horizontal\">\n              <iron-icon icon=\"schedule\"></iron-icon> <span>{{remaining}}</span>\n            </div>\n          </div>\n        </div>\n\n        <div id=\"main-content\">\n\n          <neon-animated-pages id=\"pages\" selected=\"{{selected}}\" on-iron-deselect=\"_onStepLeave\" on-iron-items-changed=\"_onStepsChanged\">\n            <slot select=\"lrndesign-contentsequencer-step\"></slot>\n          </neon-animated-pages>\n\n          <footer id=\"controls\" hidden\\$=\"[[noArrows]]\" narrow\\$=\"[[_narrow]]\">\n            <div class=\"fabs layout horizontal justified\">\n              <paper-fab raised=\"\" class=\"navbutton prevbutton\" icon=\"chevron-left\" on-tap=\"selectPrevious\" title=\"Previous step\" disabled\\$=\"{{_isFirstStep(selected)}}\">\n              </paper-fab>\n\n              <div>\n                <template is=\"dom-if\" if=\"{{_showNextFab(selected, steps)}}\" strip-whitespace=\"\">\n                  <paper-fab icon=\"chevron-right\" raised=\"\" class=\"navbutton nextbutton\" title=\"{{_nextFabTitle(selected)}}\" on-tap=\"selectNext\">\n                  </paper-fab>\n                </template>\n\n                <template is=\"dom-if\" if=\"{{_showDoneFab(selected, steps)}}\" strip-whitespace=\"\">\n                  <paper-fab icon=\"done\" raised=\"\" class=\"navbutton donebutton\" on-tap=\"_goToDoneLink\" title=\"Complete contentsequencer\">\n                  </paper-fab>\n                </template>\n              </div>\n            </div>\n          </footer>\n        </div>\n\n      </app-header-layout>\n    </app-drawer-layout>\n\n    <paper-dialog id=\"resumeDialog\" modal=\"\">\n      <h2>Would you like to resume where you left off?</h2>\n      <p>Step <span>{{_storedStep.step}}</span>: <span>{{_storedStep.label}}</span></p>\n      <div class=\"buttons\">\n        <paper-button dialog-dismiss=\"\" on-click=\"_stateInit\">Cancel</paper-button>\n        <paper-button dialog-confirm=\"\" on-click=\"_resume\" autofocus=\"\">Resume</paper-button>\n      </div>\n    </paper-dialog>\n\n  </template>\n  \n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer);\n/*\nCopyright (c) 2015 Google Inc.\n\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not\nuse this file except in compliance with the License. You may obtain a copy of\nthe License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\nWARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\nLicense for the specific language governing permissions and limitations under\nthe License.\n*/\n/**\nThis is the top level component of lrndesign-contentsequencer elements.\nIt expects to find one or more `lrndesign-contentsequencer-step` elements in its content.\n\nExample:\n\n    <lrndesign-contentsequencer title=\"Awesome contentsequencer\" feedback-link=\"http://example.org\"\n                    last-updated=\"2015-01-28\">\n      <lrndesign-contentsequencer-step label=\"One\" step=\"1\" duration=\"10\">\n        ...\n      </lrndesign-contentsequencer-step>\n      <lrndesign-contentsequencer-step label=\"Two\" step=\"2\" duration=\"15\">\n        ...\n      </lrndesign-contentsequencer-step>\n    </lrndesign-contentsequencer>\n\nThe element can also be used in a minimalistic mode where less styling is\napplied. Use the `theme=\"minimal\"` attribute and combine with the\n`noToolbar`, `noArrows`, and `noHighlight` properties to turn off the top nav and\nprevent syntax highlighting code blocks, respectively:\n\n    <lrndesign-contentsequencer theme=\"minimal\" no-toolbar no-arrows no-highlight>\n\n@demo demo/contentsequencer.html\n@demo demo/embed.html\n*/\nPolymer({\n  is: \"lrndesign-contentsequencer\",\n\n  /**\n   * Fired when the contentsequencer steps have been fully initialized.\n   * @event lrndesign-contentsequencer-ready\n   */\n\n  /**\n   * Fired when user advances a contentsequencer step or goes backwards.\n   * @event lrndesign-contentsequencer-step\n   * detail {{step: Object, index: Number}}\n   */\n\n  /**\n   * Fired when user reaches the last step of the contentsequencer.\n   * @event lrndesign-contentsequencer-complete\n   */\n\n  behaviors: [IronA11yKeysBehavior],\n\n  properties: {\n    /**\n     * contentsequencer title\n     */\n    title: {\n      type: String,\n      value: \"\"\n    },\n\n    /**\n     * Main category, e.g. 'Android'\n     */\n    category: {\n      type: String,\n      value: null\n    },\n\n    /**\n     * contentsequencer environment, e.g. 'web'\n     */\n    environment: {\n      type: String,\n      value: null\n    },\n\n    /**\n     * Feedback URL for the contentsequencer bug repors.\n     */\n    feedbackLink: {\n      type: String,\n      value: \"\"\n    },\n\n    /**\n     * Current step index, 0-based.\n     * `location.hash` is synced with this number.\n     */\n    selected: {\n      type: Number,\n      value: 0\n    },\n\n    /**\n     * Total duration of the contentsequencer, in minutes.\n     */\n    duration: {\n      type: Number,\n      value: 0,\n      readOnly: true\n    },\n\n    /**\n     * UI string for remaining tie to completion. Example: \"5 min remaining\".\n     */\n    remaining: {\n      type: String,\n      value: \"\",\n      readOnly: true\n    },\n\n    /**\n     * Last date the contentsequencer was updated, in YYYY-MM-DD format.\n     */\n    lastUpdated: {\n      type: String,\n      value: \"\"\n    },\n\n    /**\n     * Link to go to when finished\n     */\n    doneLink: {\n      type: String,\n      value: \"/\"\n    },\n\n    /**\n     * Step elements of the contentsequencer. Currently, only `<lrndesign-contentsequencer-step>`\n     * elements are supported.\n     * The steps are populated on 'attached': callback for distributed children\n     * changes is still being worked on https://github.com/Polymer/polymer/issues/1773\n     */\n    steps: {\n      type: Array,\n      value: function() {\n        return [];\n      },\n      readOnly: true\n    },\n\n    /**\n     * contentsequencer state, synced with `localStorage`.\n     * See `_stateInit` for object properties.\n     */\n    state: {\n      type: Object,\n      value: null\n    },\n\n    /**\n     * Hides the topnav toolbar.\n     */\n    noToolbar: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * Hides the forward/background navigation arrows.\n     */\n    noArrows: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * Property determines whether the toolbar is hidden.\n     */\n    noHighlight: {\n      type: Boolean,\n      value: false,\n      reflectToAttribute: true\n    },\n\n    /**\n     * Last selected step before leaving the contentsequencer.\n     * Used in the $.resumeDialog to prompt a user to resume the contentsequencer\n     * where the left off.\n     *\n     * It is synced with the `state.stepIndex` one time only, when the storage\n     * is loaded.\n     */\n    _storedStep: {\n      type: Object,\n      value: null\n    },\n\n    /**\n     * When true, indicates that the current step change was initiated\n     * from the $.resumeDialog by the user clicking on 'resume' button.\n     * This is mainly to prevent firing 'contentsequencer-complete' event\n     * every time users return to a contentsequencer they've actually already done.\n     */\n    _resumed: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * True once the user has navigated to another page.\n     */\n    _userHasNavigated: {\n      type: Boolean,\n      value: false,\n      readOnly: true\n    }\n  },\n\n  observers: [\"_selectedChanged(steps, selected)\"],\n\n  keyBindings: {\n    left: \"selectPrevious\",\n    right: \"selectNext\"\n  },\n\n  ready: function() {\n    // TODO: cannot be done on prototype.\n    // SEe https://github.com/PolymerElements/iron-a11y-keys-behavior/issues/19\n    this.keyEventTarget = /** @type {!HTMLBodyElement} */ (document.body);\n\n    // select the step early, before localStorage is loaded\n    this._updateStepIndexFromUrl();\n  },\n\n  _onStepsChanged: function() {\n    var duration = 0;\n    var steps = this.$.pages.items.map(\n      function(item, i) {\n        duration += item.duration;\n        item.step = i + 1;\n        return item;\n      }.bind(this)\n    );\n    this._setSteps(steps);\n    this._setDuration(duration);\n    this._updateRemaining();\n    this.fire(\"lrndesign-contentsequencer-ready\", { steps: this.steps });\n  },\n\n  /**\n   * Advance one step of the contentsequencer.\n   */\n  selectNext: function() {\n    this.$.pages.entryAnimation = \"slide-from-right-animation\";\n    this.$.pages.exitAnimation = \"slide-left-animation\";\n    this.select(this.selected + 1);\n  },\n\n  /**\n   * Go one step backwards.\n   */\n  selectPrevious: function() {\n    this.$.pages.entryAnimation = \"slide-from-left-animation\";\n    this.$.pages.exitAnimation = \"slide-right-animation\";\n    this.select(this.selected - 1);\n  },\n\n  /**\n   * Select an arbitrary step of the contentsequencer.\n   */\n  select: function(stepIndex) {\n    if (stepIndex < 0 || stepIndex > this.steps.length - 1) {\n      return;\n    }\n\n    this._allowcontentsequencerComplete();\n    this.selected = stepIndex;\n  },\n\n  _selectedChanged: function(steps, selected) {\n    this.set(\"state.stepIndex\", this.selected);\n    this._updateRemaining();\n\n    if (!this.steps.length) {\n      return;\n    }\n\n    var step = this.steps[this.selected];\n    step.active = true;\n\n    location.hash = this.selected.toString();\n\n    this.fire(\"lrndesign-contentsequencer-step\", {\n      index: this.selected,\n      step: step\n    });\n\n    if (\n      this.selected === this.steps.length - 1 &&\n      !this._resumed &&\n      this._userHasNavigated\n    ) {\n      this.fire(\"lrndesign-contentsequencer-complete\");\n    }\n  },\n\n  _onStepLeave: function(e, detail) {\n    var prev = detail.item;\n    prev.active = false;\n    this._scrollToTopOfStep();\n  },\n\n  _stateInit: function() {\n    this.state = { stepIndex: this.selected };\n  },\n\n  _stateLoaded: function() {\n    // allow everything render and initialize,\n    // especially this.steps which runs at the same init level\n    // as iron-localstorage (on attached).\n    async.microTask.run(() => {\n      this._storedStep = this.steps[this.state.stepIndex];\n      // resume dialog is shown only when all 3 conditions hold:\n      // 1. user has already visited the contentsequencer in the past\n      // 2. has made at least 1 step\n      // 3. user is landed on the first step\n      if (this.selected === 0 && this.state.stepIndex > 0) {\n        this.$.resumeDialog.open();\n      }\n    });\n  },\n\n  _updateStepIndexFromUrl: function() {\n    var step = parseInt(location.hash.slice(1), 10);\n    if (isNaN(step) || step < 0) {\n      step = 0;\n    }\n    if (this.steps && this.steps.length && step > this.steps.length - 1) {\n      step = this.steps.length - 1;\n    }\n    this.selected = step;\n  },\n\n  _allowcontentsequencerComplete: function() {\n    this._set_userHasNavigated(true);\n  },\n\n  _updateRemaining: function() {\n    if (!this.steps) {\n      return;\n    }\n    var remain = 0;\n    this.steps.slice(this.selected).forEach(function(item) {\n      remain += item.duration || 0;\n    });\n    var str = this._narrow ? \"\" : \" remaining\";\n    this._setRemaining(remain + \" min\" + str);\n  },\n\n  _resume: function() {\n    this._resumed = true;\n    this.select(this.state.stepIndex);\n    this._resumed = false;\n  },\n\n  _goToDoneLink: function() {\n    // if there isn't a done link, default to fallback behavior\n    // of finding an index link\n    if (this.doneLink != \"\") {\n      window.location.href = this.doneLink;\n    } else {\n      // extract 'index' search param\n      var index;\n      var parts = location.search.substring(1).split(\"&\");\n      for (var i = 0; i < parts.length; i++) {\n        var param = parts[i].split(\"=\");\n        if (param[0] === \"index\") {\n          index = param[1];\n          break;\n        }\n      }\n      // decode and extract index name from the search param\n      // default index is 'index'\n      index = index ? decodeURIComponent(index) : \"\";\n      index = index.replace(/[^a-z0-9\\-]+/gi, \"\");\n      if (index === \"index\") {\n        index = \"\";\n      }\n      // navigate away to the index page\n      window.location.href = \"/\" + index;\n    }\n  },\n\n  _tocItemClass: function(selected, i) {\n    var cls = [\"toc-item\"];\n    if (i < selected) {\n      cls.push(\"completed\");\n    }\n    return cls.join(\" \");\n  },\n\n  _scrollToTopOfStep: function() {\n    document.body.scrollTop = 0;\n  },\n\n  _isPositiveNum: function(duration) {\n    return duration > 0;\n  },\n\n  _isFirstStep: function(stepIndex) {\n    return isNaN(stepIndex) || stepIndex == 0;\n  },\n\n  _isLastStep: function(stepIndex) {\n    if (!this.steps.length) {\n      return false;\n    }\n    return stepIndex >= this.steps.length - 1;\n  },\n\n  _showDoneFab: function(stepIndex, steps) {\n    return this._isLastStep(stepIndex);\n  },\n\n  _showNextFab: function(stepIndex, steps) {\n    return !this._isLastStep(stepIndex);\n  },\n\n  _nextFabTitle: function(stepIndex) {\n    return stepIndex > 0 ? \"Next step\" : \"Start contentsequencer\";\n  }\n});\n"],"names":["$_documentContainer","document","createElement","setAttribute","innerHTML","head","appendChild","is","behaviors","IronA11yKeysBehavior","properties","title","type","String","value","category","environment","feedbackLink","selected","Number","duration","readOnly","remaining","lastUpdated","doneLink","steps","Array","state","Object","noToolbar","Boolean","noArrows","noHighlight","reflectToAttribute","_storedStep","_resumed","_userHasNavigated","observers","keyBindings","left","right","ready","keyEventTarget","body","_updateStepIndexFromUrl","_onStepsChanged","this","$","pages","items","map","item","i","step","bind","_setSteps","_setDuration","_updateRemaining","fire","selectNext","entryAnimation","exitAnimation","select","selectPrevious","stepIndex","length","_allowcontentsequencerComplete","_selectedChanged","set","active","location","hash","toString","index","_onStepLeave","e","detail","_scrollToTopOfStep","_stateInit","_stateLoaded","async","run","_this","resumeDialog","open","parseInt","slice","isNaN","_set_userHasNavigated","remain","forEach","str","_narrow","_setRemaining","_resume","_goToDoneLink","window","href","parts","search","substring","split","param","decodeURIComponent","replace","_tocItemClass","cls","push","join","scrollTop","_isPositiveNum","_isFirstStep","_isLastStep","_showDoneFab","_showNextFab","_nextFabTitle"],"mappings":"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"}