{"version":3,"file":"lrnsys-outline.umd.js","sources":["lib/lrnsys-outline-item.js","lrnsys-outline.umd.js"],"sourcesContent":["import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/iron-list/iron-list.js\";\nimport \"@polymer/iron-a11y-keys/iron-a11y-keys.js\";\nimport \"@polymer/paper-input/paper-input.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"@lrnwebcomponents/swipe-action/swipe-action.js\";\nimport \"@lrnwebcomponents/drawing-icons/drawing-icons.js\";\n/**\n`lrnsys-outline-item`\nA LRN element\n\n@demo demo/index.html\n\n@microcopy - the mental model for this element\n -\n\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        --indent-multiplier: 20px;\n      }\n      :host [data-indent=\"0\"] #move {\n        margin-right: calc(var(--indent-multiplier) * 0);\n      }\n      :host [data-indent=\"1\"] #move {\n        margin-right: calc(var(--indent-multiplier) * 1);\n      }\n      :host [data-indent=\"2\"] #move {\n        margin-right: calc(var(--indent-multiplier) * 2);\n      }\n      :host [data-indent=\"3\"] #move {\n        margin-right: calc(var(--indent-multiplier) * 3);\n      }\n      :host [data-indent=\"4\"] #move {\n        margin-right: calc(var(--indent-multiplier) * 4);\n      }\n      :host [data-indent=\"5\"] #move {\n        margin-right: calc(var(--indent-multiplier) * 5);\n      }\n      :host [data-indent=\"6\"] #move {\n        margin-right: calc(var(--indent-multiplier) * 6);\n      }\n      :host #swipe {\n        height: 40px;\n      }\n      :host #input {\n        flex-grow: 1;\n        margin-right: 10px;\n      }\n      :host #wrapper {\n        display: flex;\n        height: 40px;\n        border-radius: 0.1em;\n        background-color: white;\n      }\n      :host(:focus) #wrapper,\n      :host(:hover) #wrapper {\n        cursor: pointer;\n      }\n      :host #swipe #move {\n        font-size: 16px;\n        padding: 10px;\n        color: transparent;\n      }\n      :host(:focus) #swipe #move,\n      :host(:hover) #swipe #move {\n        color: var(--lrnsys-outline-move-icon-color, #aaaaaa);\n      }\n      :host #swipe paper-icon-button {\n        position: static;\n        font-size: 16px;\n        height: 36px;\n        padding: 10px;\n        margin: 4px;\n        display: none;\n        border-radius: 0.1em;\n      }\n      :host(:focus) #swipe paper-icon-button,\n      :host(:hover) #swipe paper-icon-button {\n        width: 36px;\n        display: block;\n      }\n      :host [swipe-down-action],\n      :host [swipe-up-action]{\n        display: flex;\n        justify-content: flex-center;\n        color: var(--lrnsys-outline-add-button-color, #222222);\n      }\n      :host [swipe-left-action]{\n        display: flex;\n        justify-content: flex-end;\n      }\n      :host [swipe-right-action] {\n        display: flex;\n        justify-content: flex-start;\n      }\n      :host #swipe paper-icon-button#add {\n        width: 36px;\n        margin-right: 2px;\n        color: white;\n        background-color: var(--lrnsys-outline-add-button-color, #018dff);\n      }\n      :host #swipe paper-icon-button#delete {\n        color: white;\n        background-color: var(--lrnsys-outline-delete-button-color, #cc0000);\n      }\n    </style>\n    <swipe-action id=\"swipe\" on-swiped-away=\"_onSwipedAway\">\n      <div id=\"wrapper\" data-indent\\$=\"[[indentLevel]]\">\n        <iron-icon id=\"move\" title=\"Move\" icon=\"drawing:move\" role=\"presentation\"></iron-icon>\n        <paper-input id=\"input\" label=\"Enter a page title\" value\\$=\"[[title]]\" no-label-float=\"\">\n        </paper-input>\n        <paper-icon-button id=\"add\" title=\"Add Item\" icon=\"icons:add\" on-tap=\"add\"></paper-icon-button>\n        <paper-icon-button id=\"delete\" title=\"Delete\" icon=\"icons:delete\" on-tap=\"delete\"></paper-icon-button>\n      </div>\n      <div id=\"down-action\" swipe-down-action=\"\" swipe-size=\"40\" swipe-rubber-band=\"10\" gesture-disabled\\$=\"[[disableDown]]\">\n        <paper-icon-button id=\"down\" title=\"Move downwards\" icon=\"icons:arrow-downward\" on-tap=\"move(1)\"></paper-icon-button>\n      </div>\n      <div id=\"left-action\" swipe-left-action=\"\" swipe-size=\"40\" swipe-rubber-band=\"10\" gesture-disabled\\$=\"[[disableLeft]]\">\n        <paper-icon-button id=\"left\" title=\"Outdent\" icon=\"icons:arrow-backward\" on-tap=\"setIndent(-1)\"></paper-icon-button>\n      </div>\n      <div id=\"right-action\" swipe-right-action=\"\" swipe-size=\"40\" swipe-rubber-band=\"10\" gesture-disabled\\$=\"[[disableRight]]\">\n        <paper-icon-button id=\"right\" title=\"Indent\" icon=\"icons:arrow-forward\" on-tap=\"setIndent(1)\"></paper-icon-button>\n      </div>\n      <div id=\"up-action\" swipe-up-action=\"\" swipe-size=\"40\" swipe-rubber-band=\"10\" gesture-disabled\\$=\"[[disableUp]]\">\n        <paper-icon-button id=\"up\" title=\"Move upwards\" icon=\"icons:arrow-upward\" on-tap=\"move(-1)\"></paper-icon-button>\n      </div>\n    </swipe-action>\n    <iron-a11y-keys id=\"a11y\" target=\"[[target]]\" keys=\"enter\" on-keys-pressed=\"_onEnter\"></iron-a11y-keys>\n    <iron-a11y-keys id=\"a11y\" target=\"[[target]]\" keys=\"backspace\" on-keys-pressed=\"_onBackspace\"></iron-a11y-keys>\n    <iron-a11y-keys id=\"a11y\" target=\"[[target]]\" keys=\"up\" on-keys-pressed=\"_onArrowUp\"></iron-a11y-keys>\n    <iron-a11y-keys id=\"a11y\" target=\"[[target]]\" keys=\"down\" on-keys-pressed=\"_onArrowDown\"></iron-a11y-keys>\n    <iron-a11y-keys id=\"a11y\" target=\"[[target]]\" keys=\"tab\" on-keys-pressed=\"_onTab\"></iron-a11y-keys>\n    <iron-a11y-keys id=\"a11y\" target=\"[[target]]\" keys=\"shift+tab\" on-keys-pressed=\"_onShiftTab\"></iron-a11y-keys>\n    <iron-a11y-keys id=\"a11y\" target=\"[[target]]\" keys=\"shift+up\" on-keys-pressed=\"_onShiftArrowUp\"></iron-a11y-keys>\n    <iron-a11y-keys id=\"a11y\" target=\"[[target]]\" keys=\"shift+down\" on-keys-pressed=\"_onShiftArrowDown\"></iron-a11y-keys>\n`,\n\n  is: \"lrnsys-outline-item\",\n\n  listeners: {\n    change: \"_onChange\"\n  },\n\n  properties: {\n    disableDown: {\n      type: Boolean,\n      value: false\n    },\n    disableLeft: {\n      type: Boolean,\n      value: false\n    },\n    disableRight: {\n      type: Boolean,\n      value: false\n    },\n    disableUp: {\n      type: Boolean,\n      value: false\n    },\n    id: {\n      type: String,\n      value: null\n    },\n    indentLevel: {\n      type: Number,\n      value: 0\n    },\n    index: {\n      type: Number,\n      value: 0\n    },\n    parent: {\n      type: String,\n      value: null\n    },\n    target: {\n      type: Object,\n      value: null\n    },\n    value: {\n      type: String,\n      value: null,\n      reflectToAttribute: true\n    }\n  },\n\n  attached: function() {\n    this.fire(\"attached-item\", { item: this });\n  },\n\n  ready: function() {\n    let root = this;\n    this.target = this.$.input;\n    root.fire(\"focus-item\", root);\n    root.addEventListener(\"focus\", function(e) {\n      root.fire(\"focus-item\", root);\n    });\n    root.addEventListener(\"mouseover\", function(e) {\n      root.fire(\"focus-item\", root);\n    });\n    root.addEventListener(\"blur\", function(e) {\n      root.fire(\"blur-item\", root);\n    });\n    root.addEventListener(\"mouseout\", function(e) {\n      root.fire(\"blur-item\", root);\n    });\n  },\n\n  focus: function() {\n    this.$.input.focus();\n    return this;\n  },\n\n  value: function() {\n    this.title = this.$.input.value;\n    return this.title;\n  },\n\n  delete: function() {\n    this.fire(\"delete-item\", { item: this });\n  },\n\n  setIndent: function(amount) {\n    this.fire(\"indent-item\", { item: this, increase: amount > 0 });\n  },\n\n  add: function() {\n    let i = this.$.input.querySelector(\"input\").selectionStart,\n      j = this.$.input.value;\n    this.fire(\"add-item\", {\n      item: this,\n      value: j.slice(0, i),\n      new: j.slice(i, j.length)\n    });\n  },\n\n  move: function(amount) {\n    this.fire(\"move-item\", { item: this, moveUp: amount < 0 });\n  },\n\n  setSelection: function(start, end) {\n    let s = start !== undefined ? start : 0,\n      n = end !== undefined ? end : s;\n    try {\n      this.$.input.querySelector(\"input\").setSelectionRange(s, n);\n    } catch (e) {\n      console.log(e);\n    }\n    this.focus();\n  },\n\n  _onChange: function() {\n    this.fire(\"change-item\", { item: this, value: this.$.input.value });\n  },\n\n  _onEnter: function() {\n    let i = this.$.input.querySelector(\"input\").selectionStart,\n      j = this.$.input.value;\n    this.fire(\"add-item\", {\n      item: this,\n      value: j.slice(0, i),\n      new: j.slice(i, j.length)\n    });\n  },\n\n  _onBackspace: function(e) {\n    if (window.getSelection().toString() == this.$.input.value) {\n      event.detail.keyboardEvent.preventDefault();\n      this.fire(\"delete-item\", { item: this });\n    } else if (this.$.input.querySelector(\"input\").selectionStart == 0) {\n      this.fire(\"indent-item\", { item: this, increase: false });\n    }\n  },\n\n  _onArrowUp: function() {\n    if (this.$.input.querySelector(\"input\").selectionStart == 0) {\n      this.fire(\"focus-item\", { item: this, moveUp: true });\n    }\n  },\n\n  _onArrowDown: function() {\n    if (\n      this.$.input.querySelector(\"input\").selectionStart ==\n      this.$.input.value.length\n    ) {\n      this.fire(\"focus-item\", { item: this, moveUp: false });\n    }\n  },\n\n  _onShiftTab: function() {\n    this.setIndent(-1);\n  },\n\n  _onTab: function(e) {\n    if (this.$.input.querySelector(\"input\").selectionStart == 0) {\n      e.preventDefault();\n      this.setIndent(1);\n    }\n  },\n\n  _onShiftArrowUp: function() {\n    this.move(-1);\n  },\n\n  _onShiftArrowDown: function() {\n    this.move(1);\n  },\n\n  _onSwipedAway: function(e) {\n    if (e.detail.action.id === \"right\") {\n      this.setIndent(1);\n    } else if (e.detail.action.id === \"left\") {\n      this.setIndent(-1);\n    } else if (e.detail.action.id === \"up\") {\n      this.move(-1);\n    } else if (e.detail.action.id === \"down\") {\n      this.move(1);\n    }\n    this.$.swipe.reset();\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/paper-input/paper-input.js\";\nimport \"@polymer/paper-dialog/paper-dialog.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"./lib/lrnsys-outline-item.js\";\n/**\n`lrnsys-outline`\nA LRN element\n\n@demo demo/index.html\n\n@microcopy - the mental model for this element\n -\n -\n -\n\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n      :host kbd {\n        display: inline-block;\n        background: #333;\n        color: white;\n        border-radius: 0.25em;\n        margin: 0.25em 0.25em 0.25em 0;\n        padding: 0.5em;\n        font-family: Verdana, Geneva, Tahoma, sans-serif;\n        font-size:85%;\n      }\n    </style>\n    <h1>[[title]]<paper-icon-button title=\"Keyboard directions\" id=\"dialogtrigger\" icon=\"icons:help\" on-tap=\"openDirections\"></paper-icon-button></h1>\n    <paper-dialog id=\"modal\" with-backdrop=\"\">\n      <h2>Keyboard shortcuts</h2>\n      <div>\n        <paper-icon-button title=\"close directions\" style=\"position: absolute;top: 0; right:0;\" icon=\"icons:cancel\" on-tap=\"closeDirections\"></paper-icon-button>\n        <ul>\n          <li><kbd>Enter</kbd> to <strong>add</strong> an item</li>\n          <li><kbd>Backspace</kbd> <em>with entire item selected</em> to <strong>delete</strong> an item.</li>\n          <li><kbd>↑</kbd> / <kbd>↓</kbd> / <kbd>←</kbd> / <kbd>→</kbd> to <strong>navigate</strong> through items</li>\n          <li><kbd>Tab</kbd> / <kbd>Shift+Tab</kbd> <em>at the beginning of a line</em> to <strong>indent/outdent</strong></li>\n          <li><kbd>Shift+↑</kbd> / <kbd>Shift+↓</kbd> to items up/down</li>\n        </ul>\n      </div>\n    </paper-dialog>\n    <div id=\"itemslist\">\n      <template id=\"domRepeat\" is=\"dom-repeat\" items\\$=\"{{items}}\" as=\"item\">\n        <lrnsys-outline-item disable-down\\$=\"{{item.disableDown}}\" disable-left\\$=\"{{item.disableLeft}}\" disable-right\\$=\"{{item.disableRight}}\" disable-up\\$=\"{{item.disableUp}}\" id\\$=\"{{item.id}}\" index\\$=\"{{item.index}}\" indent-level\\$=\"{{item.indent}}\" parent\\$=\"{{item.parent}}\" title\\$=\"{{item.title}}\">\n        </lrnsys-outline-item>\n      </template>\n    </div>\n`,\n\n  is: \"lrnsys-outline\",\n\n  listeners: {\n    \"delete-item\": \"_handleRemoveItem\",\n    \"indent-item\": \"_handleIndentItem\",\n    \"focus-item\": \"_handleFocusItem\",\n    \"add-item\": \"_handleAddItem\",\n    \"move-item\": \"_handleMoveItem\",\n    \"change-item\": \"_handleChangeItem\",\n    \"focus-item\": \"_handleFocusItem\",\n    \"blur-item\": \"_handleBlurItem\"\n  },\n\n  properties: {\n    title: {\n      type: String,\n      value: \"Content Outline\"\n    },\n    data: {\n      type: Array,\n      value: null\n    },\n    items: {\n      type: Array,\n      value: null,\n      notify: true\n    }\n  },\n\n  /**\n   * Display directions for keyboard usage\n   */\n  openDirections: function(e) {\n    this.$.modal.opened = true;\n  },\n\n  /**\n   * Display directions for keyboard usage\n   */\n  closeDirections: function(e) {\n    this.$.modal.opened = false;\n    this.$.dialogtrigger.focus();\n  },\n\n  /**\n   * Attached lifecycle\n   */\n  attached: function() {\n    this.__modal = this.$.modal;\n    document.body.addEventListener(\n      \"iron-overlay-canceled\",\n      this._accessibleFocus.bind(this)\n    );\n    // fix stack order\n    document.body.appendChild(this.$.modal);\n  },\n\n  /**\n   * Set ourselves as having focus after the modal closes.\n   */\n  _accessibleFocus: function(e) {\n    // this is OUR modal, we found her, oh modal, We've missed\n    // you so much. thank you for coming home. We're so, so, so\n    // sorry that we appended you to the body. We'll never do it\n    // again (until the next time you open).\n    if (e.detail === this.__modal) {\n      // focus on our dialog triggering button\n      this.$.dialogtrigger.focus();\n    }\n  },\n\n  ready: function() {\n    if (this.data === null || this.data.length < 1) {\n      this.__tempid = this.__tempid === undefined ? 0 : this.__tempid + 1;\n      this.data = [\n        {\n          id: \"outline-item-\" + this.__tempid,\n          title: \"\",\n          order: 0,\n          parent: null\n        }\n      ];\n    }\n    this.setData(this.data);\n  },\n\n  /**\n   * gets a nested array of items to convert & updates the dom-repeat\n   */\n  setData: function(data) {\n    this.items = [];\n    this.items = data;\n    if (data !== undefined && data.length > 0) {\n      let prevIndent = -1;\n      for (i in data) {\n        let indent = parseInt(this._getIndent(data, i));\n        this.__tempid = this.__tempid === undefined ? 0 : this.__tempid + 1;\n        data[i].index = parseInt(i);\n        data[i].indent = indent;\n        data[i].prevSibling = this._getSibling(parseInt(i), indent, true);\n        data[i].nextSibling = this._getSibling(parseInt(i), indent, false);\n        data[i].disableUp = data[i].prevSibling === null;\n        data[i].disableDown = data[i].nextSibling === null;\n        data[i].disableLeft = indent === 0;\n        data[i].disableRight = indent > prevIndent;\n        data[i].id =\n          data[i].id === undefined\n            ? \"outline-item-\" + this.__tempid\n            : data[i].id;\n        prevIndent = indent;\n      }\n    }\n    this.items = [];\n    this.items = data;\n  },\n\n  /**\n   * gets a flat array of items to convert & updates it to a nested array\n   */\n  getData: function() {\n    for (i in this.items) {\n      this.items[i].order = this._getOrder(this.items[i]);\n    }\n    return this.items;\n  },\n\n  /**\n   * adds a new item\n   */\n  addItem: function(item) {\n    let items = this.items,\n      i = item.index;\n    this.__tempid = this.__tempid + 1;\n    items.splice(i + 1, 0, {\n      id: \"outline-item-\" + this.__tempid,\n      title: \"\",\n      indent: item.indent,\n      parent: item.parent\n    });\n    this._refreshData();\n    this.__focusedItem = item.nextElementSibling;\n    this.__focusedItem.focus();\n  },\n\n  /**\n   * removes an item\n   */\n  removeItem: function(item) {\n    let i = item.index,\n      items;\n    if (confirm(\"Do you really want to delete \" + this.items[i].title + \"?\")) {\n      this.__focusedItem = item.previousElementSibling;\n      for (k in this.items) {\n        if (this.items[k].parent == this.items[i].id) {\n          this.items[k].parent = this.items[i].parent;\n        }\n      }\n      this.items.splice(i, 1);\n      this._refreshData();\n      this.__focusedItem.focus();\n    }\n  },\n\n  /**\n   * moves an grop of items down\n   */\n  moveItem: function(item, moveUp) {\n    let root = this,\n      sourceStart = item.index,\n      sourceEnd = this._getLastChild(item),\n      sourceCount = sourceEnd - sourceStart + 1;\n    let target = moveUp\n      ? this.items[sourceStart].prevSibling\n      : this._getLastChild(this.items[sourceEnd + 1]) - sourceCount + 1;\n    let items = this.items,\n      items2;\n    if (target > -1 && target < this.items.length) {\n      if ((moveUp && !item.disableUp) || (!moveUp && !item.disableDown)) {\n        items2 = items.splice(\n          target,\n          0,\n          ...items.splice(sourceStart, sourceCount)\n        );\n        this.setData(items);\n        this.__focusedItem = this.$.itemslist.querySelectorAll(\n          \"lrnsys-outline-item\"\n        )[target];\n        this.__focusedItem.focus();\n      }\n    }\n  },\n\n  /**\n   * refresh the array\n   */\n  _refreshData: function() {\n    let data = this.items;\n    this.items = [];\n    this.items = data;\n    if (this.__focusedItem !== undefined && this.__focusedItem !== null)\n      this.__focusedItem.focus();\n  },\n\n  /**\n   * adjust indent\n   */\n  _adjustIndent: function(item, amount) {\n    if (\n      (amount > 0 && !item.disableRight) ||\n      (amount < 0 && !item.disableLeft)\n    ) {\n      let i = parseInt(item.index),\n        oldIndent = item.indent,\n        indent = item.indent + amount,\n        n = i + 1;\n      let prevParent = item.prevSibling !== null ? item.prevSibling.id : null;\n      let grandParent =\n        this._getItemById(item.parent) && this._getItemById(item.parent).parent\n          ? this._getItemById(item.parent).parent.id\n          : null;\n      item.indent = indent;\n      item.parent = amount > 0 ? prevParent : grandParent;\n      item.prevSibling = this._getSibling(i, indent, true);\n      item.nextSibling = this._getSibling(i, indent, false);\n      item.disableUp = item.prevSibling === null;\n      item.disableDown = item.nextSibling === null;\n      item.disableLeft = indent === 0;\n      item.disableRight =\n        this.items[i - 1] === null || indent > this.items[i - 1].indent;\n      while (\n        this.items[n] !== null &&\n        this.items[n] !== undefined &&\n        oldIndent < this.items[n].indent\n      ) {\n        this.items[n].indent = this.items[n].indent + amount;\n        n++;\n        next = this.items[n];\n      }\n      this._refreshData();\n    }\n  },\n\n  /**\n   * gets all children of an item\n   */\n  _getLastChild: function(item) {\n    let next =\n      item !== undefined && item !== null\n        ? this._getSibling(item.index, item.indent, false)\n        : null;\n    if (next !== null && next !== undefined) {\n      return next - 1;\n    } else if (\n      item.parent !== null &&\n      item.parent !== null &&\n      this._getItemById(item.parent) !== null\n    ) {\n      return this._getLastChild(this._getItemById(item.parent));\n    } else {\n      return this.items.length - 1;\n    }\n  },\n\n  /**\n   * converts a nested array of items and returns a flat list with indents\n   */\n  _getIndent: function(data, i) {\n    if (data[i].parent !== undefined) {\n      let k = data.findIndex(j => j.id === data[i].parent);\n      if (data[k] !== undefined && data[k].indent !== undefined) {\n        return data[k].indent + 1;\n      }\n    }\n    return 0;\n  },\n\n  /**\n   * returns order relative to siblings\n   */\n  _getOrder: function(item) {\n    let ctr = 0,\n      order = 0;\n    for (i in this.items) {\n      if (this.items[i].parent == item.parent && this.items[i].id == item.id) {\n        order = ctr;\n      } else if (this.items[i].parent == item.parent) {\n        ctr++;\n      }\n    }\n    return order;\n  },\n\n  /**\n   * returns previous or next sibling\n   */\n  _getSibling: function(index, indent, prev) {\n    let inc = prev ? -1 : 1,\n      i = index + inc,\n      sib = null;\n    while (i < this.items.length && i > -1) {\n      if (sib === null && this.items[i].parent === this.items[index].parent) {\n        sib = i;\n      }\n      i += inc;\n    }\n    return sib;\n  },\n\n  /**\n   * get an item by item id\n   */\n  _getItemById: function(id, offset) {\n    let i = this.items.findIndex(j => j.id === id);\n    offset = offset === undefined ? 0 : offset;\n    if (this.items[i + offset] !== undefined) {\n      return this.items[i + offset];\n    } else {\n      return null;\n    }\n  },\n\n  /**\n   * listener to add an item\n   */\n  _handleAddItem: function(e) {\n    this.addItem(e.detail.item);\n  },\n\n  /**\n   * listener to delete an item\n   */\n  _handleRemoveItem: function(e) {\n    this.removeItem(e.detail.item);\n  },\n\n  /**\n   * listener to move an item\n   */\n  _handleMoveItem: function(e) {\n    this.moveItem(e.detail.item, e.detail.moveUp, e.detail.byGroup);\n  },\n\n  /**\n   * listener to move focus up or down\n   */\n  _handleFocusItem: function(e) {\n    let item = e.detail.moveUp\n      ? e.detail.item.previousElementSibling\n      : e.detail.item.nextElementSibling;\n    item.setSelection();\n  },\n\n  /**\n   * listener to increase or decrease indent\n   */\n  _handleIndentItem: function(e) {\n    let amt = e.detail.increase ? 1 : -1;\n    this._adjustIndent(this._getItemById(e.detail.item.id), amt);\n  },\n\n  /**\n   * listener to handle changes to text inputs\n   */\n  _handleChangeItem: function(e) {\n    this._getItemById(e.detail.item.id).title = e.detail.value;\n    this._refreshData();\n  },\n\n  /**\n   * listener for focus or mouseover\n   */\n  _handleFocusItem: function(e) {\n    this.__focusedItem = e.srcElement;\n  },\n\n  /**\n   * listener for blur or mouseout\n   */\n  _handleBlurItem: function(e) {}\n});\n"],"names":["_template","html","is","listeners","change","properties","disableDown","type","Boolean","value","disableLeft","disableRight","disableUp","id","String","indentLevel","Number","index","parent","target","Object","reflectToAttribute","attached","fire","item","this","ready","root","$","input","addEventListener","e","focus","title","delete","setIndent","amount","increase","add","i","querySelector","selectionStart","j","slice","new","length","move","moveUp","setSelection","start","end","s","undefined","n","setSelectionRange","console","log","_onChange","_onEnter","_onBackspace","window","getSelection","toString","event","detail","keyboardEvent","preventDefault","_onArrowUp","_onArrowDown","_onShiftTab","_onTab","_onShiftArrowUp","_onShiftArrowDown","_onSwipedAway","action","swipe","reset","data","Array","items","notify","openDirections","modal","opened","closeDirections","dialogtrigger","__modal","document","body","_accessibleFocus","bind","appendChild","__tempid","order","setData","prevIndent","indent","parseInt","_getIndent","prevSibling","_getSibling","nextSibling","getData","_getOrder","addItem","splice","_refreshData","__focusedItem","nextElementSibling","removeItem","confirm","k","previousElementSibling","moveItem","sourceStart","sourceEnd","_getLastChild","sourceCount","itemslist","querySelectorAll","_adjustIndent","oldIndent","prevParent","grandParent","_getItemById","next","findIndex","ctr","prev","inc","sib","offset","_handleAddItem","_handleRemoveItem","_handleMoveItem","byGroup","_handleFocusItem","_handleIndentItem","amt","_handleChangeItem","srcElement"],"mappings":"23eAiBQ,CACNA,UAAWC,YA2HXC,GAAI,sBAEJC,UAAW,CACTC,OAAQ,aAGVC,WAAY,CACVC,YAAa,CACXC,KAAMC,QACNC,OAAO,GAETC,YAAa,CACXH,KAAMC,QACNC,OAAO,GAETE,aAAc,CACZJ,KAAMC,QACNC,OAAO,GAETG,UAAW,CACTL,KAAMC,QACNC,OAAO,GAETI,GAAI,CACFN,KAAMO,OACNL,MAAO,MAETM,YAAa,CACXR,KAAMS,OACNP,MAAO,GAETQ,MAAO,CACLV,KAAMS,OACNP,MAAO,GAETS,OAAQ,CACNX,KAAMO,OACNL,MAAO,MAETU,OAAQ,CACNZ,KAAMa,OACNX,MAAO,MAETA,MAAO,CACLF,KAAMO,OACNL,MAAO,KACPY,oBAAoB,IAIxBC,SAAU,gBACHC,KAAK,gBAAiB,CAAEC,KAAMC,QAGrCC,MAAO,eACDC,EAAOF,UACNN,OAASM,KAAKG,EAAEC,MACrBF,EAAKJ,KAAK,aAAcI,GACxBA,EAAKG,iBAAiB,QAAS,SAASC,GACtCJ,EAAKJ,KAAK,aAAcI,KAE1BA,EAAKG,iBAAiB,YAAa,SAASC,GAC1CJ,EAAKJ,KAAK,aAAcI,KAE1BA,EAAKG,iBAAiB,OAAQ,SAASC,GACrCJ,EAAKJ,KAAK,YAAaI,KAEzBA,EAAKG,iBAAiB,WAAY,SAASC,GACzCJ,EAAKJ,KAAK,YAAaI,MAI3BK,MAAO,uBACAJ,EAAEC,MAAMG,QACNP,MAGThB,MAAO,uBACAwB,MAAQR,KAAKG,EAAEC,MAAMpB,MACnBgB,KAAKQ,OAGdC,OAAQ,gBACDX,KAAK,cAAe,CAAEC,KAAMC,QAGnCU,UAAW,SAASC,QACbb,KAAK,cAAe,CAAEC,KAAMC,KAAMY,SAAUD,EAAS,KAG5DE,IAAK,eACCC,EAAId,KAAKG,EAAEC,MAAMW,cAAc,SAASC,eAC1CC,EAAIjB,KAAKG,EAAEC,MAAMpB,WACdc,KAAK,WAAY,CACpBC,KAAMC,KACNhB,MAAOiC,EAAEC,MAAM,EAAGJ,GAClBK,IAAKF,EAAEC,MAAMJ,EAAGG,EAAEG,WAItBC,KAAM,SAASV,QACRb,KAAK,YAAa,CAAEC,KAAMC,KAAMsB,OAAQX,EAAS,KAGxDY,aAAc,SAASC,EAAOC,OACxBC,OAAcC,IAAVH,EAAsBA,EAAQ,EACpCI,OAAYD,IAARF,EAAoBA,EAAMC,WAEzBvB,EAAEC,MAAMW,cAAc,SAASc,kBAAkBH,EAAGE,GACzD,MAAOtB,GACPwB,QAAQC,IAAIzB,QAETC,SAGPyB,UAAW,gBACJlC,KAAK,cAAe,CAAEC,KAAMC,KAAMhB,MAAOgB,KAAKG,EAAEC,MAAMpB,SAG7DiD,SAAU,eACJnB,EAAId,KAAKG,EAAEC,MAAMW,cAAc,SAASC,eAC1CC,EAAIjB,KAAKG,EAAEC,MAAMpB,WACdc,KAAK,WAAY,CACpBC,KAAMC,KACNhB,MAAOiC,EAAEC,MAAM,EAAGJ,GAClBK,IAAKF,EAAEC,MAAMJ,EAAGG,EAAEG,WAItBc,aAAc,SAAS5B,GACjB6B,OAAOC,eAAeC,YAAcrC,KAAKG,EAAEC,MAAMpB,OACnDsD,MAAMC,OAAOC,cAAcC,sBACtB3C,KAAK,cAAe,CAAEC,KAAMC,QAC8B,GAAtDA,KAAKG,EAAEC,MAAMW,cAAc,SAASC,qBACxClB,KAAK,cAAe,CAAEC,KAAMC,KAAMY,UAAU,KAIrD8B,WAAY,WACgD,GAAtD1C,KAAKG,EAAEC,MAAMW,cAAc,SAASC,qBACjClB,KAAK,aAAc,CAAEC,KAAMC,KAAMsB,QAAQ,KAIlDqB,aAAc,WAEV3C,KAAKG,EAAEC,MAAMW,cAAc,SAASC,gBACpChB,KAAKG,EAAEC,MAAMpB,MAAMoC,aAEdtB,KAAK,aAAc,CAAEC,KAAMC,KAAMsB,QAAQ,KAIlDsB,YAAa,gBACNlC,WAAW,IAGlBmC,OAAQ,SAASvC,GAC2C,GAAtDN,KAAKG,EAAEC,MAAMW,cAAc,SAASC,iBACtCV,EAAEmC,sBACG/B,UAAU,KAInBoC,gBAAiB,gBACVzB,MAAM,IAGb0B,kBAAmB,gBACZ1B,KAAK,IAGZ2B,cAAe,SAAS1C,GACK,UAAvBA,EAAEiC,OAAOU,OAAO7D,QACbsB,UAAU,GACiB,SAAvBJ,EAAEiC,OAAOU,OAAO7D,QACpBsB,WAAW,GACgB,OAAvBJ,EAAEiC,OAAOU,OAAO7D,QACpBiC,MAAM,GACqB,SAAvBf,EAAEiC,OAAOU,OAAO7D,SACpBiC,KAAK,QAEPlB,EAAE+C,MAAMC,yBCjTf5E,UAAWC,YAsCXC,GAAI,iBAEJC,4BACiB,kCACA,iCACD,8BACF,6BACC,gCACE,sCACD,wBACd,YAAa,sBAGfE,WAAY,CACV4B,MAAO,CACL1B,KAAMO,OACNL,MAAO,mBAEToE,KAAM,CACJtE,KAAMuE,MACNrE,MAAO,MAETsE,MAAO,CACLxE,KAAMuE,MACNrE,MAAO,KACPuE,QAAQ,IAOZC,eAAgB,SAASlD,QAClBH,EAAEsD,MAAMC,QAAS,GAMxBC,gBAAiB,SAASrD,QACnBH,EAAEsD,MAAMC,QAAS,OACjBvD,EAAEyD,cAAcrD,SAMvBV,SAAU,gBACHgE,QAAU7D,KAAKG,EAAEsD,MACtBK,SAASC,KAAK1D,iBACZ,wBACAL,KAAKgE,iBAAiBC,KAAKjE,OAG7B8D,SAASC,KAAKG,YAAYlE,KAAKG,EAAEsD,QAMnCO,iBAAkB,SAAS1D,GAKrBA,EAAEiC,SAAWvC,KAAK6D,cAEf1D,EAAEyD,cAAcrD,SAIzBN,MAAO,YACa,OAAdD,KAAKoD,MAAiBpD,KAAKoD,KAAKhC,OAAS,UACtC+C,cAA6BxC,IAAlB3B,KAAKmE,SAAyB,EAAInE,KAAKmE,SAAW,OAC7Df,KAAO,CACV,CACEhE,GAAI,gBAAkBY,KAAKmE,SAC3B3D,MAAO,GACP4D,MAAO,EACP3E,OAAQ,aAIT4E,QAAQrE,KAAKoD,OAMpBiB,QAAS,SAASjB,WACXE,MAAQ,QACRA,MAAQF,OACAzB,IAATyB,GAAsBA,EAAKhC,OAAS,EAAG,KACrCkD,GAAc,MACbxD,KAAKsC,EAAM,KACVmB,EAASC,SAASxE,KAAKyE,WAAWrB,EAAMtC,SACvCqD,cAA6BxC,IAAlB3B,KAAKmE,SAAyB,EAAInE,KAAKmE,SAAW,EAClEf,EAAKtC,GAAGtB,MAAQgF,SAAS1D,GACzBsC,EAAKtC,GAAGyD,OAASA,EACjBnB,EAAKtC,GAAG4D,YAAc1E,KAAK2E,YAAYH,SAAS1D,GAAIyD,GAAQ,GAC5DnB,EAAKtC,GAAG8D,YAAc5E,KAAK2E,YAAYH,SAAS1D,GAAIyD,GAAQ,GAC5DnB,EAAKtC,GAAG3B,UAAoC,OAAxBiE,EAAKtC,GAAG4D,YAC5BtB,EAAKtC,GAAGjC,YAAsC,OAAxBuE,EAAKtC,GAAG8D,YAC9BxB,EAAKtC,GAAG7B,YAAyB,IAAXsF,EACtBnB,EAAKtC,GAAG5B,aAAeqF,EAASD,EAChClB,EAAKtC,GAAG1B,QACSuC,IAAfyB,EAAKtC,GAAG1B,GACJ,gBAAkBY,KAAKmE,SACvBf,EAAKtC,GAAG1B,GACdkF,EAAaC,QAGZjB,MAAQ,QACRA,MAAQF,GAMfyB,QAAS,eACF/D,KAAKd,KAAKsD,WACRA,MAAMxC,GAAGsD,MAAQpE,KAAK8E,UAAU9E,KAAKsD,MAAMxC,WAE3Cd,KAAKsD,OAMdyB,QAAS,SAAShF,OACZuD,EAAQtD,KAAKsD,MACfxC,EAAIf,EAAKP,WACN2E,SAAWnE,KAAKmE,SAAW,EAChCb,EAAM0B,OAAOlE,EAAI,EAAG,EAAG,CACrB1B,GAAI,gBAAkBY,KAAKmE,SAC3B3D,MAAO,GACP+D,OAAQxE,EAAKwE,OACb9E,OAAQM,EAAKN,cAEVwF,oBACAC,cAAgBnF,EAAKoF,wBACrBD,cAAc3E,SAMrB6E,WAAY,SAASrF,OACfe,EAAIf,EAAKP,SAET6F,QAAQ,gCAAkCrF,KAAKsD,MAAMxC,GAAGN,MAAQ,KAAM,KAEnE8E,UADAJ,cAAgBnF,EAAKwF,uBAChBvF,KAAKsD,MACTtD,KAAKsD,MAAMgC,GAAG7F,QAAUO,KAAKsD,MAAMxC,GAAG1B,UACnCkE,MAAMgC,GAAG7F,OAASO,KAAKsD,MAAMxC,GAAGrB,aAGpC6D,MAAM0B,OAAOlE,EAAG,QAChBmE,oBACAC,cAAc3E,UAOvBiF,SAAU,SAASzF,EAAMuB,OAErBmE,EAAc1F,EAAKP,MACnBkG,EAAY1F,KAAK2F,cAAc5F,GAC/B6F,EAAcF,EAAYD,EAAc,EACtC/F,EAAS4B,EACTtB,KAAKsD,MAAMmC,GAAaf,YACxB1E,KAAK2F,cAAc3F,KAAKsD,MAAMoC,EAAY,IAAME,EAAc,EAC9DtC,EAAQtD,KAAKsD,MAEb5D,GAAU,GAAKA,EAASM,KAAKsD,MAAMlC,SAChCE,IAAWvB,EAAKZ,YAAgBmC,IAAWvB,EAAKlB,eAC1CyE,EAAM0B,aAAN1B,GACP5D,EACA,YACG4D,EAAM0B,OAAOS,EAAaG,WAE1BvB,QAAQf,QACR4B,cAAgBlF,KAAKG,EAAE0F,UAAUC,iBACpC,uBACApG,QACGwF,cAAc3E,UAQzB0E,aAAc,eACR7B,EAAOpD,KAAKsD,WACXA,MAAQ,QACRA,MAAQF,OACczB,IAAvB3B,KAAKkF,eAAsD,OAAvBlF,KAAKkF,eAC3ClF,KAAKkF,cAAc3E,SAMvBwF,cAAe,SAAShG,EAAMY,MAEzBA,EAAS,IAAMZ,EAAKb,cACpByB,EAAS,IAAMZ,EAAKd,YACrB,KACI6B,EAAI0D,SAASzE,EAAKP,OACpBwG,EAAYjG,EAAKwE,OACjBA,EAASxE,EAAKwE,OAAS5D,EACvBiB,EAAId,EAAI,EACNmF,EAAkC,OAArBlG,EAAK2E,YAAuB3E,EAAK2E,YAAYtF,GAAK,KAC/D8G,EACFlG,KAAKmG,aAAapG,EAAKN,SAAWO,KAAKmG,aAAapG,EAAKN,QAAQA,OAC7DO,KAAKmG,aAAapG,EAAKN,QAAQA,OAAOL,GACtC,SACNW,EAAKwE,OAASA,EACdxE,EAAKN,OAASkB,EAAS,EAAIsF,EAAaC,EACxCnG,EAAK2E,YAAc1E,KAAK2E,YAAY7D,EAAGyD,GAAQ,GAC/CxE,EAAK6E,YAAc5E,KAAK2E,YAAY7D,EAAGyD,GAAQ,GAC/CxE,EAAKZ,UAAiC,OAArBY,EAAK2E,YACtB3E,EAAKlB,YAAmC,OAArBkB,EAAK6E,YACxB7E,EAAKd,YAAyB,IAAXsF,EACnBxE,EAAKb,aACmB,OAAtBc,KAAKsD,MAAMxC,EAAI,IAAeyD,EAASvE,KAAKsD,MAAMxC,EAAI,GAAGyD,OAEvC,OAAlBvE,KAAKsD,MAAM1B,SACOD,IAAlB3B,KAAKsD,MAAM1B,IACXoE,EAAYhG,KAAKsD,MAAM1B,GAAG2C,aAErBjB,MAAM1B,GAAG2C,OAASvE,KAAKsD,MAAM1B,GAAG2C,OAAS5D,EAC9CiB,IACAwE,KAAOpG,KAAKsD,MAAM1B,QAEfqD,iBAOTU,cAAe,SAAS5F,OAClBqG,EACFrG,MAAAA,EACIC,KAAK2E,YAAY5E,EAAKP,MAAOO,EAAKwE,QAAQ,GAC1C,YACF6B,MAAAA,EACKA,EAAO,EAEE,OAAhBrG,EAAKN,QACW,OAAhBM,EAAKN,QAC8B,OAAnCO,KAAKmG,aAAapG,EAAKN,QAEhBO,KAAK2F,cAAc3F,KAAKmG,aAAapG,EAAKN,SAE1CO,KAAKsD,MAAMlC,OAAS,GAO/BqD,WAAY,SAASrB,EAAMtC,WACFa,IAAnByB,EAAKtC,GAAGrB,OAAsB,KAC5B6F,EAAIlC,EAAKiD,UAAU,SAAApF,UAAKA,EAAE7B,KAAOgE,EAAKtC,GAAGrB,iBAC7BkC,IAAZyB,EAAKkC,SAAuC3D,IAAnByB,EAAKkC,GAAGf,cAC5BnB,EAAKkC,GAAGf,OAAS,SAGrB,GAMTO,UAAW,SAAS/E,OACduG,EAAM,EACRlC,EAAQ,MACLtD,KAAKd,KAAKsD,MACTtD,KAAKsD,MAAMxC,GAAGrB,QAAUM,EAAKN,QAAUO,KAAKsD,MAAMxC,GAAG1B,IAAMW,EAAKX,GAClEgF,EAAQkC,EACCtG,KAAKsD,MAAMxC,GAAGrB,QAAUM,EAAKN,QACtC6G,WAGGlC,GAMTO,YAAa,SAASnF,EAAO+E,EAAQgC,WAC/BC,EAAMD,GAAQ,EAAI,EACpBzF,EAAItB,EAAQgH,EACZC,EAAM,KACD3F,EAAId,KAAKsD,MAAMlC,QAAUN,GAAK,GACvB,OAAR2F,GAAgBzG,KAAKsD,MAAMxC,GAAGrB,SAAWO,KAAKsD,MAAM9D,GAAOC,SAC7DgH,EAAM3F,GAERA,GAAK0F,SAEAC,GAMTN,aAAc,SAAS/G,EAAIsH,OACrB5F,EAAId,KAAKsD,MAAM+C,UAAU,SAAApF,UAAKA,EAAE7B,KAAOA,WAC3CsH,OAAoB/E,IAAX+E,EAAuB,EAAIA,OACL/E,IAA3B3B,KAAKsD,MAAMxC,EAAI4F,GACV1G,KAAKsD,MAAMxC,EAAI4F,GAEf,MAOXC,eAAgB,SAASrG,QAClByE,QAAQzE,EAAEiC,OAAOxC,OAMxB6G,kBAAmB,SAAStG,QACrB8E,WAAW9E,EAAEiC,OAAOxC,OAM3B8G,gBAAiB,SAASvG,QACnBkF,SAASlF,EAAEiC,OAAOxC,KAAMO,EAAEiC,OAAOjB,OAAQhB,EAAEiC,OAAOuE,UAMzDC,iBAAkB,SAASzG,IACdA,EAAEiC,OAAOjB,OAChBhB,EAAEiC,OAAOxC,KAAKwF,uBACdjF,EAAEiC,OAAOxC,KAAKoF,oBACb5D,gBAMPyF,kBAAmB,SAAS1G,OACtB2G,EAAM3G,EAAEiC,OAAO3B,SAAW,GAAK,OAC9BmF,cAAc/F,KAAKmG,aAAa7F,EAAEiC,OAAOxC,KAAKX,IAAK6H,IAM1DC,kBAAmB,SAAS5G,QACrB6F,aAAa7F,EAAEiC,OAAOxC,KAAKX,IAAIoB,MAAQF,EAAEiC,OAAOvD,WAChDiG,wCAMW,SAAS3E,QACpB4E,cAAgB5E,EAAE6G,mCAMR,SAAS7G"}