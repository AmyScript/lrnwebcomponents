{"version":3,"file":"media-video.umd.js","sources":["media-video.umd.js"],"sourcesContent":["/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\n/**\n * `media-video`\n * `Video wrapper class`\n *\n * @demo demo/index.html\n */\nlet MediaVideo = Polymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n    </style>\n    <slot></slot>\n  `,\n\n  is: \"media-video\",\n  behaviors: [],\n\n  properties: {},\n\n  ready: function() {\n    const videoSrc = this.querySelector(\"*[data-mediavideo-src]\");\n    this.addEventListener(\"click\", e => {\n      e.stopPropagation();\n      const target = dom(e).localTarget;\n      const videoContainer = this.querySelector(\".mediavideo\");\n      const videoPoster = this.querySelector(\".mediavideo-button-container\");\n      const videoSrc = this.querySelector(\"*[data-mediavideo-src]\");\n      videoPoster.classList.toggle(\"mediavideo-button-display\");\n      // Add the is-open tag to the base element.\n      videoContainer.classList.toggle(\"mediavideo--is-open\");\n      if (\n        target.classList.contains(\"poster--image\") ||\n        target.classList.contains(\"mediavideo-icon\")\n      ) {\n        // Give the animation enough time to complete.\n        setTimeout(() => {\n          this._startIframeVideo(videoSrc);\n        }, 500);\n      } else {\n        this._stopIframeVideo(videoSrc);\n      }\n    });\n  },\n\n  _startIframeVideo: function(video) {\n    // Start the iframe videos.\n    var videoIframeSrc = video.dataset.mediavideoSrc;\n    // If it's a youtube or vimeo video then add an autoplay attr on the end\n    // of the url.\n    if (\n      videoIframeSrc.indexOf(\"youtube\") >= 0 ||\n      videoIframeSrc.indexOf(\"vimeo\") >= 0\n    ) {\n      // Find out if we need to fstart the query parameter or add\n      // on to an existing one.\n      if (videoIframeSrc.indexOf(\"?\") >= 0) {\n        videoIframeSrc += \"&autoplay=1\";\n      } else {\n        videoIframeSrc += \"?autoplay=1\";\n      }\n    }\n    // Add it to the source attribute to load the video.\n    video.setAttribute(\"src\", videoIframeSrc);\n  },\n\n  _stopIframeVideo: function(video) {\n    video.setAttribute(\"src\", \"\");\n  }\n});\nexport { MediaVideo };\n"],"names":["MediaVideo","Polymer","_template","html","is","behaviors","properties","ready","this","querySelector","addEventListener","e","stopPropagation","target","dom","localTarget","videoContainer","_this","videoPoster","videoSrc","classList","toggle","contains","setTimeout","_startIframeVideo","_stopIframeVideo","video","videoIframeSrc","dataset","mediavideoSrc","indexOf","setAttribute"],"mappings":"uqBAYIA,EAAaC,UAAQ,CACvBC,UAAWC,YASXC,GAAI,cACJC,UAAW,GAEXC,WAAY,GAEZC,MAAO,sBACYC,KAAKC,cAAc,+BAC/BC,iBAAiB,QAAS,SAAAC,GAC7BA,EAAEC,sBACIC,EAASC,MAAIH,GAAGI,YAChBC,EAAiBC,EAAKR,cAAc,eACpCS,EAAcD,EAAKR,cAAc,gCACjCU,EAAWF,EAAKR,cAAc,0BACpCS,EAAYE,UAAUC,OAAO,6BAE7BL,EAAeI,UAAUC,OAAO,uBAE9BR,EAAOO,UAAUE,SAAS,kBAC1BT,EAAOO,UAAUE,SAAS,mBAG1BC,WAAW,WACTN,EAAKO,kBAAkBL,IACtB,KAEHF,EAAKQ,iBAAiBN,MAK5BK,kBAAmB,SAASE,OAEtBC,EAAiBD,EAAME,QAAQC,eAIjCF,EAAeG,QAAQ,YAAc,GACrCH,EAAeG,QAAQ,UAAY,KAI/BH,EAAeG,QAAQ,MAAQ,EACjCH,GAAkB,cAElBA,GAAkB,eAItBD,EAAMK,aAAa,MAAOJ,IAG5BF,iBAAkB,SAASC,GACzBA,EAAMK,aAAa,MAAO"}