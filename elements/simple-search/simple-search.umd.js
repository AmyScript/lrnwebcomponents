!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@polymer/iron-icons/iron-icons.js"),require("@polymer/paper-input/paper-input.js"),require("@polymer/paper-tooltip/paper-tooltip.js"),require("@polymer/polymer/polymer-element.js")):"function"==typeof define&&define.amd?define(["exports","@polymer/iron-icons/iron-icons.js","@polymer/paper-input/paper-input.js","@polymer/paper-tooltip/paper-tooltip.js","@polymer/polymer/polymer-element.js"],t):t(e.SimpleSearch={},null,null,null,e.polymerElement_js)}(this,function(e,t,n,o,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function d(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function b(){var e=d(['<style>\n      :host #content {\n        @apply --simple-search-content;\n      }\n      :host #content[match-number]{\n        color: var(--simple-search-match-text-color, #000);\n        background-color: var(--simple-search-match-bg-color, #f0f0f0);\n        border: 1px solid; \n        border-color: var(--simple-search-match-border-color, #ddd);\n        padding: 0.16px 4px;\n        border-radius: 0.16px;\n        font-weight: bold;\n        @apply --simple-search-match;\n      }\n    </style>\n    <span id="content">\n      <template is="dom-repeat" items="[[_searchedContent]]">\n        <span match-number$="[[item.matchNumber]]" tabindex$="[[_getTabIndex(item.matchNumber)]]">[[item.text]]</span>\n      </template>\n    </span>'],['<style>\n      :host #content {\n        @apply --simple-search-content;\n      }\n      :host #content[match-number]{\n        color: var(--simple-search-match-text-color, #000);\n        background-color: var(--simple-search-match-bg-color, #f0f0f0);\n        border: 1px solid; \n        border-color: var(--simple-search-match-border-color, #ddd);\n        padding: 0.16px 4px;\n        border-radius: 0.16px;\n        font-weight: bold;\n        @apply --simple-search-match;\n      }\n    </style>\n    <span id="content">\n      <template is="dom-repeat" items="[[_searchedContent]]">\n        <span match-number\\$="[[item.matchNumber]]" tabindex\\$="[[_getTabIndex(item.matchNumber)]]">[[item.text]]</span>\n      </template>\n    </span>']);return b=function(){return e},e}var m=function(e){function t(){return a(this,t),p(this,c(t).apply(this,arguments))}return s(t,r.PolymerElement),i(t,[{key:"enableSearch",value:function(e){var t=this,n=[{matched:!1,text:this.content}];null===n[0].text&&(n[0].text=this.innerHTML),this.setContent(n),e.addEventListener("simple-search",function(){this.setContent(n),this.setContent(e.findMatches(n))}),e.addEventListener("goto-result",function(e){t.focus(e.detail)})}},{key:"setContent",value:function(e){this._searchedContent=e}},{key:"focus",value:function(e){var t=this.$.content.querySelector('[match-number="'+e+'"]');null!=t&&t.focus()}},{key:"_getTabIndex",value:function(e){return null!=e?"1":""}}],[{key:"is",get:function(){return"simple-search-content"}},{key:"properties",get:function(){return{content:{type:String,value:null}}}},{key:"template",get:function(){return r.html(b())}}]),t}();function f(){var e=d(['\n      <style is="custom-style">\n        :host {\n          display: flex;\n          align-items: flex-end;\n          justify-content: space-between;\n          width: 100%;\n        }\n        :host #input {\n          flex-grow: 2;\n          margin-right: 4px;\n          --paper-input-container-input-color: var(--simple-search-input-text-color, #000);\n          --paper-input-container-focus-color: var(--simple-search-input-line-color, #000);\n          --paper-input-container-color: var(--simple-search-input-placeholder-color, #222);\n          color: var(--simple-search-input-placeholder-color, #222);\n          @apply --simple-search-container;\n        }\n        :host #xofy {\n          margin: 8px;\n        }\n        :host button {\n          margin: 8px 0 8px;\n          color: var(--simple-search-button-color, #111);\n          background-color: var(--simple-search-button-bg-color, #eee);\n          border-color: var(--simple-search-button-border-color, #ccc);\n          @apply --simple-search-button;\n        }\n        :host button:not([disabled]):focus,\n        :host button:not([disabled]):hover {\n          cursor: pointer;\n          color: var(--simple-search-button-hover-color, #000);\n          background-color: var(--simple-search-button-hover-bg-color, #fff);\n          border-color: var(--simple-search-button-hover-border-color, #ddd);\n          @apply --simple-search-button-hover;\n        }\n        :host button[disabled] {\n          cursor: not-allowed;\n          color: var(--simple-search-button-disabled-color, #999);\n          background-color: var(--simple-search-button-disabled-bg-color, #eee);\n          border-color: var(--simple-search-button-disabled-border-color, #ccc);\n          @apply --simple-search-button-disabled;\n        }\n        :host button:not([controls]) {\n          display: none;\n        }\n        :host [shrink-hide] {\n          display: none;\n        }\n      </style>\n      <paper-input id="input" always-float-label$="[[alwaysFloatLabel]]" label="[[searchInputLabel]]" no-label-float$="[[noLabelFloat]]" on-change="_handleChange">\n        <iron-icon icon="[[searchInputIcon]]" slot="prefix"></iron-icon>\n      </paper-input>\n      <div id="xofy" shrink-hide$="[[noSearch]]"></div>\n      <div shrink-hide$="[[noResults]]">\n        <button id="prev" aria-label="[[prevButtonLabel]]" aria-role="button" controls$="[[controls]]" disabled$="[[prevButtonDisabled]]" on-tap="_navigateResults" tabindex="0">\n          <iron-icon icon="[[prevButtonIcon]]"></iron-icon>\n        </button>\n        <paper-tooltip for="prev">[[prevButtonLabel]]</paper-tooltip>\n        <button id="next" aria-label="[[nextButtonLabel]]" aria-role="button" controls$="[[controls]]" disabled$="[[nextButtonDisabled]]" on-tap="_navigateResults" tabindex="0">\n          <iron-icon icon$="[[nextButtonIcon]]"></iron-icon>\n        </button>\n        <paper-tooltip for="next">[[nextButtonLabel]]</paper-tooltip>\n      </div>'],['\n      <style is="custom-style">\n        :host {\n          display: flex;\n          align-items: flex-end;\n          justify-content: space-between;\n          width: 100%;\n        }\n        :host #input {\n          flex-grow: 2;\n          margin-right: 4px;\n          --paper-input-container-input-color: var(--simple-search-input-text-color, #000);\n          --paper-input-container-focus-color: var(--simple-search-input-line-color, #000);\n          --paper-input-container-color: var(--simple-search-input-placeholder-color, #222);\n          color: var(--simple-search-input-placeholder-color, #222);\n          @apply --simple-search-container;\n        }\n        :host #xofy {\n          margin: 8px;\n        }\n        :host button {\n          margin: 8px 0 8px;\n          color: var(--simple-search-button-color, #111);\n          background-color: var(--simple-search-button-bg-color, #eee);\n          border-color: var(--simple-search-button-border-color, #ccc);\n          @apply --simple-search-button;\n        }\n        :host button:not([disabled]):focus,\n        :host button:not([disabled]):hover {\n          cursor: pointer;\n          color: var(--simple-search-button-hover-color, #000);\n          background-color: var(--simple-search-button-hover-bg-color, #fff);\n          border-color: var(--simple-search-button-hover-border-color, #ddd);\n          @apply --simple-search-button-hover;\n        }\n        :host button[disabled] {\n          cursor: not-allowed;\n          color: var(--simple-search-button-disabled-color, #999);\n          background-color: var(--simple-search-button-disabled-bg-color, #eee);\n          border-color: var(--simple-search-button-disabled-border-color, #ccc);\n          @apply --simple-search-button-disabled;\n        }\n        :host button:not([controls]) {\n          display: none;\n        }\n        :host [shrink-hide] {\n          display: none;\n        }\n      </style>\n      <paper-input id="input" always-float-label\\$="[[alwaysFloatLabel]]" label="[[searchInputLabel]]" no-label-float\\$="[[noLabelFloat]]" on-change="_handleChange">\n        <iron-icon icon="[[searchInputIcon]]" slot="prefix"></iron-icon>\n      </paper-input>\n      <div id="xofy" shrink-hide\\$="[[noSearch]]"></div>\n      <div shrink-hide\\$="[[noResults]]">\n        <button id="prev" aria-label="[[prevButtonLabel]]" aria-role="button" controls\\$="[[controls]]" disabled\\$="[[prevButtonDisabled]]" on-tap="_navigateResults" tabindex="0">\n          <iron-icon icon="[[prevButtonIcon]]"></iron-icon>\n        </button>\n        <paper-tooltip for="prev">[[prevButtonLabel]]</paper-tooltip>\n        <button id="next" aria-label="[[nextButtonLabel]]" aria-role="button" controls\\$="[[controls]]" disabled\\$="[[nextButtonDisabled]]" on-tap="_navigateResults" tabindex="0">\n          <iron-icon icon\\$="[[nextButtonIcon]]"></iron-icon>\n        </button>\n        <paper-tooltip for="next">[[nextButtonLabel]]</paper-tooltip>\n      </div>']);return f=function(){return e},e}customElements.define(m.is,m);var v=function(e){function t(){return a(this,t),p(this,c(t).apply(this,arguments))}return s(t,r.PolymerElement),i(t,[{key:"ready",value:function(){h(c(t.prototype),"ready",this).call(this);var e=this.$.input;this._getSearchText(e.value)}},{key:"_handleChange",value:function(e){this._getSearchText(this.$.input.value),this.resultCount=0,this.resultPointer=0,this.dispatchEvent(new CustomEvent("simple-search",{detail:{search:this,content:e}}))}},{key:"_hasNoResults",value:function(e){return e<1}},{key:"_hasNoSearch",value:function(e){return e.length<1}},{key:"_getResultsSpan",value:function(e,t,n){var o="";return o=n>0&&t>0?t+"/"+n:" "+n,this.$.xofy.innerHTML=o,this.$.xofy.innerHTML}},{key:"_navigateResults",value:function(e){var t="next"===e.currentTarget.id?1:-1;this.resultPointer+t>0&&this.resultPointer+t<=this.resultCount&&(this.resultPointer+=t,this.dispatchEvent(new CustomEvent("goto-result",{detail:this.resultPointer})))}},{key:"_isNavButtonDisabled",value:function(e,t,n,o){return""==n||e+o<=0||e+o>t}},{key:"_getSearchText",value:function(e){var t=new Array;if(null!=e){t=e.split(/[\"\']/gm);for(var n=0;n<t.length;n++)t[n]=t[n].trim(),""===t[n]&&t.splice(n,1)}this.set("searchTerms",[]),this.set("searchTerms",t.slice(0))}},{key:"findMatches",value:function(e){for(var t=this,n=t.searchTerms,o=this.caseSensitive?"gm":"gim",r=e.slice(0),a=function(e){for(var n=0;n<r.length;n++)if(!1===r[n].matched){var a=new RegExp("\\b"+e+"\\b",o),l=r[n].text,i=l.search(a),s=i+e.length;if(i>-1){t.resultCount+=1;var c=l.slice(0,i),u=l.slice(i,s),p=l.slice(s,l.length);r.splice(n,1,{matched:!1,text:c,searchObject:t},{matched:!0,matchNumber:t.resultCount,text:u,searchObject:t},{matched:!1,text:p,searchObject:t})}}},l=0;l<n.length;l++)a(n[l]);return t.resultPointer=0,r}}],[{key:"is",get:function(){return"simple-search"}},{key:"properties",get:function(){return{alwaysFloatLabel:{type:Boolean,value:!1},caseSensitive:{type:Boolean,value:null},controls:{type:String,value:null},nextButtonDisabled:{type:Boolean,computed:"_isNavButtonDisabled(resultPointer,resultCount,resultsSpan,1)"},nextButtonIcon:{type:String,value:"arrow-forward"},nextButtonLabel:{type:String,value:"next result"},noLabelFloat:{type:Boolean,value:!1},noResults:{type:Boolean,computed:"_hasNoResults(resultCount)"},noSearch:{type:Boolean,computed:"_hasNoSearch(searchTerms)"},prevButtonDisabled:{type:Boolean,computed:"_isNavButtonDisabled(resultPointer,resultCount,resultsSpan,-1)"},prevButtonIcon:{type:String,value:"arrow-back"},prevButtonLabel:{type:String,value:"previous result"},resultCount:{type:Number,value:0},resultPointer:{type:Number,value:0},resultsSpan:{type:String,computed:"_getResultsSpan(noSearch,resultPointer,resultCount)"},searchInputIcon:{type:String,value:"search"},searchInputLabel:{type:String,value:"search"},searchTerms:{type:Array,value:[]},target:{type:Object,value:null}}}},{key:"template",get:function(){return r.html(f())}}]),t}();customElements.define(v.is,v),e.SimpleSearch=v,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=simple-search.umd.js.map
