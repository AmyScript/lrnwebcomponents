!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@polymer/polymer/polymer-legacy.js"),require("@polymer/polymer/lib/legacy/polymer.dom.js")):"function"==typeof define&&define.amd?define(["@polymer/polymer/polymer-legacy.js","@polymer/polymer/lib/legacy/polymer.dom.js"],e):e(t.polymerLegacy_js,t.polymer_dom_js)}(this,function(t,e){"use strict";window.FancyCarouselAnimationBehaviourImpl={properties:{_isWorking:!1},observers:[],_getNatureSpriteUrl:function(){return"url('"+this.resolveUrl("images/nature-sprite.png")+"')"},_getUrbanSpriteUrl:function(){return"url('"+this.resolveUrl("images/urban-sprite.png")+"')"},_getShiftSpriteUrl:function(){return"url('"+this.resolveUrl("images/building-sprite.png")+"')"},_getCollaspeSpriteUrl:function(){return"url('"+this.resolveUrl("images/building-sprite-2.png")+"')"},_preloadAnimationSprites:function(){var t=document.createElement("div");t.style.backgroundImage=this._getNatureSpriteUrl(),t.style.visibility="hidden",t.setAttribute("class","dummy"),e.dom(this).appendChild(t);var i=document.createElement("div");i.style.backgroundImage=this._getUrbanSpriteUrl(),i.style.visibility="hidden",i.setAttribute("class","dummy"),e.dom(this).appendChild(i);var n=document.createElement("div");n.style.backgroundImage=this._getShiftSpriteUrl(),n.style.visibility="hidden",n.setAttribute("class","dummy"),e.dom(this).appendChild(n);var s=document.createElement("div");s.style.backgroundImage=this._getCollaspeSpriteUrl(),s.style.visibility="hidden",s.setAttribute("class","dummy"),e.dom(this).appendChild(s)},_resetZIndex:function(t,e){for(var i=0;i<t.length;i++)e&&e.src===t[i].src?t[i].style.zIndex="2":t[i].style.zIndex="1"},_startTransition:function(t,i,n){if("spread"===this.transitionType||"paint"===this.transitionType||"shift"===this.transitionType||"collapse"===this.transitionType)this._animateTransition(t,i,n);else{if(this._isWorking)return;this._isWorking=!0,n.style.zIndex="50";var s=i;this._translateX(s,0),this._translateX(n,this.offsetWidth*t),this.selected=n,this._translateX(s,-this.offsetWidth*t,!0),this._translateX(n,0,!0),this._resetZIndex(e.dom(this).children,i),n.style.zIndex="100",this._isWorking=!1}},_animateTransition:function(t,i,n){var s=this;s._isWorking||(s._isWorking=!0,n.style.zIndex="50",i.className=this.transitionType,"spread"===this.transitionType?(i.style.mask=this._getNatureSpriteUrl(),i.style.webkitMask=this._getNatureSpriteUrl()):"paint"===this.transitionType?(i.style.mask=this._getUrbanSpriteUrl(),i.style.webkitMask=this._getUrbanSpriteUrl()):"collapse"===this.transitionType?(i.style.mask=this._getCollaspeSpriteUrl(),i.style.webkitMask=this._getCollaspeSpriteUrl()):"shift"===this.transitionType&&(i.style.mask=this._getShiftSpriteUrl(),i.style.webkitMask=this._getShiftSpriteUrl()),setTimeout(function(){i.className="",i.style.mask="",i.style.webkitMask="",s._resetZIndex(e.dom(s).children),n.style.zIndex="100",s.selected=n,s._isWorking=!1},1400))},listeners:{transitionend:"_resetChildrenStyles",touchstart:"_touchstart",touchmove:"_touchmove",touchend:"_touchend"},_resetChildrenStyles:function(){for(var t=this.firstElementChild;t;)t.style.display="",t.style.transition="",t.style.transform="",t=t.nextElementSibling},_translateX:function(t,e,i){t.style.display="block",t.style.transition=i?"transform 0.2s":"",t.style.transform="translate3d("+e+"px, 0, 0)"},_touchstart:function(t){this.childElementCount<2||this._touchDir||(this._startX=t.changedTouches[0].clientX,this._startY=t.changedTouches[0].clientY)},_touchmove:function(t){if(!(this.childElementCount<2)){if(!this._touchDir){var e=Math.abs(t.changedTouches[0].clientX-this._startX),i=Math.abs(t.changedTouches[0].clientY-this._startY);this._touchDir=e>i?"x":"y"}if("x"===this._touchDir){t.preventDefault();var n=Math.round(t.changedTouches[0].clientX-this._startX),s=this.selected.previousElementSibling,r=this.selected.nextElementSibling;(!s&&n>0||!r&&n<0)&&(n=0),this._translateX(this.selected,n),s&&this._translateX(s,n-this.offsetWidth),r&&this._translateX(r,n+this.offsetWidth)}}},_touchend:function(t){if(!(this.childElementCount<2||t.touches.length)){if("x"===this._touchDir){var e=Math.round(t.changedTouches[0].clientX-this._startX),i=this.selected.previousElementSibling,n=this.selected.nextElementSibling;if((!i&&e>0||!n&&e<0)&&(e=0),e>0)(i=this.selected.previousElementSibling)&&(e>100?(e===this.offsetWidth?this._resetChildrenStyles():(this._translateX(i,0,!0),this._translateX(this.selected,this.offsetWidth,!0)),this.selected=i):(this._translateX(i,-this.offsetWidth,!0),this._translateX(this.selected,0,!0)));else if(e<0){(n=this.selected.nextElementSibling)&&(e<-100?(e===-this.offsetWidth?this._resetChildrenStyles():(this._translateX(this.selected,-this.offsetWidth,!0),this._translateX(n,0,!0)),this.selected=n):(this._translateX(this.selected,0,!0),this._translateX(n,this.offsetWidth,!0)))}else this._resetChildrenStyles()}this._touchDir=null}}},window.FancyCarouselAnimationBehaviour=[window.FancyCarouselAnimationBehaviourImpl],window.FancyCarouselBehaviourImpl={properties:{},observers:[],_loadCustomImages:function(t){var e,i=this;findImages(t,this.searchEngineCx,this.apiKey,function(t){t?(e=t,console.log(e),i._addImageNodes(e)):console.log("Error loading images")})},_addImageNodes:function(t){for(var i=t.length,n=0;n<i;n++)if(t[n]){var s=document.createElement("img");s.setAttribute("src",t[n]),s.style.width="100%",s.style.height="100%",e.dom(this).appendChild(s)}},_getNextElement:function(){for(var t=this.selected.nextElementSibling;t&&"dummy"===t.getAttribute("class");)t=t.nextElementSibling;return t||(t=e.dom(this).querySelectorAll("img")[0]),t},_timerChanged:function(t,e){var i=this;0!=t&&setInterval(function(){i.next()},1e3*t)},_selectedChanged:function(t,e){e&&e.removeAttribute("selected"),t&&(t.setAttribute("selected",""),this.$.prevBtn.disabled=!t.previousElementSibling,this.$.nextBtn.disabled=!t.nextElementSibling,this._loadImage(t),this._loadImage(t.previousElementSibling),this._loadImage(t.nextElementSibling))},_loadImage:function(t){t&&!t.src&&(t.src=t.getAttribute("data-src"))}},window.FancyCarouselBehaviour=[window.FancyCarouselBehaviourImpl,window.FancyCarouselAnimationBehaviour];var i=document.createElement("div");function n(){var t,e,i=(t=['\n    <style include="fancy-carousel-shared-styles">\n      :host {\n        display: block;\n        position: relative;\n        overflow: hidden;\n        width: 100%;\n        contain: content;\n      }\n\n      :host(:after) {\n        display: block;\n        content: \'\';\n        padding-top: 75%; /* 4:3 = height is 75% of width */\n      }\n\n      #prevBtn {\n        left: 12px;\n        z-index: 1000;\n      }\n\n      #nextBtn {\n        right: 12px;\n        z-index: 1000;\n      }\n    </style>\n\n    <div id="content-wrapper">\n      <slot></slot>\n    </div>\n\n    <button id="prevBtn" on-click="previous">❮</button>\n    <button id="nextBtn" on-click="next">❯</button>\n'],e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}})));return n=function(){return i},i}i.setAttribute("style","display: none;"),i.innerHTML='<dom-module id="fancy-carousel-shared-styles">\n  <template>\n    <style>\n      button {\n        position: absolute;\n        top: calc(50% - 20px);\n        padding: 0;\n        line-height: 40px;\n        border: none;\n        background: none;\n        color: #DDD;\n        font-size: 40px;\n        font-weight: bold;\n        opacity: 0.7;\n      }\n\n      button:hover,\n      button:focus {\n        opacity: 1;\n      }\n\n      button[disabled] {\n        opacity: 0.4;\n      }\n\n      #content-wrapper ::content > .spread {\n        -webkit-mask-size: 2300% 100%;\n        mask-size: 2300% 100%;\n        -webkit-animation: mask-play 1.4s steps(22) forwards;\n        animation: mask-play 1.4s steps(22) forwards;\n      }\n\n      #content-wrapper ::content > .paint {\n        -webkit-mask-size: 3000% 100%;\n        mask-size: 3000% 100%;\n        -webkit-animation: mask-play 1.4s steps(29) forwards;\n        animation: mask-play 1.4s steps(29) forwards;\n      }\n\n      #content-wrapper ::content > .shift {\n        -webkit-mask-size: 7500% 100%;\n        mask-size: 7500% 100%;\n        -webkit-animation: mask-play 1.4s steps(74) forwards;\n        animation: mask-play 1.4s steps(74) forwards;\n      }\n\n      #content-wrapper ::content > .collapse {\n       -webkit-mask-size: 8400% 100%;\n          mask-size: 8400% 100%;\n        -webkit-animation: mask-play 1.4s steps(83) forwards;\n          animation: mask-play 1.4s steps(83) forwards;\n      }\n\n      #content-wrapper ::content > img {\n        position: absolute;\n        width: 100%;\n        height: 100%;\n      }\n\n      @-webkit-keyframes mask-play {\n        from {\n        -webkit-mask-position: 0% 0;\n        mask-position: 0% 0;\n        }\n        to {\n        -webkit-mask-position: 100% 0;\n        mask-position: 100% 0;\n        }\n      }\n\n      @keyframes mask-play {\n        from {\n        -webkit-mask-position: 0% 0;\n        mask-position: 0% 0;\n        }\n        to {\n        -webkit-mask-position: 100% 0;\n        mask-position: 100% 0;\n        }\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(i),t.Polymer({_template:t.html(n()),is:"fancy-carousel",behaviors:[FancyCarouselBehaviour],properties:{selected:{observer:"_selectedChanged"},imageTopic:{type:String},searchEngineCx:{type:String},apiKey:{type:String},transitionType:{value:"default",type:String,notify:!0},noControls:{type:Boolean,value:!1},transitionTimer:{type:Number,value:0,observer:"_timerChanged"}},attached:function(){this._resetZIndex(e.dom(this).children),this.selected=e.dom(this).querySelectorAll("img")[0],this.selected&&(this.selected.style.zIndex="100"),this.noControls&&(this.$.prevBtn.style.display="none",this.$.nextBtn.style.display="none"),this.imageTopic&&this._loadCustomImages(this.imageTopic),this._preloadAnimationSprites()},previous:function(){for(var t=this.selected.previousElementSibling;t&&"dummy"===t.getAttribute("class");)t=t.previousElementSibling;t&&!this._touchDir&&this._startTransition(-1,this.selected,t)},next:function(){var t=this._getNextElement();t&&!this._touchDir&&this._startTransition(1,this.selected,t)}})});
//# sourceMappingURL=fancy-carousel.umd.js.map
