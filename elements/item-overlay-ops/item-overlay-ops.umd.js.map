{"version":3,"file":"item-overlay-ops.umd.js","sources":["item-overlay-ops.umd.js"],"sourcesContent":["/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"@polymer/paper-button/paper-button.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\n/**\n * `item-overlay-ops`\n * `Overlayed editing ops on whatever the current item slotted in is`\n *\n * @demo demo/index.html\n *\n * @microcopy - the mental model for this element\n */\nlet ItemOverlayOps = Polymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        outline: none;\n      }\n      #container {\n        display: none;\n        opacity: 0;\n        background-color: transparent;\n        transition: background-color 0.6s linear, visibility 0.6s linear,\n          opacity 0.6s linear;\n        visibility: hidden;\n      }\n      :host([edit-mode]) #container {\n        display: block;\n        opacity: 0.4;\n        visibility: visible;\n        background-color: var(--item-overlay-ops, #999999);\n        position: absolute;\n        z-index: 1;\n      }\n      :host([edit-mode]) #container:hover,\n      :host([edit-mode]) #container:focus,\n      :host([focused]) #container {\n        opacity: 0.8;\n        background-color: var(--item-overlay-ops, #ffffff);\n      }\n      .ops {\n        width: 100%;\n        height: 39px;\n        padding: 0;\n        margin: 0;\n        border-bottom: 1px solid rgba(100, 100, 100, 0.4);\n        text-align: center;\n      }\n      .ops paper-icon-button {\n        display: inline-flex;\n        width: 30px;\n        height: 30px;\n        padding: 2px;\n        margin: 5px 8px;\n        color: #999999;\n      }\n      .ops paper-icon-button.active {\n        color: #000000;\n        background-color: rgba(255, 255, 255, 0.6);\n        border-radius: 50%;\n      }\n      .active-op {\n        text-transform: capitalize;\n        margin: 0;\n        height: 40px;\n        line-height: 40px;\n        font-size: 20px;\n        text-align: center;\n      }\n      #workingarea {\n        width: 100%;\n        padding: 0;\n        margin: 0 auto;\n        align-content: center;\n      }\n      #workingarea paper-icon-button {\n        width: 50%;\n        height: 100%;\n        display: inline-flex;\n        min-width: unset;\n        padding: 16px;\n        margin: 0;\n        border: none;\n        border-radius: 0;\n      }\n      #workingarea #option1 {\n        background-color: rgba(100, 255, 100, 0.6);\n      }\n      #workingarea #option2 {\n        background-color: rgba(255, 100, 100, 0.6);\n      }\n      #workingarea #option1:hover,\n      #workingarea #option1:focus {\n        background-color: rgba(100, 255, 100, 1);\n      }\n      #workingarea #option2:hover,\n      #workingarea #option2:focus {\n        background-color: rgba(255, 100, 100, 1);\n      }\n      #workingarea {\n        display: none;\n      }\n      #workingarea.move {\n        display: flex;\n      }\n      #workingarea.move #option1,\n      #workingarea.move #option2 {\n        background-color: rgba(200, 200, 200, 0.5);\n      }\n      #workingarea.move #option1:hover,\n      #workingarea.move #option1:focus,\n      #workingarea.move #option2:hover,\n      #workingarea.move #option2:focus {\n        background-color: rgba(200, 200, 200, 1);\n      }\n      #workingarea.remove {\n        display: flex;\n      }\n      #workingarea.duplicate {\n        display: flex;\n      }\n    </style>\n    <div id=\"container\">\n      <div class=\"ops\">\n        <paper-icon-button\n          on-tap=\"_opTap\"\n          icon=\"icons:add\"\n          id=\"add\"\n          hidden\\$=\"[[!add]]\"\n          title=\"Add to this\"\n        ></paper-icon-button>\n        <paper-icon-button\n          on-tap=\"_opTap\"\n          icon=\"icons:create\"\n          id=\"edit\"\n          hidden\\$=\"[[!edit]]\"\n          title=\"Edit this\"\n        ></paper-icon-button>\n        <paper-icon-button\n          on-tap=\"_opTap\"\n          icon=\"icons:swap-horiz\"\n          id=\"move\"\n          hidden\\$=\"[[!move]]\"\n          title=\"Move this\"\n        ></paper-icon-button>\n        <paper-icon-button\n          on-tap=\"_opTap\"\n          icon=\"icons:delete\"\n          id=\"remove\"\n          hidden\\$=\"[[!remove]]\"\n          title=\"Delete this\"\n        ></paper-icon-button>\n        <paper-icon-button\n          on-tap=\"_opTap\"\n          icon=\"icons:content-copy\"\n          id=\"duplicate\"\n          hidden\\$=\"[[!duplicate]]\"\n          title=\"Duplicate this\"\n        ></paper-icon-button>\n      </div>\n      <div class=\"active-op\">[[activeTitle]]</div>\n      <div id=\"workingarea\" class\\$=\"[[activeOp]]\">\n        <paper-icon-button\n          on-tap=\"_optionSelected\"\n          id=\"option1\"\n          title=\"[[__option1Text]]\"\n          icon=\"[[__option1Icon]]\"\n        ></paper-icon-button>\n        <paper-icon-button\n          on-tap=\"_optionSelected\"\n          id=\"option2\"\n          title=\"[[__option2Text]]\"\n          icon=\"[[__option2Icon]]\"\n        ></paper-icon-button>\n      </div>\n    </div>\n    <slot></slot>\n  `,\n\n  is: \"item-overlay-ops\",\n\n  listeners: {\n    focusin: \"_inFocus\",\n    focusout: \"_outFocus\"\n  },\n\n  hostAttributes: {\n    tabindex: \"0\"\n  },\n\n  properties: {\n    /**\n     * Edit mode whether it is shown or not\n     */\n    editMode: {\n      type: Boolean,\n      reflectToAttribute: true,\n      value: false\n    },\n    /**\n     * Edit mode whether it is shown or not\n     */\n    focused: {\n      type: Boolean,\n      reflectToAttribute: true,\n      value: false\n    },\n    /**\n     * Title to present of active option\n     */\n    activeTitle: {\n      type: String\n    },\n    /**\n     * Active operation\n     */\n    activeOp: {\n      type: String\n    },\n    /**\n     * Add opertaions\n     */\n    add: {\n      type: Boolean,\n      value: false\n    },\n    /**\n     * Edit opertaions\n     */\n    edit: {\n      type: Boolean,\n      value: false\n    },\n    /**\n     * Move opertaions\n     */\n    move: {\n      type: Boolean,\n      value: false\n    },\n    /**\n     * Remove opertaions\n     */\n    remove: {\n      type: Boolean,\n      value: false\n    },\n    /**\n     * Duplicate opertaions\n     */\n    duplicate: {\n      type: Boolean,\n      value: false\n    }\n  },\n\n  /**\n   * attached life cycle\n   */\n  attached: function() {\n    // delay is enough to get the height correct\n    setTimeout(() => {\n      let rect = this.getBoundingClientRect();\n      this.$.container.style.width = rect.width + \"px\";\n      this.$.container.style.height = rect.height + \"px\";\n      this.$.workingarea.style.height = rect.height - 80 + \"px\";\n    }, 1);\n    window.addEventListener(\"resize\", this._windowResize.bind(this));\n  },\n\n  /**\n   * detached life cycle\n   */\n  detached: function() {\n    window.removeEventListener(\"resize\", this._windowResize.bind(this));\n  },\n  /**\n   * react to window resizing\n   */\n  _windowResize: function(e) {\n    let rect = this.getBoundingClientRect();\n    this.$.container.style.width = rect.width + \"px\";\n    this.$.container.style.height = rect.height + \"px\";\n    this.$.workingarea.style.height = rect.height - 80 + \"px\";\n  },\n\n  /**\n   * Support tapping the buttons in the top\n   */\n  _opTap: function(e) {\n    let normalizedEvent = dom(e);\n    let local = normalizedEvent.localTarget;\n    this.activeTitle = local.getAttribute(\"id\");\n    this.activeOp = local.getAttribute(\"id\");\n    this._resetActive();\n    local.classList.add(\"active\");\n    // we switch icons for these\n    switch (this.activeOp) {\n      case \"remove\":\n        this.__option1Icon = \"icons:check\";\n        this.__option1Text = \"Confirm deleting this\";\n        this.__option2Icon = \"icons:clear\";\n        this.__option2Text = \"Cancel\";\n        break;\n      case \"duplicate\":\n        this.__option1Icon = \"icons:check\";\n        this.__option1Text = \"Confirm duplicating this\";\n        this.__option2Icon = \"icons:clear\";\n        this.__option2Text = \"Cancel\";\n        break;\n      case \"move\":\n        this.__option1Icon = \"icons:arrow-back\";\n        this.__option1Text = \"Move item left\";\n        this.__option2Icon = \"icons:arrow-forward\";\n        this.__option2Text = \"Move item right\";\n        break;\n    }\n    // let others know there's an event here\n    let op = {\n      element: this,\n      operation: this.activeOp\n    };\n    this.fire(\"item-overlay-op-changed\", op);\n  },\n\n  /**\n   * Set element reflected focus so we can get the whole thing\n   */\n  _inFocus: function(e) {\n    if (this.editMode) {\n      this.focused = true;\n    }\n  },\n\n  /**\n   * Drop element reflection when all focus offs are fired\n   */\n  _outFocus: function(e) {\n    if (this.editMode) {\n      this.focused = false;\n    }\n  },\n\n  /**\n   * fire event because an option was selected.\n   */\n  _optionSelected: function(e) {\n    let normalizedEvent = dom(e);\n    let local = normalizedEvent.localTarget;\n    // fire that an option was selected and about what operation\n    let ops = {\n      element: this,\n      operation: this.activeOp,\n      option: local.getAttribute(\"id\")\n    };\n    this.fire(\"item-overlay-option-selected\", ops);\n    // don't reset for movement, just confirm / reject actions\n    if (this.activeOp != \"move\") {\n      this._resetActive();\n      this.activeOp = null;\n    }\n  },\n\n  /**\n   * Reset the active selections\n   */\n  _resetActive: function() {\n    this.$.add.classList.remove(\"active\");\n    this.$.edit.classList.remove(\"active\");\n    this.$.move.classList.remove(\"active\");\n    this.$.remove.classList.remove(\"active\");\n    this.$.duplicate.classList.remove(\"active\");\n  }\n});\nexport { ItemOverlayOps };\n"],"names":["ItemOverlayOps","Polymer","_template","html","is","listeners","focusin","focusout","hostAttributes","tabindex","properties","editMode","type","Boolean","reflectToAttribute","value","focused","activeTitle","String","activeOp","add","edit","move","remove","duplicate","attached","setTimeout","rect","_this","getBoundingClientRect","$","container","style","width","height","workingarea","window","addEventListener","this","_windowResize","bind","detached","removeEventListener","e","_opTap","local","dom","localTarget","getAttribute","_resetActive","classList","__option1Icon","__option1Text","__option2Icon","__option2Text","op","element","operation","fire","_inFocus","_outFocus","_optionSelected","ops","option"],"mappings":"k0TAiBIA,EAAiBC,UAAQ,CAC3BC,UAAWC,YAuKXC,GAAI,mBAEJC,UAAW,CACTC,QAAS,WACTC,SAAU,aAGZC,eAAgB,CACdC,SAAU,KAGZC,WAAY,CAIVC,SAAU,CACRC,KAAMC,QACNC,oBAAoB,EACpBC,OAAO,GAKTC,QAAS,CACPJ,KAAMC,QACNC,oBAAoB,EACpBC,OAAO,GAKTE,YAAa,CACXL,KAAMM,QAKRC,SAAU,CACRP,KAAMM,QAKRE,IAAK,CACHR,KAAMC,QACNE,OAAO,GAKTM,KAAM,CACJT,KAAMC,QACNE,OAAO,GAKTO,KAAM,CACJV,KAAMC,QACNE,OAAO,GAKTQ,OAAQ,CACNX,KAAMC,QACNE,OAAO,GAKTS,UAAW,CACTZ,KAAMC,QACNE,OAAO,IAOXU,SAAU,sBAERC,WAAW,eACLC,EAAOC,EAAKC,wBAChBD,EAAKE,EAAEC,UAAUC,MAAMC,MAAQN,EAAKM,MAAQ,KAC5CL,EAAKE,EAAEC,UAAUC,MAAME,OAASP,EAAKO,OAAS,KAC9CN,EAAKE,EAAEK,YAAYH,MAAME,OAASP,EAAKO,OAAS,GAAK,MACpD,GACHE,OAAOC,iBAAiB,SAAUC,KAAKC,cAAcC,KAAKF,QAM5DG,SAAU,WACRL,OAAOM,oBAAoB,SAAUJ,KAAKC,cAAcC,KAAKF,QAK/DC,cAAe,SAASI,OAClBhB,EAAOW,KAAKT,6BACXC,EAAEC,UAAUC,MAAMC,MAAQN,EAAKM,MAAQ,UACvCH,EAAEC,UAAUC,MAAME,OAASP,EAAKO,OAAS,UACzCJ,EAAEK,YAAYH,MAAME,OAASP,EAAKO,OAAS,GAAK,MAMvDU,OAAQ,SAASD,OAEXE,EADkBC,MAAIH,GACEI,wBACvB9B,YAAc4B,EAAMG,aAAa,WACjC7B,SAAW0B,EAAMG,aAAa,WAC9BC,eACLJ,EAAMK,UAAU9B,IAAI,UAEZkB,KAAKnB,cACN,cACEgC,cAAgB,mBAChBC,cAAgB,6BAChBC,cAAgB,mBAChBC,cAAgB,mBAElB,iBACEH,cAAgB,mBAChBC,cAAgB,gCAChBC,cAAgB,mBAChBC,cAAgB,mBAElB,YACEH,cAAgB,wBAChBC,cAAgB,sBAChBC,cAAgB,2BAChBC,cAAgB,sBAIrBC,EAAK,CACPC,QAASlB,KACTmB,UAAWnB,KAAKnB,eAEbuC,KAAK,0BAA2BH,IAMvCI,SAAU,SAAShB,GACbL,KAAK3B,gBACFK,SAAU,IAOnB4C,UAAW,SAASjB,GACdL,KAAK3B,gBACFK,SAAU,IAOnB6C,gBAAiB,SAASlB,OAEpBE,EADkBC,MAAIH,GACEI,YAExBe,EAAM,CACRN,QAASlB,KACTmB,UAAWnB,KAAKnB,SAChB4C,OAAQlB,EAAMG,aAAa,YAExBU,KAAK,+BAAgCI,GAErB,QAAjBxB,KAAKnB,gBACF8B,oBACA9B,SAAW,OAOpB8B,aAAc,gBACPnB,EAAEV,IAAI8B,UAAU3B,OAAO,eACvBO,EAAET,KAAK6B,UAAU3B,OAAO,eACxBO,EAAER,KAAK4B,UAAU3B,OAAO,eACxBO,EAAEP,OAAO2B,UAAU3B,OAAO,eAC1BO,EAAEN,UAAU0B,UAAU3B,OAAO"}