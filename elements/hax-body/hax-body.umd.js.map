{"version":3,"file":"hax-body.umd.js","sources":["lib/hax-toolbar-item.js","lib/hax-toolbar-menu.js","lib/hax-context-item-menu.js","lib/hax-context-item.js","lib/hax-context-item-textop.js","lib/hax-toolbar.js","lib/hax-text-context.js","lib/hax-ce-context.js","lib/hax-plate-context.js","lib/hax-input-mixer.js","hax-body.umd.js"],"sourcesContent":["import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"@polymer/paper-tooltip/paper-tooltip.js\";\nimport \"@lrnwebcomponents/materializecss-styles/lib/colors.js\";\nPolymer({\n  _template: html`\n    <style include=\"materializecss-styles-colors\">\n      :host {\n        display: flex;\n        --hax-item-color: #e5e5e5;\n        --hax-item-background: #2e2e2e;\n        box-sizing: border-box;\n      }\n      :host([menu]) {\n        width: 100%;\n        position: relative;\n        height: 32px;\n        display: -ms-flexbox;\n        display: -webkit-flex;\n        display: flex;\n        -ms-flex-direction: row;\n        -webkit-flex-direction: row;\n        flex-direction: row;\n        -webkit-justify-content: flex-start;\n        justify-content: flex-start;\n        font-family: 'Roboto', 'Noto', sans-serif;\n        -webkit-font-smoothing: antialiased;\n        font-size: 16px;\n        font-weight: 400;\n        line-height: 24px;\n        --hax-item-color: #2e2e2e;\n        --hax-item-background: #FFFFFF;\n      }\n      :host([menu]) paper-button {\n        -webkit-justify-content: flex-start;\n        justify-content: flex-start;\n      }\n      #label {\n        padding-left: 5px;\n      }\n      paper-button {\n        display: flex;\n        align-items: center;\n        background-color: var(--hax-item-background);\n        color: var(--hax-item-color);\n        min-width: 0;\n        margin: 0;\n        text-transform: none;\n        padding: 8px;\n        border-radius: 0;\n        font-size: 12px;\n        height: 32px;\n        transition: .1s all;\n        @apply --hax-toolbar-item-container;\n      }\n      paper-button:hover {\n        background-color: var(--hax-item-color);\n        color: var(--hax-item-background);\n      }\n      paper-button:active {\n        background: var(--hax-item-color);\n        color: var(--hax-item-background);\n      }\n      :host([default]) paper-button {\n        background: black;\n      }\n      :host([light]) paper-button {\n        background-color: var(--hax-item-color);\n        color: var(--hax-item-background);\n      }\n      :host([light]) paper-button:hover {\n        background-color: var(--hax-item-background);\n        color: var(--hax-item-color);\n      }\n      :host([light]) paper-button:active {\n        background: var(--hax-item-background);\n        color: var(--hax-item-color);\n      }\n      :host([mini]) iron-icon {\n        width: 16px;\n        height: 16px;\n      }\n      :host([mini]) paper-button {\n        border-radius: 50%;\n        width: 18px;\n        height: 18px;\n        padding: 2px;\n      }\n      :host([menu]) paper-button {\n        padding: 0 8px;\n        width: 100%;\n        height: 32px;\n      }\n      :host([menu]) paper-button:hover {\n        background-color: #d3d3d3;\n        color: #000000;\n      }\n      :host([corner=\"left\"]) paper-button {\n        border-top-left-radius: 25%;\n      }\n      :host([corner=\"right\"]) paper-button {\n        border-top-right-radius: 25%;\n      }\n      .flip-icon {\n        transform: rotateY(180deg);\n      }\n    </style>\n\n    <paper-button disabled=\"[[disabled]]\" id=\"buttoncontainer\" tabindex=\"0\" title\\$=\"[[tooltip]]\">\n      <iron-icon id=\"button\" icon=\"[[icon]]\" class\\$=\"[[iconClass]]\"></iron-icon> <span id=\"label\" hidden\\$=\"[[!label]]\">[[label]]</span>\n      <slot></slot>\n    </paper-button>\n    <paper-tooltip id=\"tooltip\" for\\$=\"[[this]]\" offset=\"14\" position=\"[[tooltipDirection]]\" animation-delay=\"100\">\n      [[tooltip]]\n    </paper-tooltip>\n`,\n\n  is: \"hax-toolbar-item\",\n\n  properties: {\n    /**\n     * corner\n     */\n    corner: {\n      type: String,\n      reflectToAttribute: true,\n      value: \"\"\n    },\n    /**\n     * disabled state\n     */\n    disabled: {\n      type: Boolean,\n      value: false,\n      reflectToAttribute: true\n    },\n    /**\n     * Inverted display mode\n     */\n    light: {\n      type: Boolean,\n      reflectToAttribute: true,\n      value: false\n    },\n    /**\n     * Style to be presented in a menu\n     */\n    menu: {\n      type: Boolean,\n      value: false,\n      reflectToAttribute: true\n    },\n    /**\n     * Present smaller the normal but consistent\n     */\n    mini: {\n      type: Boolean,\n      reflectToAttribute: true,\n      value: false\n    },\n    /**\n     * Icon to represent this button, required.\n     */\n    icon: {\n      type: String,\n      value: \"\"\n    },\n    /**\n     * Text applied to the button\n     */\n    label: {\n      type: String,\n      value: \"\"\n    },\n    /**\n     * Hover tip text\n     */\n    tooltip: {\n      type: String,\n      value: \"\",\n      observer: \"_tooltipChanged\"\n    },\n    /**\n     * Direction that the tooltip should flow\n     */\n    tooltipDirection: {\n      type: String,\n      value: \"top\"\n    },\n    default: {\n      type: Boolean,\n      value: false,\n      reflectToAttribute: true\n    },\n    /**\n     * Icon for the button.\n     */\n    iconClass: {\n      type: String,\n      value: \"\",\n      reflectToAttribute: true\n    }\n  },\n\n  /**\n   * Keep accessibility inline with tooltip\n   */\n  _tooltipChanged: function(newValue, oldValue) {\n    if (newValue == \"\" || newValue == null) {\n      this.$.tooltip.setAttribute(\"aria-hidden\", \"true\");\n    } else {\n      this.$.tooltip.setAttribute(\"aria-hidden\", \"false\");\n    }\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/paper-item/paper-item.js\";\nimport \"@polymer/iron-icon/iron-icon.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@polymer/iron-icons/editor-icons.js\";\nimport \"@polymer/iron-icons/device-icons.js\";\nimport \"@polymer/iron-icons/hardware-icons.js\";\nimport \"@polymer/iron-icons/social-icons.js\";\nimport \"@polymer/iron-icons/av-icons.js\";\nimport \"@polymer/iron-icons/maps-icons.js\";\nimport \"@polymer/paper-listbox/paper-listbox.js\";\nimport \"@polymer/paper-menu-button/paper-menu-button.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"./hax-toolbar-item.js\";\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        box-sizing: border-box;\n      }\n      paper-menu-button {\n        color: rgba(0, 0, 0, 0.66);\n        margin: 0;\n        padding: 0;\n        text-transform: none;\n        background-color: #ffffff;\n        display: flex;\n        min-width: 24px;\n      }\n\n      paper-menu-button .label {\n        font-size: 12px;\n        margin-top: 4px;\n      }\n\n      paper-menu-button .button-inner {\n        padding-top: 8px;\n        text-align: center;\n      }\n\n      paper-icon-button {\n        color: rgba(0, 0, 0, 0.66);\n        margin: 0;\n        text-transform: none;\n        background-color: #ffffff;\n        min-width: 24px;\n        display: flex;\n        padding: 0;\n        border-radius: 0;\n      }\n\n      paper-icon-button ::shadow iron-icon {\n        padding: 8px;\n        margin: 0;\n        box-sizing: border-box;\n      }\n\n      paper-icon-button:hover {\n        background-color: var(--paper-grey-300, grey);\n      }\n\n      .flip-icon {\n        transform: rotateY(180deg);\n      }\n\n      paper-tooltip {\n        pointer-events: none;\n      }\n      paper-listbox {\n        padding: 0;\n      }\n    </style>\n    <paper-menu-button>\n      <hax-toolbar-item corner=\"[[corner]]\" id=\"button\" slot=\"dropdown-trigger\" icon=\"[[icon]]\" hidden\\$=\"[[!icon]]\" class\\$=\"[[iconClass]]\" tooltip=\"[[tooltip]]\"></hax-toolbar-item>\n      <paper-listbox id=\"listbox\" slot=\"dropdown-content\" selected=\"{{selected}}\">\n        <slot></slot>\n      </paper-listbox>\n    </paper-menu-button>\n`,\n\n  is: \"hax-toolbar-menu\",\n\n  listeners: {\n    tap: \"_menubuttonTap\"\n  },\n\n  properties: {\n    /**\n     * corner\n     */\n    corner: {\n      type: String,\n      reflectToAttribute: true,\n      value: \"\"\n    },\n    /**\n     * Should we reset the selection after it is made\n     */\n    resetOnSelect: {\n      type: Boolean,\n      value: false\n    },\n    tooltip: {\n      type: String,\n      value: \"\"\n    },\n    tooltipDirection: {\n      type: String,\n      value: \"\"\n    },\n    selected: {\n      type: String,\n      value: \"\",\n      notify: true,\n      observer: \"_selectChanged\"\n    }\n  },\n\n  /**\n   * Select changed to trip button.\n   */\n  _selectChanged: function(e) {\n    this.$.button.focus();\n  },\n\n  /**\n   * Ensure menu is visible / default'ed.\n   */\n  _menubuttonTap: function(e) {\n    this.$.listbox.style.display = \"inherit\";\n    if (this.resetOnSelect) {\n      this.selected = \"\";\n    }\n  },\n\n  /**\n   * Ensure menu is hidden.\n   */\n  hideMenu: function() {\n    this.$.listbox.style.display = \"none\";\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\nimport \"@polymer/paper-tooltip/paper-tooltip.js\";\nimport \"@polymer/paper-item/paper-item.js\";\nimport \"@polymer/neon-animation/neon-animation.js\";\nimport \"./hax-toolbar-menu.js\";\n/**\n`hax-context-item-menu`\nAn icon / button that has support for multiple options via drop down.\n\n@demo demo/index.html\n\n@microcopy - the mental model for this element\n - panel - the flyout from left or right side that has elements that can be placed\n - button - an item that expresses what interaction you will have with the content.\n\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-flex;\n        height: 32px;\n        box-sizing: border-box;\n      }\n      :host hax-toolbar-menu ::slotted(*):hover {\n        background-color: #cccccc;\n      };\n      :host hax-toolbar-menu ::slotted(*) {\n        height: 32px;\n      };\n    </style>\n    <hax-toolbar-menu corner=\"[[corner]]\" id=\"menu\" icon=\"[[icon]]\" tooltip=\"[[label]]\" tooltip-direction=\"[[direction]]\" selected=\"{{selectedValue}}\" reset-on-select=\"[[resetOnSelect]]\">\n      <slot></slot>\n    </hax-toolbar-menu>\n`,\n\n  is: \"hax-context-item-menu\",\n\n  properties: {\n    /**\n     * corner\n     */\n    corner: {\n      type: String,\n      value: \"\"\n    },\n    /**\n     * Internal flag to allow blocking the event firing if machine selects tag.\n     */\n    _blockEvent: {\n      type: Boolean,\n      value: false\n    },\n    /**\n     * Should we reset the selection after it is made\n     */\n    resetOnSelect: {\n      type: Boolean,\n      value: false\n    },\n    /**\n     * Value.\n     */\n    selectedValue: {\n      type: Number,\n      reflectToAttribute: true,\n      notify: true,\n      value: 0,\n      observer: \"_selectedUpdated\"\n    },\n    /**\n     * Direction for the tooltip\n     */\n    direction: {\n      type: String,\n      value: \"top\"\n    },\n    /**\n     * Icon for the button.\n     */\n    icon: {\n      type: String,\n      value: \"editor:text-fields\",\n      reflectToAttribute: true\n    },\n    /**\n     * Icon for the button.\n     */\n    iconClass: {\n      type: String,\n      value: \"black-text\",\n      reflectToAttribute: true\n    },\n    /**\n     * Label for the button.\n     */\n    label: {\n      type: String,\n      value: \"editor:text-fields\",\n      reflectToAttribute: true\n    },\n    /**\n     * Name of the event to bubble up as being tapped.\n     * This can be used to tell other elements what was\n     * clicked so it can take action appropriately.\n     */\n    eventName: {\n      type: String,\n      value: \"button\",\n      reflectToAttribute: true\n    }\n  },\n\n  /**\n   * Notice the selected value has changed.\n   */\n  _selectedUpdated: function(newValue, oldValue) {\n    if (\n      typeof newValue !== typeof null &&\n      typeof oldValue !== typeof undefined &&\n      typeof oldValue !== typeof null\n    ) {\n      let children = dom(this).getDistributedNodes();\n      var item = new Object();\n      var j = 0;\n      // check for tag match since we have to filter out text nodes\n      for (var i = 0, len = children.length; i < len; i++) {\n        if (children[i].tagName === \"PAPER-ITEM\") {\n          if (j === newValue) {\n            item = children[i];\n            len = i;\n            continue;\n          }\n          j++;\n        }\n      }\n      // ensure we have a value; if so, this becomes the event to look for\n      // also use our flag to ensure machine setting the tag default doesn't\n      // equate to firing off a selected event.\n      if (\n        !this._blockEvent &&\n        typeof item.attributes !== typeof undefined &&\n        typeof item.attributes.value !== typeof undefined &&\n        typeof item.attributes.value.value !== typeof undefined\n      ) {\n        // weird but this makes the menu close when we fire up an event\n        // that indicates something higher should do something. This\n        // avoids an annoying UX error where the menu stays open for\n        // no reason.\n        this.$.menu.hideMenu();\n        this.fire(\"hax-context-item-selected\", {\n          target: item,\n          eventName: item.attributes.value.value\n        });\n      }\n      // we only block 1 time if it's available\n      if (this._blockEvent) {\n        this._blockEvent = false;\n      }\n    }\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/paper-button/paper-button.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"@polymer/paper-tooltip/paper-tooltip.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@polymer/iron-icons/editor-icons.js\";\nimport \"@polymer/iron-icons/device-icons.js\";\nimport \"@polymer/iron-icons/hardware-icons.js\";\nimport \"@polymer/iron-icons/social-icons.js\";\nimport \"@polymer/iron-icons/av-icons.js\";\nimport \"@polymer/iron-icons/image-icons.js\";\nimport \"@polymer/iron-icons/maps-icons.js\";\nimport \"@polymer/neon-animation/neon-animation.js\";\nimport \"./hax-toolbar-item.js\";\n/**\n`hax-context-item`\nA single button in the hax context menu for consistency.\n\n@demo demo/index.html\n\n@microcopy - the mental model for this element\n - context - menu in the page the user can select an item from, this being 1 option in that list\n - button - an item that expresses what interaction you will have with the content.\n\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-flex;\n      }\n      :host([menu]) {\n        display: flex;\n        width: 100%;\n      }\n    </style>\n    <hax-toolbar-item disabled=\"[[disabled]]\" light=\"[[light]]\" mini=\"[[mini]]\" id=\"button\" icon=\"[[icon]]\" hidden\\$=\"[[!icon]]\" icon-class=\"[[iconClass]]\" on-tap=\"_fireEvent\" tooltip=\"[[label]]\" tooltip-direction=\"[[direction]]\" default=\"[[default]]\" menu=\"[[menu]]\">\n      <slot></slot>\n    </hax-toolbar-item>\n`,\n\n  is: \"hax-context-item\",\n\n  properties: {\n    /**\n     * Light theme for toolbar item.\n     */\n    light: {\n      type: Boolean,\n      value: false\n    },\n    /**\n     * disabled state\n     */\n    disabled: {\n      type: Boolean,\n      value: false,\n      reflectToAttribute: true\n    },\n    /**\n     * Mini theme for making things small and round.\n     */\n    mini: {\n      type: Boolean,\n      value: false\n    },\n    /**\n     * Style to be presented in a menu\n     */\n    menu: {\n      type: Boolean,\n      value: false\n    },\n    /**\n     * Direction for the tooltip\n     */\n    direction: {\n      type: String,\n      value: \"top\"\n    },\n    /**\n     * Icon for the button.\n     */\n    icon: {\n      type: String,\n      value: \"editor:text-fields\",\n      reflectToAttribute: true\n    },\n    /**\n     * Icon for the button.\n     */\n    iconClass: {\n      type: String,\n      value: \"\",\n      reflectToAttribute: true\n    },\n    /**\n     * Label for the button.\n     */\n    label: {\n      type: String,\n      value: \"\",\n      reflectToAttribute: true\n    },\n    /**\n     * Name of the event to bubble up as being tapped.\n     * This can be used to tell other elements what was\n     * clicked so it can take action appropriately.\n     */\n    eventName: {\n      type: String,\n      value: \"button\",\n      reflectToAttribute: true\n    },\n    /**\n     * Method of input to display when activated. This is\n     * only used when triggered as part of haxProperties\n     */\n    inputMethod: {\n      type: String,\n      value: null,\n      reflectToAttribute: true\n    },\n    /**\n     * Optional slot to bind this value to.\n     */\n    propertyToBind: {\n      type: String,\n      value: null,\n      reflectToAttribute: true\n    },\n    /**\n     * Optional slot to bind this value to.\n     */\n    slotToBind: {\n      type: String,\n      value: null,\n      reflectToAttribute: true\n    },\n    /**\n     * Optional description for this item.\n     */\n    description: {\n      type: String,\n      reflectToAttribute: true\n    },\n    /**\n     * Is this button concidered a primary interaction\n     */\n    default: {\n      type: Boolean,\n      value: false\n    },\n    /**\n     * an optional value to send along in the press. Allows for\n     * reusing events more easily\n     */\n    value: {\n      type: String,\n      value: \"\"\n    }\n  },\n\n  /**\n   * Fire an event that includes the eventName of what was just pressed.\n   */\n  _fireEvent: function(e) {\n    this.fire(\"hax-context-item-selected\", {\n      target: this,\n      eventName: this.eventName,\n      value: this.value\n    });\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/iron-a11y-keys/iron-a11y-keys.js\";\nimport \"@polymer/paper-button/paper-button.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"@polymer/paper-tooltip/paper-tooltip.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@polymer/iron-icons/editor-icons.js\";\nimport \"@polymer/iron-icons/device-icons.js\";\nimport \"@polymer/iron-icons/hardware-icons.js\";\nimport \"@polymer/iron-icons/social-icons.js\";\nimport \"@polymer/iron-icons/av-icons.js\";\nimport \"@polymer/iron-icons/image-icons.js\";\nimport \"@polymer/iron-icons/maps-icons.js\";\nimport \"@lrnwebcomponents/materializecss-styles/lib/colors.js\";\nimport \"@polymer/neon-animation/neon-animation.js\";\nimport \"./hax-toolbar-item.js\";\n/**\n`hax-context-item-textop`\nA single button in the hax context menus for consistency. This one uses the mousedown event becasue tap won't work in safari / firefox / IE while maintaining focus inside the contenteditable area (stupid, I know)\n\n@demo demo/index.html\n\n@microcopy - the mental model for this element\n - context - menu in the page the user can select an item from, this being 1 option in that list\n - button - an item that expresses what interaction you will have with the content.\n\n*/\nPolymer({\n  _template: html`\n    <style include=\"materializecss-styles-colors\">\n      :host {\n        display: inline-flex;\n        box-sizing: border-box;\n      }\n      :host([menu]) {\n        display: flex;\n        width: 100%;\n      }\n    </style>\n    <iron-a11y-keys id=\"a11y\" target=\"[[target]]\" keys=\"enter\" on-keys-pressed=\"_fireEvent\"></iron-a11y-keys>\n    <hax-toolbar-item corner=\"[[corner]]\" id=\"button\" icon=\"[[icon]]\" hidden\\$=\"[[!icon]]\" tooltip-direction=\"[[direction]]\" tooltip=\"[[label]]\" class\\$=\"[[iconClass]]\" on-mousedown=\"_fireEvent\" icon-class=\"[[iconClass]]\" mini=\"[[mini]]\" menu=\"[[menu]]\" light=\"[[light]]\">\n      <slot></slot>\n    </hax-toolbar-item>\n`,\n\n  is: \"hax-context-item-textop\",\n\n  properties: {\n    /**\n     * corner\n     */\n    corner: {\n      type: String,\n      value: \"\"\n    },\n    /**\n     * target for the iron-a11y-keys element.\n     */\n    target: {\n      type: Object\n    },\n    /**\n     * Light theme for toolbar item.\n     */\n    light: {\n      type: Boolean,\n      value: false\n    },\n    /**\n     * Mini theme for making things small and round.\n     */\n    mini: {\n      type: Boolean,\n      value: false\n    },\n    /**\n     * Style to be presented in a menu\n     */\n    menu: {\n      type: Boolean,\n      value: false\n    },\n    /**\n     * Direction for the tooltip\n     */\n    direction: {\n      type: String,\n      value: \"top\"\n    },\n    /**\n     * Icon for the button.\n     */\n    icon: {\n      type: String,\n      value: \"editor:text-fields\",\n      reflectToAttribute: true\n    },\n    /**\n     * Icon for the button.\n     */\n    iconClass: {\n      type: String,\n      value: \"\",\n      reflectToAttribute: true\n    },\n    /**\n     * Label for the button.\n     */\n    label: {\n      type: String,\n      value: \"editor:text-fields\",\n      reflectToAttribute: true\n    },\n    /**\n     * Name of the event to bubble up as being tapped.\n     * This can be used to tell other elements what was\n     * clicked so it can take action appropriately.\n     */\n    eventName: {\n      type: String,\n      value: \"button\",\n      reflectToAttribute: true\n    },\n    /**\n     * Method of input to display when activated. This is\n     * only used when triggered as part of haxProperties\n     */\n    inputMethod: {\n      type: String,\n      value: null,\n      reflectToAttribute: true\n    },\n    /**\n     * Optional slot to bind this value to.\n     */\n    propertyToBind: {\n      type: String,\n      value: null,\n      reflectToAttribute: true\n    },\n    /**\n     * Optional slot to bind this value to.\n     */\n    slotToBind: {\n      type: String,\n      value: null,\n      reflectToAttribute: true\n    },\n    /**\n     * Optional description for this item.\n     */\n    description: {\n      type: String,\n      reflectToAttribute: true\n    }\n  },\n\n  /**\n   * Ready.\n   */\n  ready: function() {\n    // bind keyboard to button press\n    this.target = this.$.button;\n  },\n\n  /**\n   * Fire an event that includes the eventName of what was just pressed.\n   */\n  _fireEvent: function(e) {\n    this.fire(\"hax-context-item-selected\", {\n      target: this,\n      eventName: this.eventName\n    });\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/paper-slider/paper-slider.js\";\nimport \"@polymer/paper-tooltip/paper-tooltip.js\";\nimport \"@polymer/paper-item/paper-item.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@polymer/iron-icons/editor-icons.js\";\nimport \"@lrnwebcomponents/materializecss-styles/lib/colors.js\";\nimport \"@lrnwebcomponents/simple-colors/simple-colors.js\";\nimport \"./hax-toolbar-item.js\";\nimport \"./hax-toolbar-menu.js\";\nimport \"./hax-context-item.js\";\nimport \"./hax-context-item-menu.js\";\nPolymer({\n  _template: html`\n    <style is=\"custom-style\" include=\"materializecss-styles-colors\">\n      :host {\n        display: flex;\n        font-family: \"Roboto\", sans-serif;\n        justify-content: flex-start;\n        opacity: .4;\n        visibility: visible;\n        transition: .6s all ease;\n        box-sizing: border-box;\n        height: 32px;\n        pointer-events: all;\n      }\n      :host ::slotted(*) {\n        font-family: \"Roboto\", sans-serif;\n        pointer-events: all;\n      }\n      :host(:hover),\n      :host([selected]) {\n        opacity: 1;\n      }\n      .close-cap {\n        margin: 8px;\n        padding: 0;\n      }\n      paper-item {\n        height: 32px;\n        min-height: 32px;\n        padding: 0 8px;\n        width: 100px;\n      }\n      paper-item:hover {\n        background-color: #d3d3d3;\n        cursor: pointer;\n      }\n      paper-slider {\n        background-color: #3e3e3e;\n        color: #000000;\n        height: 32px;\n        min-width: 100px;\n        --paper-slider-font-color: #000000;\n        --paper-slider-active-color: var(--simple-colors-light-green-background1);\n        --paper-slider-knob-color: var(--simple-colors-light-green-background1);\n        --paper-slider-pin-color: var(--simple-colors-light-green-background1);\n      }\n      .convert-button {\n        border-top: 1px solid #d3d3d3;\n      }\n    </style>\n    <hax-context-item hidden$=\"[[inline]]\" mini=\"\" light=\"\" icon=\"close\" label=\"Close\" event-name=\"close-menu\" class=\"close-cap\" direction=\"left\"></hax-context-item>\n    <hax-context-item-menu hidden$=\"[[!haxProperties.canPosition]]\" selected-value=\"{{justifyValue}}\" id=\"justify\" icon=\"[[justifyIcon]]\" label=\"Alignment\">\n      <hax-context-item menu icon=\"editor:format-align-left\" event-name=\"hax-align-left\">Left</hax-context-item>\n      <hax-context-item menu icon=\"editor:format-align-center\" event-name=\"hax-align-center\">Center</hax-context-item>\n      <hax-context-item menu icon=\"editor:format-align-right\" event-name=\"hax-align-right\">Right</hax-context-item>\n    </hax-context-item-menu>\n    <paper-slider hidden$=\"[[!haxProperties.canScale]]\" id=\"slider\" pin=\"\" min=\"25\" step=\"25\" max=\"100\" value=\"{{size}}\"></paper-slider>\n    <paper-tooltip hidden$=\"[[inline]]\" for=\"slider\" position=\"top\" offset=\"10\">\n      Resize\n    </paper-tooltip>\n    <slot name=\"primary\"></slot>\n    <hax-context-item hidden$=\"[[inline]]\" icon=\"delete\" icon-class=\"red-text text-darken-1\" label=\"Remove\" event-name=\"grid-plate-delete\"></hax-context-item>\n    <hax-context-item-menu corner=\"right\" hidden$=\"[[hideMore]]\" icon=\"more-vert\" label=\"More\" id=\"moremenu\" event-name=\"grid-plate-op\" reset-on-select=\"\">\n      <paper-item value=\"\" hidden></paper-item>\n      <slot name=\"more\"></slot>\n      <hax-context-item menu icon=\"icons:content-copy\" icon-class=\"green-text\" event-name=\"grid-plate-duplicate\">Duplicate</hax-context-item>\n      <hax-context-item hidden$=\"[[hideTransform]]\" menu icon=\"image:transform\" class=\"convert-button\" icon-class=\"orange-text\" event-name=\"grid-plate-convert\">Transform to..</hax-context-item>\n    </hax-context-item-menu>\n`,\n\n  is: \"hax-toolbar\",\n\n  listeners: {\n    \"hax-context-item-selected\": \"_haxContextOperation\"\n  },\n\n  behaviors: [simpleColorsBehaviors],\n\n  properties: {\n    /**\n     * Hide the transform button as its not supported\n     */\n    hideTransform: {\n      type: Boolean,\n      value: false\n    },\n    /**\n     * See what's selected\n     */\n    selected: {\n      type: Boolean,\n      value: false,\n      reflectToAttritue: true\n    },\n    /**\n     * Selected value to match ce direction currently.\n     */\n    haxProperties: {\n      type: Object,\n      value: {},\n      observer: \"_haxPropertiesChanged\"\n    },\n    /**\n     * Hide the more menu.\n     */\n    hideMore: {\n      type: Boolean,\n      value: false\n    },\n    /**\n     * size of the slider if it exists.\n     */\n    size: {\n      type: Number,\n      value: 100,\n      notify: true\n    },\n    /**\n     * Justify icon to reflect state.\n     */\n    justifyIcon: {\n      type: String,\n      value: \"editor:format-align-left\"\n    },\n    /**\n     * This is an inline context menu\n     */\n    inline: {\n      type: Boolean,\n      value: false,\n      reflectToAttritue: true\n    },\n    /**\n     * Selected value to match ce direction currently.\n     */\n    justifyValue: {\n      type: String,\n      value: \"\",\n      notify: true\n    }\n  },\n\n  /**\n   * If hax properties changes, let's see what the initial state\n   * of the buttons should be.\n   */\n  _haxPropertiesChanged: function(newValue, oldValue) {\n    // value doesn't matter, just look at what's active\n    if (typeof window.HaxStore.instance.activeNode !== typeof undefined) {\n      if (window.HaxStore.instance.activeNode.style.width != \"\") {\n        this.size = window.HaxStore.instance.activeNode.style.width.replace(\n          \"%\",\n          \"\"\n        );\n      } else {\n        this.size = 100;\n      }\n\n      if (window.HaxStore.instance.activeNode.style.float == \"right\") {\n        this.justifyValue = \"hax-align-right\";\n        this.justifyIcon = \"editor:format-align-right\";\n      } else if (\n        window.HaxStore.instance.activeNode.style.margin == \"0px auto\" &&\n        window.HaxStore.instance.activeNode.style.display == \"block\"\n      ) {\n        this.justifyValue = \"hax-align-center\";\n        this.justifyIcon = \"editor:format-align-center\";\n      } else {\n        this.justifyValue = \"hax-align-left\";\n        this.justifyIcon = \"editor:format-align-left\";\n      }\n    }\n  },\n\n  /**\n   * Respond to simple modifications.\n   */\n  _haxContextOperation: function(e) {\n    let detail = e.detail;\n    // support a simple insert event to bubble up or everything else\n    switch (detail.eventName) {\n      case \"hax-align-left\":\n      case \"hax-align-center\":\n      case \"hax-align-right\":\n        this.justifyIcon = detail.target.icon;\n        break;\n      case \"close-menu\":\n        this.$.moremenu.$.menu.hideMenu();\n        this.$.justify.$.menu.hideMenu();\n        break;\n    }\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar.js\";\nimport \"@polymer/paper-item/paper-item.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@lrnwebcomponents/materializecss-styles/lib/colors.js\";\nimport \"@lrnwebcomponents/md-extra-icons/md-extra-icons.js\";\nimport \"./hax-context-item-menu.js\";\nimport \"./hax-context-item.js\";\nimport \"./hax-context-item-textop.js\";\nimport \"./hax-toolbar.js\";\n/**\n`hax-text-context`\nA context menu that provides common text based authoring options.\n\n@demo demo/index.html\n\n@microcopy - the mental model for this element\n - context menu - this is a menu of text based buttons and events for use in a larger solution.\n*/\nPolymer({\n  _template: html`\n    <style include=\"materializecss-styles-colors\">\n      :host {\n        display: block;\n        pointer-events: none;\n        background-color: white;\n      }\n      paper-item {\n        -webkit-justify-content: flex-start;\n        justify-content: flex-start;\n        height: 32px;\n        padding: 0 8px;\n        min-height: 32px;\n      }\n      paper-item:hover {\n        background-color: #d3d3d3;\n        cursor: pointer;\n      }\n      iron-icon {\n        padding: 8px;\n      }\n      paper-item strong {\n        padding: 8px;\n        font-size: 12px;\n      }\n      :host(.hax-context-pin-top) hax-toolbar {\n        position: fixed;\n        top: 64px;\n        opacity: .95;\n      }\n      :host(.hax-context-pin-bottom) hax-toolbar {\n        position: fixed;\n        bottom: 0;\n        opacity: .95;\n      }\n    </style>\n    <hax-toolbar selected=\"[[selection]]\" hide-transform=\"\">\n      <hax-context-item-menu corner=\"left\" slot=\"primary\" selected-value=\"{{selectedValue}}\" id=\"formatsize\" icon=\"text-format\" label=\"Format\" event-name=\"text-tag\">\n        <paper-item value=\"p\"><iron-icon icon=\"editor:format-textdirection-l-to-r\"></iron-icon>Normal text <strong>&lt;P&gt;</strong></paper-item>\n        <paper-item value=\"h2\"><iron-icon icon=\"editor:title\"></iron-icon>Title <strong>&lt;H2&gt;</strong></paper-item>\n        <paper-item value=\"h3\"><iron-icon icon=\"editor:title\"></iron-icon>Content heading <strong>&lt;H3&gt;</strong></paper-item>\n        <paper-item value=\"h4\"><iron-icon icon=\"editor:text-fields\"></iron-icon>Subheading <strong>&lt;H4&gt;</strong></paper-item>\n        <paper-item value=\"h5\"><iron-icon icon=\"editor:text-fields\"></iron-icon>Deeper subheading <strong>&lt;H5&gt;</strong></paper-item>\n        <paper-item value=\"blockquote\"><iron-icon icon=\"editor:format-quote\"></iron-icon>Quote<strong>&lt;blockquote&gt;</strong></paper-item>\n        <paper-item value=\"code\"><iron-icon icon=\"icons:code\"></iron-icon>Code block<strong>&lt;code&gt;</strong></paper-item>\n      </hax-context-item-menu>\n      <hax-context-item-textop slot=\"primary\" icon=\"editor:format-bold\" label=\"Bold\" event-name=\"text-bold\"></hax-context-item-textop>\n      <hax-context-item-textop slot=\"primary\" icon=\"editor:format-italic\" label=\"Italic\" event-name=\"text-italic\"></hax-context-item-textop>\n      <hax-context-item-textop slot=\"primary\" icon=\"editor:insert-link\" label=\"Link\" event-name=\"text-link\"></hax-context-item-textop>\n      <hax-context-item-menu slot=\"primary\" selected-value=\"{{justifyValue}}\" id=\"justify\" icon=\"[[justifyIcon]]\" label=\"Alignment\">\n        <paper-item value=\"\" hidden=\"\"></paper-item>\n        <paper-item value=\"text-align-left\">\n          <iron-icon icon=\"editor:format-align-left\"></iron-icon>\n        </paper-item>\n        <paper-item value=\"text-align-right\">\n          <iron-icon icon=\"editor:format-align-right\"></iron-icon>\n        </paper-item>\n      </hax-context-item-menu>\n      <hax-context-item-textop slot=\"primary\" icon=\"editor:format-list-numbered\" label=\"Numbered list\" event-name=\"text-list-numbered\" hidden\\$=\"[[!polyfillSafe]]\"></hax-context-item-textop>\n      <hax-context-item-textop slot=\"primary\" icon=\"editor:format-list-bulleted\" label=\"Bulleted list\" event-name=\"text-list-bulleted\" hidden\\$=\"[[!polyfillSafe]]\"></hax-context-item-textop>\n      <hax-context-item-textop slot=\"primary\" icon=\"editor:format-indent-increase\" label=\"Indent\" event-name=\"text-indent\" hidden\\$=\"[[!polyfillSafe]]\"></hax-context-item-textop>\n      <hax-context-item-textop slot=\"primary\" icon=\"editor:format-indent-decrease\" label=\"Outdent\" event-name=\"text-outdent\" hidden\\$=\"[[!polyfillSafe]]\"></hax-context-item-textop>\n      <hax-context-item-textop slot=\"primary\" icon=\"editor:format-clear\" label=\"Remove format\" event-name=\"text-remove-format\"></hax-context-item-textop>\n      <hax-context-item slot=\"primary\" icon=\"device:graphic-eq\" label=\"Advanced item\" event-name=\"insert-inline-gizmo\"></hax-context-item>\n      <hax-context-item-textop menu=\"\" slot=\"more\" icon=\"mdextra:unlink\" event-name=\"text-unlink\">Remove link</hax-context-item-textop>\n      <hax-context-item-textop menu=\"\" slot=\"more\" icon=\"mdextra:subscript\" event-name=\"text-subscript\">Subscript</hax-context-item-textop>\n      <hax-context-item-textop menu=\"\" slot=\"more\" icon=\"mdextra:superscript\" event-name=\"text-superscript\">Superscript</hax-context-item-textop>\n      <hax-context-item-textop menu=\"\" slot=\"more\" icon=\"editor:format-strikethrough\" event-name=\"text-strikethrough\">Cross out</hax-context-item-textop>\n    </hax-toolbar>\n`,\n\n  is: \"hax-text-context\",\n\n  listeners: {\n    \"hax-context-item-selected\": \"_haxContextOperation\"\n  },\n\n  properties: {\n    /**\n     * Justify icon to reflect state.\n     */\n    justifyIcon: {\n      type: String,\n      value: \"editor:format-align-left\"\n    },\n    /**\n     * Polyfill safe; this helps remove options from polyfilled platforms\n     * as far as text manipulation operations.\n     */\n    polyfillSafe: {\n      type: Boolean\n    },\n    /**\n     * Selected value to match format of the tag currently.\n     */\n    selectedValue: {\n      type: String,\n      value: \"p\",\n      notify: true\n    },\n    /**\n     * Selected value to match text direction currently.\n     */\n    justifyValue: {\n      type: String,\n      value: \"text-align-left\",\n      notify: true\n    },\n    /**\n     * Selection tracking\n     */\n    selection: {\n      type: Boolean,\n      value: false\n    }\n  },\n\n  /**\n   * Ready, figure out polyfill\n   */\n  ready: function() {\n    this.polyfillSafe = window.HaxStore.instance.computePolyfillSafe();\n  },\n\n  /**\n   * Respond to simple modifications.\n   */\n  _haxContextOperation: function(e) {\n    let detail = e.detail;\n    let selection = window.getSelection();\n    // support a simple insert event to bubble up or everything else\n    switch (detail.eventName) {\n      // wow these are way too easy\n      case \"text-align-left\":\n        this.justifyIcon = detail.target.children[0].attributes[0].value;\n        break;\n      case \"text-align-center\":\n        this.justifyIcon = detail.target.children[0].attributes[0].value;\n        break;\n      case \"text-align-right\":\n        this.justifyIcon = detail.target.children[0].attributes[0].value;\n        break;\n      case \"text-justify-full\":\n        this.justifyIcon = detail.target.children[0].attributes[0].value;\n        break;\n      case \"close-menu\":\n        this.$.justify.$.menu.hideMenu();\n        this.$.formatsize.$.menu.hideMenu();\n        break;\n      case \"insert-inline-gizmo\":\n        if (window.HaxStore.instance.activePlaceHolder != null) {\n          // store placeholder because if this all goes through we'll want\n          // to kill the originating text\n          let values = {\n            text: window.HaxStore.instance.activePlaceHolder.toString()\n          };\n          let type = \"inline\";\n          let haxElements = window.HaxStore.guessGizmo(type, values);\n          // see if we got anything\n          if (haxElements.length > 0) {\n            // hand off to hax-app-picker to deal with the rest of this\n            window.HaxStore.instance.haxAppPicker.presentOptions(\n              haxElements,\n              type,\n              \"Transform selected text to..\",\n              \"gizmo\"\n            );\n          }\n        }\n        break;\n      // wow these are way too easy\n      case \"text-bold\":\n        document.execCommand(\"bold\");\n        break;\n      case \"text-italic\":\n        document.execCommand(\"italic\");\n        break;\n      case \"text-underline\":\n        document.execCommand(\"underline\");\n        // silly hack to account for trigging a selection from\n        // inside the menu that isn't from a paper-item\n        this.$.toolbar.$.moremenu.$.menu.hideMenu();\n        break;\n      case \"text-subscript\":\n        document.execCommand(\"subscript\");\n        // silly hack to account for trigging a selection from\n        // inside the menu that isn't from a paper-item\n        this.$.toolbar.$.moremenu.$.menu.hideMenu();\n        break;\n      case \"text-superscript\":\n        document.execCommand(\"superscript\");\n        // silly hack to account for trigging a selection from\n        // inside the menu that isn't from a paper-item\n        this.$.toolbar.$.moremenu.$.menu.hideMenu();\n        break;\n      case \"text-remove-format\":\n        document.execCommand(\"removeFormat\");\n        break;\n      case \"text-strikethrough\":\n        document.execCommand(\"strikeThrough\");\n        // silly hack to account for trigging a selection from\n        // inside the menu that isn't from a paper-item\n        this.$.toolbar.$.moremenu.$.menu.hideMenu();\n        break;\n      case \"text-link\":\n        var href = \"\";\n        if (typeof selection.focusNode.parentNode.href !== typeof undefined) {\n          href = selection.focusNode.parentNode.href;\n        }\n        // @todo put in a dialog instead of this\n        let url = prompt(\"Enter a URL:\", href);\n        if (url) {\n          document.execCommand(\"createLink\", false, url);\n        }\n        break;\n      case \"text-unlink\":\n        document.execCommand(\"unlink\");\n        break;\n      /**\n       * Our bad actors when it comes to polyfill'ed shadowDOM.\n       * Naughty, naughty shadyDOM. Fortunately this is only IE11/Edge\n       */\n      case \"text-indent\":\n        document.execCommand(\"indent\");\n        break;\n      case \"text-outdent\":\n        document.execCommand(\"outdent\");\n        break;\n      case \"text-list-numbered\":\n        document.execCommand(\"insertOrderedList\");\n        break;\n      case \"text-list-bulleted\":\n        document.execCommand(\"insertUnorderedList\");\n        break;\n    }\n  },\n\n  /**\n   * Test for safari, if it is don't place things in the menu\n   */\n  isSafari: function(typevalue) {\n    let ua = navigator.userAgent.toLowerCase();\n    // test to find safari to account for it's handling\n    // of what's been selected. This isn't great UX but\n    // there's literally nothing we can do for Safari\n    // because of https://github.com/LRNWebComponents/hax-body/issues/38\n    if (ua.indexOf(\"safari\") != -1) {\n      if (ua.indexOf(\"chrome\") > -1) {\n      } else {\n        return true;\n      }\n    }\n    return false;\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar.js\";\nimport \"@polymer/paper-input/paper-textarea.js\";\nimport \"@polymer/paper-input/paper-input.js\";\nimport \"@polymer/paper-checkbox/paper-checkbox.js\";\nimport \"@lrnwebcomponents/simple-colors/lib/simple-colors-picker.js\";\nimport \"./hax-context-item-menu.js\";\nimport \"./hax-context-item.js\";\nimport \"./hax-toolbar.js\";\n/**\n`hax-ce-context`\nA context menu that provides common custom-element based authoring options. While\ntrying to call for haxProperties which can automatically generate the buttons\nrequired for populating input.\n\n@demo demo/index.html\n\n@microcopy - the mental model for this element\n - context menu - this is a menu of custom-element based buttons and events for use in a larger solution.\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        height: 32px;\n        background-color: white;\n      }\n      hax-context-item {\n        margin: 0;\n        height: 32px;\n      }\n      .human-name {\n        font-size: 16px;\n        border-top-left-radius: 25%;\n        border-top-right-radius: 25%;\n        line-height: 16px;\n        font-family: sans-serif;\n        width: -webkit-fit-content;\n        width: -moz-max-content;\n        width: fit-content;\n        background-color: white;\n      }\n      .human-name-inner {\n        font-size: 16px;\n        border-top-left-radius: 25%;\n        border-top-right-radius: 25%;\n        margin: -32px 0px 0 34px;\n        line-height: 16px;\n        padding: 8px 16px 8px 8px;\n        font-family: sans-serif;\n        width: -webkit-fit-content;\n        width: -moz-max-content;\n        width: fit-content;\n        background-color: black;\n        color: white;\n        opacity: .4;\n        transition: .6s all ease;\n      }\n      :host(:hover) .human-name-inner {\n        opacity: 1;\n      }\n      :host(.hax-context-pin-top) hax-toolbar {\n        position: fixed;\n        top: 64px;\n        opacity: .95;\n      }\n      :host(.hax-context-pin-bottom) hax-toolbar {\n        position: fixed;\n        bottom: 0;\n        opacity: .95;\n      }\n    </style>\n    <div class=\"human-name\">\n      <div class=\"human-name-inner\">[[humanName]]</div>\n    </div>\n    <hax-toolbar hax-properties=\"[[haxProperties]]\" size=\"{{ceSize}}\">\n      <slot slot=\"primary\"></slot>\n      <hax-context-item slot=\"primary\" icon=\"icons:settings\" label=\"Settings\" event-name=\"hax-manager-configure\" hidden$=\"[[!__hasSettingsForm]]\"></hax-context-item>\n      <hax-context-item slot=\"primary\" icon=\"icons:view-quilt\" label=\"[[__parentName]]\" event-name=\"hax-manager-configure-container\" hidden$=\"[[!__hasParentSettingsForm]]\"></hax-context-item>\n    </hax-toolbar>\n`,\n\n  is: \"hax-ce-context\",\n\n  properties: {\n    /**\n     * ce size.\n     */\n    ceSize: {\n      type: Number,\n      value: 100,\n      observer: \"_ceSizeChanged\"\n    },\n    /**\n     * Selected value to match ce direction currently.\n     */\n    haxProperties: {\n      type: Object,\n      value: {},\n      observer: \"_haxPropertiesChanged\"\n    },\n    /**\n     * Active Name from the properties\n     */\n    humanName: {\n      type: String\n    }\n  },\n\n  /**\n   * Set haxProperties.\n   */\n  setHaxProperties: function(props) {\n    // be aggressive w/ reset\n    this.set(\"haxProperties\", {});\n    this.set(\"haxProperties\", props);\n  },\n\n  /**\n   * ce size changed.\n   */\n  _ceSizeChanged: function(newValue, oldValue) {\n    if (\n      typeof newValue !== typeof undefined &&\n      typeof oldValue !== typeof undefined\n    ) {\n      this.fire(\"hax-context-item-selected\", {\n        eventName: \"hax-size-change\",\n        value: newValue\n      });\n    }\n  },\n\n  /**\n   * HAX properties changed, update buttons available.\n   */\n  _haxPropertiesChanged: function(newValue, oldValue) {\n    if (\n      typeof oldValue !== typeof undefined &&\n      typeof newValue.settings !== typeof undefined\n    ) {\n      // clear current slot for the tag\n      let slot = dom(this);\n      while (slot.firstChild !== null) {\n        slot.removeChild(slot.firstChild);\n      }\n      let settings = newValue.settings.quick;\n      let configure = newValue.settings.configure;\n      let advanced = newValue.settings.advanced;\n      // support things that could technically have no configuration\n      // or advanced form but have quick settings\n      // This doesn't make a ton of sense but it is possible\n      if (\n        (configure.length || advanced.length) &&\n        newValue.element.tagName !== \"HR\"\n      ) {\n        this.__hasSettingsForm = true;\n      } else {\n        this.__hasSettingsForm = false;\n      }\n      this.__hasParentSettingsForm = false;\n      // test for parent being different from child\n      if (\n        window.HaxStore.instance.activeContainerNode !==\n        window.HaxStore.instance.activeNode\n      ) {\n        this.__hasParentSettingsForm = true;\n        switch (window.HaxStore.instance.activeContainerNode.tagName) {\n          case \"P\":\n          case \"UL\":\n          case \"OL\":\n          case \"DIV\":\n            this.__parentName = \"Text block settings\";\n            break;\n          case \"GRID-PLATE\":\n            this.__parentName = \"Layout settings\";\n            break;\n          default:\n            this.__parentName = window.HaxStore.instance.activeContainerNode.tagName\n              .replace(\"-\", \" \")\n              .toLowerCase();\n            +\" settings\";\n            break;\n        }\n      }\n      // generate a human name for this\n      if (typeof newValue.gizmo.title === typeof undefined) {\n        this.humanName = window.HaxStore.instance.activeNode.tagName\n          .replace(\"-\", \" \")\n          .toLowerCase();\n      } else {\n        this.humanName = newValue.gizmo.title;\n      }\n      var item;\n      // @todo kick stuff into the local dom as options\n      for (var i = 0; i < settings.length; i++) {\n        let setting = settings[i];\n        // create a new context item for the quick\n        item = document.createElement(\"hax-context-item\");\n        item.eventName = \"hax-edit-property\";\n        item.label = setting.title;\n        item.options = setting.options;\n        item.icon = setting.icon;\n        item.inputMethod = setting.inputMethod;\n        item.required = setting.required;\n        item.options = setting.options;\n        item.validation = setting.validation;\n        item.validationType = setting.validationType;\n        item.description = setting.description;\n        // property or slot if it doesn't exist\n        if (typeof setting.property !== typeof undefined) {\n          item.propertyToBind = setting.property;\n        } else if (typeof setting.attribute !== typeof undefined) {\n          item.propertyToBind = setting.attribute;\n        } else {\n          item.slotToBind = setting.slot;\n        }\n        slot.appendChild(item);\n      }\n    }\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/paper-item/paper-item.js\";\nimport \"./hax-context-item-menu.js\";\nimport \"./hax-context-item.js\";\n/**\n`hax-plate-context`\nA context menu that provides common grid plate based authoring options.\n\n@demo demo/index.html\n\n@microcopy - the mental model for this element\n - context menu - this is a menu of text based buttons and events for use in a larger solution.\n - grid plate - the container / full HTML tag which can have operations applied to it.\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        width: 32px;\n      }\n      :host(:hover) {\n        opacity: 1;\n      }\n      hax-context-item {\n        display: block;\n        margin: 6px 0;\n        width: 32px;\n      }\n      .area {\n        width: 32px;\n        float: left;\n        opacity: .5;\n        visibility: visible;\n        transition: .8s all ease;\n      }\n      .area:hover {\n        opacity: 1;\n      }\n    </style>\n    <div class=\"area\">\n      <hax-context-item light=\"\" mini=\"\" icon=\"arrow-upward\" label=\"Move up\" event-name=\"grid-plate-up\" direction=\"left\"></hax-context-item>\n      <hax-context-item light=\"\" mini=\"\" icon=\"arrow-downward\" label=\"Move down\" event-name=\"grid-plate-down\" direction=\"left\"></hax-context-item>\n    </div>\n`,\n\n  is: \"hax-plate-context\"\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar.js\";\nimport \"@polymer/paper-input/paper-textarea.js\";\nimport \"@polymer/paper-input/paper-input.js\";\nimport \"@polymer/paper-checkbox/paper-checkbox.js\";\nimport \"@lrnwebcomponents/simple-colors/lib/simple-colors-picker.js\";\nimport \"@polymer/paper-slider/paper-slider.js\";\nimport \"@polymer/paper-tooltip/paper-tooltip.js\";\nimport \"./hax-context-item-menu.js\";\nimport \"./hax-context-item.js\";\n/**\n`hax-input-mixer`\nA context menu that provides common custom-element based authoring options. While\ntrying to call for haxProperties which can automatically generate the buttons\nrequired for populating input.\n\n@demo demo/index.html\n\n@microcopy - the mental model for this element\n - context menu - this is a menu of custom-element based buttons and events for use in a larger solution.\n*/\nPolymer({\n  _template: html`\n    <custom-style>\n    <style is=\"custom-style\">\n      :host {\n        display: block;\n        color: #FFFFFF;\n      }\n      app-toolbar {\n        background-color: #3e3e3e;\n        color: white;\n        padding: 0 0 0 16px;\n      }\n      hax-context-item {\n        margin: 0;\n        width: 40px;\n        height: 40px;\n      }\n      #elementoptions {\n        height: inherit;\n      }\n      #input {\n        color: #FFFFFF;\n      }\n      paper-checkbox {\n        --paper-checkbox-label-color: #FFFFFF;\n      }\n      .input-mixer-label {\n        padding-left: 4px;\n      }\n      paper-textarea,\n      paper-input {\n        --paper-input-container-color: #BBBBFF;\n        --paper-input-container-focus-color: #FFFFFF;\n        --paper-input-container-invalid-color: #FFAAAA;\n        --paper-input-container-input-color: #FFFFFF;\n        --paper-input-container-shared-input-style: {\n          color: #FFFFFF;\n          background: transparent;\n          margin: 0;\n          padding: 0;\n          min-width: 320px;\n          line-height: 16px;\n          font-size: 16px;\n          margin-top: -8px;\n          margin-bottom: 8px;\n          outline: none;\n          border: none;\n        }\n      }\n      .input-method {\n        color: #FFFFFF;\n      }\n    </style>\n    </custom-style>\n    <app-toolbar>\n      <template is=\"dom-if\" if=\"[[__inputselect]]\">\n        <span class=\"input-mixer-label\">[[label]]</span>\n        <hax-context-item-menu selected=\"{{value}}\" icon=\"[[icon]]\" id=\"input\">\n          <slot></slot>\n        </hax-context-item-menu>\n      </template>\n      <span class=\"input-method\">\n      <template is=\"dom-if\" if=\"[[__inputtextarea]]\">\n        <paper-textarea id=\"input\" label=\"[[label]]\" value=\"{{value}}\" auto-validate=\"\" pattern=\"[[validation]]\" required=\"[[required]]\"></paper-textarea>\n      </template>\n      <template is=\"dom-if\" if=\"[[__inputtextfield]]\">\n        <paper-input id=\"input\" type=\"[[validationType]]\" label=\"[[label]]\" value=\"{{value}}\" auto-validate=\"\" pattern=\"[[validation]]\" required=\"[[required]]\"></paper-input>\n      </template>\n      <template is=\"dom-if\" if=\"[[__inputboolean]]\">\n        <paper-checkbox id=\"input\" checked=\"{{value}}\">[[label]]</paper-checkbox>\n      </template>\n      <template is=\"dom-if\" if=\"[[__inputflipboolean]]\">\n        <paper-checkbox id=\"input\" checked=\"{{value}}\">[[label]]</paper-checkbox>\n      </template>\n      <template is=\"dom-if\" if=\"[[__inputcolorpicker]]\">\n        <span>[[label]]</span>\n        <simple-colors-picker id=\"input\" value=\"{{value}}\"></simple-colors-picker>\n      </template>\n      </span>\n      <paper-tooltip for=\"input\" position=\"top\" offset=\"14\">\n        [[description]]\n      </paper-tooltip>\n      <hax-context-item id=\"updatebutton\" icon=\"subdirectory-arrow-right\" label\\$=\"Update [[label]]\" event-name=\"hax-update-tap\"></hax-context-item>\n    </app-toolbar>\n`,\n\n  is: \"hax-input-mixer\",\n\n  listeners: {\n    \"hax-context-item-selected\": \"_haxContextOperation\"\n  },\n\n  properties: {\n    /**\n     * value, where the magic happens.\n     */\n    value: {\n      type: String,\n      value: null\n    },\n    /**\n     * Label for the input\n     */\n    label: {\n      type: String,\n      reflectToAttribute: true\n    },\n    /**\n     * Optional regex Validation for input and textarea fields\n     */\n    validation: {\n      type: String,\n      reflectToAttribute: true\n    },\n    /**\n     * Optional input type validation; use on input field\n     */\n    validationType: {\n      type: String,\n      reflectToAttribute: true\n    },\n    /**\n     * Required; used on input and textarea fields\n     */\n    required: {\n      type: Boolean,\n      reflectToAttribute: true\n    },\n    /**\n     * Options for the input if it's a select of some form\n     */\n    options: {\n      type: Object,\n      value: {},\n      reflectToAttribute: true\n    },\n    /**\n     * Optional icon that represents the item mixing.\n     */\n    icon: {\n      type: String,\n      value: \"android\",\n      reflectToAttribute: true\n    },\n    /**\n     * longer description for the input\n     */\n    description: {\n      type: String,\n      reflectToAttribute: true\n    },\n    /**\n     * longer description for the input\n     */\n    inputMethod: {\n      type: String,\n      value: null,\n      reflectToAttribute: true,\n      observer: \"_inputMethodChanged\"\n    },\n    /**\n     * longer description for the input\n     */\n    propertyToBind: {\n      type: String,\n      reflectToAttribute: true\n    },\n    /**\n     * slot to bind input back to\n     */\n    slotToBind: {\n      type: String,\n      reflectToAttribute: true\n    }\n  },\n\n  /**\n   * Ensure our weird data binding for templates is set initially.\n   */\n  ready: function() {\n    // prime methods even though invisible most likely\n    this._resetInputMethods();\n  },\n\n  /**\n   * Input method changes, allow our templates to rebind correctly.\n   */\n  _inputMethodChanged: function(newValue, oldValue) {\n    if (newValue != null && typeof oldValue !== typeof undefined) {\n      let method = newValue;\n      let methods = this.validInputMethods();\n      // ensure this is a valid method of input\n      if (methods.includes(method)) {\n        // set everything false to force a correct rebind of template tags\n        this._resetInputMethods();\n        // this is weird looking, I know...\n        this[\"__input\" + method] = true;\n        // hide the menu if it was open previously\n        // need to paint into the slot so clean it out and repaint\n        let slot = dom(this);\n        while (slot.firstChild !== null) {\n          slot.removeChild(slot.firstChild);\n        }\n        // select needs to inject settings into the slot\n        if (method === \"select\" && typeof this.options !== typeof undefined) {\n          // this hits the key => value relationship correctly\n          for (val in this.options) {\n            item = document.createElement(\"paper-item\");\n            item.attributes.value = val;\n            item.innerHTML = this.options[val];\n            slot.appendChild(item);\n          }\n        }\n        // try and force cursor to focus on this element\n        setTimeout(() => {\n          if (\n            typeof this.shadowRoot.querySelector(\"#input\").hideMenu ===\n            \"function\"\n          ) {\n            this.shadowRoot.querySelector(\"#input\").hideMenu();\n          }\n          this.shadowRoot.querySelector(\"#input\").focus();\n        }, 200);\n      }\n    }\n  },\n\n  /**\n   * Validate input method.\n   */\n  validInputMethods: function() {\n    var methods = [\n      \"flipboolean\",\n      \"boolean\",\n      \"select\",\n      \"confirm\",\n      \"textfield\",\n      \"textarea\",\n      \"datepicker\",\n      \"colorpicker\",\n      \"number\"\n    ];\n    return methods;\n  },\n\n  /**\n   * Reset all our meta attributes.\n   */\n  _resetInputMethods: function() {\n    let methods = this.validInputMethods();\n    for (var i = 0; i < methods.length; i++) {\n      this[\"__input\" + methods[i]] = false;\n    }\n  },\n\n  /**\n   * Respond to simple modifications.\n   */\n  _haxContextOperation: function(e) {\n    let detail = e.detail;\n    // support a simple insert event to bubble up or everything else\n    switch (detail.eventName) {\n      case \"hax-update-tap\":\n        // minor dataType conversion for boolean\n        if (this.inputMethod == \"boolean\") {\n          this.value = this.value;\n        }\n        // opposite value for a flip-boolean\n        else if (this.inputMethod == \"flipboolean\") {\n          this.value = !this.value;\n        } else if (this.inputMethod == \"select\") {\n          var count = 0;\n          // convert value into key value\n          for (val in this.options) {\n            if (count == this.value) {\n              this.value = val;\n              continue;\n            }\n            count++;\n          }\n        }\n        let mixer = {\n          value: this.value,\n          propertyToBind: this.propertyToBind,\n          slotToBind: this.slotToBind\n        };\n        // retarget event with all the guts of this item\n        // this way we can do whatever we want in hax-body which is\n        // basically notice that we got asked to do some data binding\n        // and then actually do it and hide this item!!!!\n        this.fire(\"hax-input-mixer-update\", { inputMixer: mixer });\n        break;\n    }\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\nimport { FlattenedNodesObserver } from \"@polymer/polymer/lib/utils/flattened-nodes-observer.js\";\nimport { flush } from \"@polymer/polymer/lib/utils/flush.js\";\nimport * as async from \"@polymer/polymer/lib/utils/async.js\";\nimport \"@polymer/paper-item/paper-item.js\";\nimport \"@polymer/iron-a11y-keys/iron-a11y-keys.js\";\nimport \"@lrnwebcomponents/grid-plate/grid-plate.js\";\nimport \"./lib/hax-text-context.js\";\nimport \"./lib/hax-ce-context.js\";\nimport \"./lib/hax-plate-context.js\";\nimport \"./lib/hax-input-mixer.js\";\nvar $_documentContainer = document.createElement(\"div\");\n$_documentContainer.setAttribute(\"style\", \"display: none;\");\n\n$_documentContainer.innerHTML = `<dom-module id=\"hax-body\">\n  <template strip-whitespace=\"\">\n    <style>\n      :host {\n        display: block;\n        min-height: 32px;\n        min-width: 32px;\n        /*font-family: sans-serif;*/\n      }\n      :host #bodycontainer ::slotted(.hax-context-menu) {\n        padding: 0;\n        margin: 0;\n        position: absolute;\n        visibility: hidden;\n        opacity: 0;\n        transition: all .3s ease;\n        z-index: 100;\n        float: left;\n        display: block;\n      }\n      :host #bodycontainer ::slotted(#haxinputmixer) {\n        z-index: 10000000;\n      }\n      :host #bodycontainer ::slotted(.hax-context-visible) {\n        visibility: visible;\n        opacity: 1;\n      }\n      :host([edit-mode]) #bodycontainer ::slotted(*[data-editable]) {\n        outline: none;\n        transition:\n          .6s width ease-in-out,\n          .6s height ease-in-out,\n          .6s margin ease-in-out;\n      }\n      :host([edit-mode]) #bodycontainer ::slotted(p):empty {\n        background: #f8f8f8;\n      }\n      :host([edit-mode]) #bodycontainer ::slotted(*[data-editable]):hover {\n        outline: 1px dotted #d3d3d3;\n        outline-offset: 2px;\n      }\n      :host([edit-mode]) #bodycontainer ::slotted(* [data-editable]):hover {\n        outline: 1px dotted #d3d3d3;\n        outline-offset: 2px;\n      }\n      :host([edit-mode]) #bodycontainer ::slotted(*[data-editable]):before {\n        content: '';\n        display: block;\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        width: 32px;\n        transition: .6s all ease;\n      }\n      :host([edit-mode]) #bodycontainer ::slotted(*[data-editable]):hover:before {\n        content: '';\n        display: block;\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        width: 32px;\n        transition: .6s all ease;\n      }\n      :host([edit-mode]) #bodycontainer ::slotted(*.hax-active[data-editable]) {\n        cursor: text !important;\n        outline: 1px dashed #c3c3c3 !important;\n        outline-offset: 4px;\n      }\n      :host([edit-mode]) #bodycontainer ::slotted(*[data-editable] .hax-active) {\n        cursor: text !important;\n        outline: 1px dashed #c3c3c3 !important;\n        outline-offset: 4px;\n      }\n      :host([edit-mode]) #bodycontainer ::slotted(*.hax-active[data-editable]):before {\n        content: '';\n        display: block;\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        width: 32px;\n        transition: .6s all ease;\n      }\n      :host([edit-mode]) #bodycontainer ::slotted(code.hax-active[data-editable]) {\n        display: block;\n      }\n      :host([edit-mode]) #bodycontainer ::slotted(hr[data-editable]) {\n        height:4px;\n        background-color: #EEEEEE;\n        padding-top: 8px;\n        padding-bottom: 8px;\n      }\n      /** Fix to support safari as it defaults to none */\n      :host([edit-mode]) #bodycontainer ::slotted(*[data-editable]) {\n        -webkit-user-select: text;\n        cursor:pointer;\n      }\n\n      :host([edit-mode]) #bodycontainer ::slotted(*[data-editable]::-moz-selection),\n      :host([edit-mode]) #bodycontainer ::slotted(*[data-editable] *::-moz-selection) {\n        background-color: var(--hax-body-highlight, --paper-yellow-300);\n        color: black;\n      }\n      :host([edit-mode]) #bodycontainer ::slotted(*[data-editable]::selection),\n      :host([edit-mode]) #bodycontainer ::slotted(*[data-editable] *::selection) {\n        background-color: var(--hax-body-highlight, --paper-yellow-300);\n        color: black;\n      }\n      #bodycontainer {\n        -webkit-user-select: text;\n        user-select: text;\n      }\n\n      #contextcontainer {\n        display: none;\n      }\n      :host([edit-mode])[hax-ray-mode] #bodycontainer ::slotted(*[data-editable]) {\n        outline: 1px dashed #d3d3d3;\n        outline-offset: 4px;\n      }\n      :host([edit-mode])[hax-ray-mode] #bodycontainer ::slotted(*[data-editable]):before {\n        content: attr(data-hax-ray) \" \" attr(resource) \" \" attr(typeof) \" \" attr(property) \" \" attr(content);\n        font-size: 10px;\n        font-style: italic;\n        left: unset;\n        right: unset;\n        top: unset;\n        background-color: #d3d3d3;\n        color: #000000;\n        bottom: unset;\n        width: auto;\n        padding: 8px;\n        margin: 0;\n        z-index: 1;\n        margin: -16px 0 0 0;\n        float: left;\n        line-height: 2;\n      }\n    </style>\n    <div id=\"bodycontainer\" class=\"ignore-activation\">\n      <slot id=\"body\"></slot>\n    </div>\n    <div id=\"contextcontainer\">\n      <hax-text-context id=\"textcontextmenu\" class=\"hax-context-menu ignore-activation\"></hax-text-context>\n      <hax-ce-context id=\"cecontextmenu\" class=\"hax-context-menu ignore-activation\"></hax-ce-context>\n      <hax-plate-context id=\"platecontextmenu\" class=\"hax-context-menu ignore-activation\"></hax-plate-context>\n      <hax-input-mixer id=\"haxinputmixer\" class=\"hax-context-menu ignore-activation\"></hax-input-mixer>\n    </div>\n    <iron-a11y-keys target=\"[[activeContainerNode]]\" keys=\"esc\" on-keys-pressed=\"_escKeyPressed\" stop-keyboard-event-propagation=\"\"></iron-a11y-keys>\n    <iron-a11y-keys target=\"[[activeContainerNode]]\" keys=\"del backspace\" on-keys-pressed=\"_delKeyPressed\"></iron-a11y-keys>\n    <iron-a11y-keys target=\"[[activeContainerNode]]\" keys=\"shift+tab\" on-keys-pressed=\"_tabBackKeyPressed\" stop-keyboard-event-propagation=\"\"></iron-a11y-keys>\n    <iron-a11y-keys target=\"[[activeContainerNode]]\" keys=\"tab\" on-keys-pressed=\"_tabKeyPressed\" stop-keyboard-event-propagation=\"\"></iron-a11y-keys>\n    <iron-a11y-keys target=\"[[activeContainerNode]]\" keys=\"up\" on-keys-pressed=\"_upKeyPressed\" stop-keyboard-event-propagation=\"\"></iron-a11y-keys>\n    <iron-a11y-keys target=\"[[activeContainerNode]]\" keys=\"down\" on-keys-pressed=\"_downKeyPressed\" stop-keyboard-event-propagation=\"\"></iron-a11y-keys>\n\n  </template>\n\n  \n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer);\n/**\n`hax-body`\nA LRN element that will change the world.\n\n@demo demo/index.html\n\n@microcopy - the mental model for this element\n - body is effectively a body of content that can be manipulated in the browser. This is for other HAX elements ultimately to interface with and reside in. It is the controller of input and output for all of HAX as it exists in a document. body is not the <body> tag but we need a similar mental model container for all our other elements.\n - text-context - the context menu that shows up when an item is active so it can have text based operations performed to it.\n - plate/grid plate - a plate or grid plate is a container that we can operate on in HAX. it can also have layout / \"global\" type of body operations performed on it such as delete, duplicate and higher level format styling.\n\n*/\nPolymer({\n  is: \"hax-body\",\n  listeners: {\n    focusin: \"_focusIn\",\n    mousedown: \"_focusIn\",\n    \"hax-context-item-selected\": \"_haxContextOperation\",\n    \"hax-input-mixer-update\": \"_haxInputMixerOperation\",\n    \"place-holder-replace\": \"replacePlaceholder\"\n  },\n  behaviors: [simpleColorsBehaviors],\n  properties: {\n    /**\n     * State of if we are editing or not.\n     */\n    editMode: {\n      type: Boolean,\n      value: false,\n      reflectToAttribute: true,\n      observer: \"_editModeChanged\"\n    },\n    /**\n     * Access to the global properties object.\n     */\n    globalPreferences: {\n      type: Object,\n      value: {},\n      observer: \"_globalPreferencesUpdated\"\n    },\n    /**\n     * Bust out the HAX Ray mode\n     */\n    haxRayMode: {\n      type: Boolean,\n      value: false,\n      reflectToAttribute: true\n    },\n    /**\n     * A reference to the active node in the slot.\n     */\n    activeNode: {\n      type: Object,\n      value: null,\n      notify: true,\n      observer: \"_activeNodeChanged\"\n    },\n    /**\n     * A reference to the active node in the slot.\n     */\n    activeContainerNode: {\n      type: Object,\n      value: null,\n      notify: true,\n      observer: \"_activeContainerNodeChanged\"\n    }\n  },\n  /**\n   * Ready state to tee everything up.\n   */\n  ready: function() {\n    this.polyfillSafe = window.HaxStore.instance.computePolyfillSafe();\n    // mutation observer that ensures state of hax applied correctly\n    this._observer = new FlattenedNodesObserver(this, info => {\n      // MAKE SURE WE KNOW WHAT JUST GOT ADDED HERE\n      flush();\n      // if we've got new nodes, we have to react to that\n      if (info.addedNodes.length > 0) {\n        info.addedNodes.map(node => {\n          if (this._haxElementTest(node)) {\n            if (this._HTMLPrimativeTest(node)) {\n              node.contentEditable = this.editMode;\n            }\n            // this does the real targetting\n            node.setAttribute(\"data-editable\", this.editMode);\n            node.setAttribute(\"data-hax-ray\", node.tagName);\n            this.fire(\"hax-body-tag-added\", { node: node });\n          }\n        });\n      }\n      // if we dropped nodes via the UI (delete event basically)\n      if (info.removedNodes.length > 0) {\n        // handle removing items... not sure we need to do anything here\n        info.removedNodes.map(node => {\n          if (\n            this._haxElementTest(node) &&\n            !node.classList.contains(\"hax-active\")\n          ) {\n            this.fire(\"hax-body-tag-removed\", { node: node });\n          }\n        });\n      }\n    });\n  },\n  /**\n   * Attached to the DOM; now we can fire event to the store that\n   * we exist and are the thing being edited.\n   */\n  attached: function() {\n    this.__tabTrap = false;\n    this.fire(\"hax-register-body\", this);\n    document.body.addEventListener(\n      \"hax-store-property-updated\",\n      this._haxStorePropertyUpdated.bind(this)\n    );\n    document.body.addEventListener(\n      \"selectstart\",\n      this._selectionChange.bind(this)\n    );\n    document.body.addEventListener(\n      \"mouseup\",\n      this._selectionMouseUp.bind(this)\n    );\n    window.addEventListener(\"scroll\", this._keepContextVisible.bind(this));\n  },\n  /**\n   * Detached life cycle\n   */\n  detached: function() {\n    document.body.removeEventListener(\n      \"hax-store-property-updated\",\n      this._haxStorePropertyUpdated.bind(this)\n    );\n    document.body.removeEventListener(\n      \"selectstart\",\n      this._selectionChange.bind(this)\n    );\n    document.body.removeEventListener(\n      \"mouseup\",\n      this._selectionMouseUp.bind(this)\n    );\n    window.removeEventListener(\"scroll\", this._keepContextVisible.bind(this));\n  },\n  /**\n   * Keep the context menu visible if needed\n   */\n  _keepContextVisible: function(e) {\n    // see if the text context menu is visible\n    let el = false;\n    if (this.$.textcontextmenu.classList.contains(\"hax-context-visible\")) {\n      el = this.$.textcontextmenu;\n    } else if (this.$.cecontextmenu.classList.contains(\"hax-context-visible\")) {\n      el = this.$.cecontextmenu;\n    }\n    // if we see it, ensure we don't have the pin\n    if (el) {\n      if (this.elementInViewport(el)) {\n        el.classList.remove(\"hax-context-pin-bottom\");\n        el.classList.remove(\"hax-context-pin-top\");\n      } else {\n        if (this.__OffBottom) {\n          el.classList.add(\"hax-context-pin-top\");\n        } else {\n          el.classList.add(\"hax-context-pin-bottom\");\n        }\n      }\n    }\n  },\n  /**\n   * Check if part of the passed element is int he viewport\n   */\n  elementInViewport: function(el) {\n    let top =\n      el.offsetTop -\n      32 -\n      window.HaxStore.instance.haxPanel.$.drawer.offsetHeight;\n    let left = el.offsetLeft;\n    let width = el.offsetWidth;\n    let height = el.offsetHeight;\n    while (el.offsetParent) {\n      el = el.offsetParent;\n      top += el.offsetTop;\n      left += el.offsetLeft;\n    }\n    this.__OffBottom = top < window.pageYOffset + window.innerHeight;\n    return (\n      top < window.pageYOffset + window.innerHeight &&\n      left < window.pageXOffset + window.innerWidth &&\n      top + height > window.pageYOffset &&\n      left + width > window.pageXOffset\n    );\n  },\n  /**\n   * Selection changed\n   */\n  _selectionChange: function(e) {\n    window.__startedSelection = true;\n  },\n  _selectionMouseUp: function(e) {\n    if (window.__startedSelection && this.editMode) {\n      try {\n        let selection = window.getSelection();\n        let range = selection.getRangeAt(0);\n        let newRange = range.cloneRange();\n        window.__startedSelection = false;\n        if (\n          newRange.startContainer.parentNode.parentNode.parentElement\n            .tagName === \"HAX-BODY\" ||\n          newRange.startContainer.parentNode.parentElement.tagName ===\n            \"HAX-BODY\"\n        ) {\n          window.HaxStore.write(\"activePlaceHolder\", newRange, this);\n        }\n      } catch (err) {}\n    }\n  },\n  /**\n   * Replace place holder after an event has called for it in the element itself\n   */\n  replacePlaceholder: function(e) {\n    // generate a paragraph of text here on click\n    if (e.detail === \"text\") {\n      // make sure text just escalates to a paragraph tag\n      let p = document.createElement(\"p\");\n      this.haxReplaceNode(this.activeNode, p, dom(this.activeNode).parentNode);\n      // allow swap out to happen\n      setTimeout(() => {\n        // set active to this p tag\n        window.HaxStore.write(\"activeNode\", p, this);\n        // focus on it\n        p.focus();\n      }, 100);\n    } else {\n      this.replaceElementWorkflow();\n    }\n  },\n  /**\n   * Whole workflow of replacing something in place contextually.\n   * This can fire for things like events needing this workflow to\n   * invoke whether it's a \"convert\" event or a \"replace placeholder\" event\n   */\n  replaceElementWorkflow: function() {\n    let element = window.HaxStore.nodeToHaxElement(this.activeNode, null);\n    let type = \"*\";\n    let skipPropMatch = false;\n    // special support for place holder which defines exactly\n    // what the user wants this replaced with\n    if (\n      element.tag === \"place-holder\" &&\n      typeof element.properties[\"type\"] !== typeof undefined\n    ) {\n      type = element.properties[\"type\"];\n      skipPropMatch = true;\n    }\n    var props = {};\n    // see if we have a gizmo as it's not a requirement to registration\n    // as well as having handlers since mapping is not required either\n    if (\n      typeof window.HaxStore.instance.elementList[element.tag] !==\n        typeof undefined &&\n      window.HaxStore.instance.elementList[element.tag].gizmo !== false &&\n      typeof window.HaxStore.instance.elementList[element.tag].gizmo.handles !==\n        typeof undefined &&\n      window.HaxStore.instance.elementList[element.tag].gizmo.handles.length > 0\n    ) {\n      // get the haxProperties for this item\n      let gizmo = window.HaxStore.instance.elementList[element.tag].gizmo;\n      // walk through each handler\n      for (var i = 0; i < gizmo.handles.length; i++) {\n        // walk the properties defined as they would be to the\n        // left side of the ledger and tell us which property to\n        // mesh with. This effectively rehydrates / inverts that\n        // relationship where we have an element and want to say\n        // \"oh ya, but what could have handled this\" so that we\n        // can use that translation to offer up convertion to a\n        // new element. This is insane.\n        for (var prop in gizmo.handles[i]) {\n          // type is a reserved handler but any other property\n          // which we actually have in our element let's go for it\n          if (\n            prop !== \"type\" &&\n            typeof element.properties[gizmo.handles[i][prop]] !==\n              typeof undefined\n          ) {\n            // The cake is a lie... oh wait... no it's not.\n            // This will completely bend your mind when it comes to\n            // what HTML is, how it should operate and what universe\n            // we can now contort as a result. This effectively allows\n            // reverse engineering any element on the page into any\n            // other compatible element based on the properties in\n            // each element claiming to be compatible.\n            props[prop] = element.properties[gizmo.handles[i][prop]];\n          }\n        }\n      }\n    }\n    let haxElements = window.HaxStore.guessGizmo(type, props, skipPropMatch);\n    // see if we got anything\n    if (haxElements.length > 0) {\n      // hand off to hax-app-picker to deal with the rest of this\n      let tag = this.activeNode.tagName.toLowerCase();\n      let humanName = tag.replace(\"-\", \" \");\n      if (\n        typeof window.HaxStore.instance.elementList[tag] !== typeof undefined &&\n        window.HaxStore.instance.elementList[tag].gizmo !== false\n      ) {\n        humanName = window.HaxStore.instance.elementList[tag].gizmo.title;\n      }\n      window.HaxStore.instance.haxAppPicker.presentOptions(\n        haxElements,\n        \"__convert\",\n        `Transform ${humanName} to..`,\n        \"gizmo\"\n      );\n    } else {\n      window.HaxStore.toast(\"Sorry, this can not be transformed!\", 5000);\n    }\n  },\n  /**\n   * Global prefs updated, let's visualize stuff from hax-ray\n   */\n  _globalPreferencesUpdated: function(newValue, oldValue) {\n    if (typeof newValue !== typeof undefined && newValue != null) {\n      this.haxRayMode = newValue.haxRayMode;\n    }\n  },\n  /**\n   * Store updated, sync.\n   */\n  _haxStorePropertyUpdated: function(e) {\n    if (\n      e.detail &&\n      typeof e.detail.value !== typeof undefined &&\n      e.detail.property\n    ) {\n      if (typeof e.detail.value === \"object\") {\n        this.set(e.detail.property, null);\n      }\n      this.set(e.detail.property, e.detail.value);\n    }\n  },\n  /**\n   * Clear area.\n   */\n  haxClearBody: function(confirm = true) {\n    let status = true;\n    // only confirm if asked so we can support wipes without it\n    if (confirm) {\n      status = prompt(\"Are you sure you want to delete all content?\");\n    }\n    // ensure they said yes\n    if (status) {\n      window.HaxStore.wipeSlot(this);\n    }\n  },\n  /**\n   * Insert new tag + content into the local DOM as a node.\n   */\n  haxInsert: function(tag, content, properties = {}) {\n    var tags = window.HaxStore.instance.validTagList;\n    // verify this tag is a valid one\n    if (tags.includes(tag)) {\n      // create a new element fragment w/ content in it\n      // if this is a custom-element it won't expand though\n      var frag = document.createElement(tag);\n      frag.innerHTML = content;\n      // clone the fragment which will force an escalation to full node\n      var newNode = frag.cloneNode(true);\n      // support for properties if they exist\n      for (var property in properties) {\n        let attributeName = window.HaxStore.camelToDash(property);\n        if (properties.hasOwnProperty(property)) {\n          // special supporting for boolean because html is weird :p\n          if (properties[property] === true) {\n            newNode.setAttribute(attributeName, properties[property]);\n          } else if (properties[property] === false) {\n            newNode.removeAttribute(attributeName);\n          } else if (\n            properties[property] != null &&\n            properties[property].constructor === Array &&\n            !newNode.properties[property].readOnly\n          ) {\n            newNode.set(attributeName, properties[property]);\n          } else if (\n            properties[property] != null &&\n            properties[property].constructor === Object &&\n            !newNode.properties[property].readOnly\n          ) {\n            newNode.set(attributeName, properties[property]);\n          } else {\n            newNode.setAttribute(attributeName, properties[property]);\n          }\n        }\n      }\n      // special support for a drag and drop into a place-holder tag\n      // as this is a more aggressive operation then the others\n      if (\n        window.HaxStore.instance.activePlaceHolder !== null &&\n        typeof window.HaxStore.instance.activePlaceHolder.style !==\n          typeof undefined\n      ) {\n        // replicate styles so that it doesn't jar the UI\n        newNode.style.width =\n          window.HaxStore.instance.activePlaceHolder.style.width;\n        newNode.style.float =\n          window.HaxStore.instance.activePlaceHolder.style.float;\n        newNode.style.margin =\n          window.HaxStore.instance.activePlaceHolder.style.margin;\n        newNode.style.display =\n          window.HaxStore.instance.activePlaceHolder.style.display;\n        this.haxReplaceNode(\n          window.HaxStore.instance.activePlaceHolder,\n          newNode,\n          dom(window.HaxStore.instance.activePlaceHolder).parentNode\n        );\n        window.HaxStore.instance.activePlaceHolder = null;\n      }\n      // insert at active insert point if we have one\n      else if (this.activeContainerNode !== null) {\n        // allow for inserting things into things but not grid plate\n        if (\n          newNode.tagName !== \"GRID-PLATE\" &&\n          this.activeContainerNode.tagName === \"GRID-PLATE\" &&\n          this.activeContainerNode !== this.activeNode\n        ) {\n          newNode.setAttribute(\"slot\", this.activeNode.getAttribute(\"slot\"));\n          dom(this.activeContainerNode).insertBefore(newNode, this.activeNode);\n        } else {\n          dom(this).insertBefore(\n            newNode,\n            this.activeContainerNode.nextElementSibling\n          );\n        }\n      } else {\n        // send this into the root, which should filter it back down into the slot\n        dom(this).appendChild(newNode);\n      }\n      this.$.textcontextmenu.highlightOps = false;\n      // wait so that the DOM can have the node to then attach to\n      setTimeout(() => {\n        window.HaxStore.write(\"activeContainerNode\", newNode, this);\n        window.HaxStore.write(\"activeNode\", newNode, this);\n        // attempt to focus on the new node, may not always work\n        newNode.focus();\n        // scroll to it\n        if (typeof newNode.scrollIntoViewIfNeeded === \"function\") {\n          newNode.scrollIntoViewIfNeeded(true);\n        } else {\n          newNode.scrollIntoView({ behavior: \"smooth\", inline: \"center\" });\n        }\n      }, 100);\n      return true;\n    }\n    return false;\n  },\n  /**\n   * Return the current hax content area as text that could be\n   * inserted into something.\n   */\n  haxToContent: function() {\n    // remove from the body area so we can generate a legit html structure\n    this.hideContextMenus();\n    var __active = this.activeNode;\n    // null this to drop hax based classes\n    window.HaxStore.write(\"activeNode\", null, this);\n    window.HaxStore.write(\"activeContainerNode\", null, this);\n    let children = dom(this.$.body).getDistributedNodes();\n    if (this.globalPreferences.haxDeveloperMode) {\n      console.log(children);\n    }\n    var content = \"\";\n    for (var i = 0, len = children.length; i < len; i++) {\n      // see if this is a valid element or not, providing\n      // some mild front-end sanitization\n      if (this._haxElementTest(children[i])) {\n        children[i].removeAttribute(\"data-editable\");\n        children[i].removeAttribute(\"data-hax-ray\");\n        children[i].contentEditable = false;\n        content += window.HaxStore.haxNodeToContent(children[i]);\n        if (children[i].tagName.toLowerCase() === \"grid-plate\") {\n          this._applyContentEditable(this.editMode, children[i]);\n        }\n      }\n      // keep comments with a special case since they need wrapped\n      else if (children[i].nodeType === 8) {\n        content += \"<!-- \" + children[i].textContent + \" -->\";\n      }\n      // keep everything NOT an element at this point, this helps\n      // preserve whitespace because we're crazy about accuracy\n      else if (\n        children[i].nodeType !== 1 &&\n        typeof children[i].textContent !== typeof undefined &&\n        children[i].textContent !== \"undefined\"\n      ) {\n        content += children[i].textContent;\n      }\n    }\n    // remove the contenteditable attribute\n    content = content.replace(/\\scontenteditable=\\\"false\\\"/g, \"\");\n    // remove the data-editable attribute\n    content = content.replace(/\\sdata-editable=\\\"true\\\"/g, \"\");\n    content = content.replace(/\\sdata-editable=\\\"false\\\"/g, \"\");\n    content = content.replace(/\\sdata-editable=\\\"\"/g, \"\");\n    // remove other attributes that can linger in slots\n    content = content.replace(/\\sdata-editable/g, \"\");\n    content = content.replace(/\\scontenteditable/g, \"\");\n    content = content.replace(/\\sdraggable/g, \"\");\n    content = content.replace(/\\sdata-draggable/g, \"\");\n    // clean up stray hax-ray leftovers\n    content = content.replace(/\\sdata-hax-ray=\\\".*?\\\"/g, \"\");\n    // remove HAX specific classes / scoping classes\n    if (this.parentNode.tagName) {\n      let parentTag = this.parentNode.tagName.toLowerCase();\n      let string = \"style-scope \" + parentTag + \" x-scope\";\n      let re = new RegExp(string, \"g\");\n      content = content.replace(re, \"\");\n      // remove without the deeeper scope as well for primitives\n      string = \"style-scope \" + parentTag;\n      re = new RegExp(string, \"g\");\n      content = content.replace(re, \"\");\n      // remove the last common one unpacked\n      string = \"x-scope \" + parentTag + \"-0\";\n      re = new RegExp(string, \"g\");\n      content = content.replace(re, \"\");\n      // now all tags we have defined as valid\n      let tags = window.HaxStore.instance.validTagList;\n      tags.push(\"hax-preview\");\n      for (var i in tags) {\n        string = \"style-scope \" + tags[i];\n        re = new RegExp(string, \"g\");\n        content = content.replace(re, \"\");\n        string = \"x-scope \" + tags[i] + \"-0 \";\n        re = new RegExp(string, \"g\");\n        content = content.replace(re, \"\");\n        string = \"x-scope \" + tags[i] + \"-0\";\n        re = new RegExp(string, \"g\");\n        content = content.replace(re, \"\");\n      }\n    }\n    // remove empty class structures\n    content = content.replace(/\\sclass=\\\"\\\"/g, \"\");\n    content = content.replace(/\\sclass=\\\"\\s\\\"/g, \"\");\n    // re-apply contenteditable if needed\n    this._applyContentEditable(this.editMode);\n    // set active again\n    window.HaxStore.write(\"activeNode\", __active, this);\n    window.HaxStore.write(\"activeContainerNode\", __active, this);\n    // oh one last thing. escape all script/style tags\n    content = window.HaxStore.encapScript(content);\n    if (this.globalPreferences.haxDeveloperMode) {\n      console.log(content);\n    }\n    return content;\n  },\n  /**\n   * Duplicate node into the local DOM below the current item if we can.\n   */\n  haxDuplicateNode: function(node, parent = this) {\n    // move the context menu before duplicating!!!!\n    this.hideContextMenus();\n    var nodeClone = dom(node).cloneNode(true);\n    if (\n      nodeClone.tagName.toLowerCase() === \"webview\" &&\n      window.HaxStore.instance._isSandboxed &&\n      typeof nodeClone.guestinstance !== typeof undefined\n    ) {\n      delete nodeClone.guestinstance;\n    }\n    // shouldn't be possible but might as well check\n    if (node !== null) {\n      dom(parent).insertBefore(nodeClone, dom(node).nextSibling);\n    } else {\n      dom(parent).appendChild(nodeClone);\n    }\n    setTimeout(() => {\n      // test for a grid plate clone\n      if (parent === this) {\n        window.HaxStore.write(\"activeContainerNode\", nodeClone, this);\n      }\n      window.HaxStore.write(\"activeNode\", nodeClone, this);\n    }, 100);\n    return true;\n  },\n  /**\n   * Hide all context menus.\n   */\n  hideContextMenus: function() {\n    // primary context menus\n    this._hideContextMenu(this.$.textcontextmenu);\n    this._hideContextMenu(this.$.cecontextmenu);\n    // secondary menus and clean up areas\n    this._hideContextMenu(this.$.platecontextmenu);\n    this._hideContextMenu(this.$.haxinputmixer);\n    // force context menu state to closed\n    this.$.textcontextmenu.highlightOps = false;\n  },\n  /**\n   * Reposition context menus to match an element.\n   */\n  positionContextMenus: function(node, container) {\n    let tag = node.tagName.toLowerCase();\n    if (window.HaxStore.instance._isSandboxed && tag === \"webview\") {\n      tag = \"iframe\";\n    }\n    let props = window.HaxStore.instance.elementList[tag];\n    // get width from window size and do very minor responsive inline support\n    let w = Math.max(\n      document.documentElement.clientWidth,\n      window.innerWidth || 0\n    );\n    let offsetmenu = -39;\n    let offsetplate = -31;\n    // if we go below 800 break point, change menu positioning\n    if (w < 800) {\n      offsetmenu = 0;\n      offsetplate = 0;\n    }\n    // try and work against anything NOT a P tag\n    if (typeof props !== typeof undefined && node.tagName !== \"P\") {\n      this.__activeContextType = this.$.cecontextmenu;\n      props.element = node;\n      this.__activeContextType.setHaxProperties(props);\n    } else {\n      // @todo test if this is a custom element, then if it is\n      // try and guess what the properties are based on what's\n      // currently been set. it's by no means perfect but it'll\n      // be a really good start\n      this.__activeContextType = this.$.textcontextmenu;\n    }\n    this._positionContextMenu(\n      this.__activeContextType,\n      container,\n      offsetmenu,\n      -37\n    );\n    this._positionContextMenu(\n      this.$.platecontextmenu,\n      container,\n      offsetplate,\n      0,\n      false\n    );\n    // special case for node not matching container\n    if (!this._HTMLPrimativeTest(node) && node !== container) {\n      container.contentEditable = false;\n    } else if (this._HTMLPrimativeTest(container)) {\n      container.contentEditable = true;\n    }\n  },\n  /**\n   * Move grid plate around\n   */\n  haxMoveGridPlate: function(direction, node, container) {\n    // menu is actually in the element for render purposes\n    this.hideContextMenus();\n    // support moving things multiple directions\n    switch (direction) {\n      case \"first\":\n        // ensure we can go up, first being a mode of up\n        if (container.previousElementSibling !== null) {\n          dom(this).insertBefore(container, dom(this).firstChild);\n        }\n        break;\n      case \"up\":\n        // ensure we can go up\n        if (container.previousElementSibling !== null) {\n          dom(this).insertBefore(container, container.previousElementSibling);\n        }\n        break;\n      case \"down\":\n        if (container.nextElementSibling !== null) {\n          dom(this).insertBefore(container.nextElementSibling, container);\n        }\n        break;\n      case \"last\":\n        if (container.nextElementSibling !== null) {\n          dom(this).appendChild(container);\n        }\n        break;\n      // @todo support other directions for when inside of an element\n    }\n    this.positionContextMenus(node, container);\n    setTimeout(() => {\n      if (typeof container.scrollIntoViewIfNeeded === \"function\") {\n        container.scrollIntoViewIfNeeded(true);\n      } else {\n        container.scrollIntoView({ behavior: \"smooth\", inline: \"center\" });\n      }\n    }, 250);\n    return true;\n  },\n  /**\n   * Convert an element from one tag to another.\n   */\n  haxReplaceNode: function(node, replacement, parent = this) {\n    // ensure we're not in the document tree for the replaced node\n    this.hideContextMenus();\n    // Switch, try loop in case we screwed up elsewhere\n    try {\n      // test for slots to match\n      if (node.getAttribute(\"slot\") != null) {\n        replacement.setAttribute(\"slot\", node.getAttribute(\"slot\"));\n      }\n      dom(parent).replaceChild(replacement, node);\n    } catch (e) {\n      console.log(e);\n    }\n    return replacement;\n  },\n  /**\n   * Convert an element from one tag to another.\n   */\n  haxChangeTagName: function(node, tagName, newNode) {\n    // ensure we're not in the document tree for the replaced node\n    this.hideContextMenus();\n    // Create a replacement tag of the desired type\n    var replacement = document.createElement(tagName);\n    // Grab all of the original's attributes, and pass them to the replacement\n    for (var i = 0, l = node.attributes.length; i < l; ++i) {\n      var nodeName = node.attributes.item(i).nodeName;\n      var value = node.attributes.item(i).value;\n      replacement.setAttribute(nodeName, value);\n    }\n    // Persist contents\n    replacement.innerHTML = node.innerHTML;\n    // Switch!\n    dom(this).replaceChild(replacement, node);\n    return replacement;\n  },\n  /**\n   * Delete the node passed in\n   */\n  haxDeleteNode: function(node, parent = this) {\n    // move the context menu before deleting!!!!\n    this.hideContextMenus();\n    // shift active to a viable replacement\n    if (\n      this.activeContainerNode != null &&\n      this.activeContainerNode.previousElementSibling !== null\n    ) {\n      this.activeContainerNode.previousElementSibling.focus();\n      // cursor at the END of the element assuming not empty\n      if (\n        this.activeContainerNode != null &&\n        window.HaxStore.instance.isTextElement(this.activeContainerNode) &&\n        dom(this.activeContainerNode).textContent !== \"\"\n      ) {\n        try {\n          var range = document.createRange();\n          var sel = window.getSelection();\n          range.setStart(this.activeContainerNode, 1);\n          range.collapse(true);\n          sel.removeAllRanges();\n          sel.addRange(range);\n          this.activeContainerNode.focus();\n        } catch (e) {\n          console.log(e);\n        }\n      }\n    } else if (\n      this.activeContainerNode != null &&\n      this.activeContainerNode.nextElementSibling !== null\n    ) {\n      this.activeContainerNode.nextElementSibling.focus();\n    } else {\n      window.HaxStore.write(\"activeContainerNode\", null, this);\n      window.HaxStore.write(\"activeNode\", null, this);\n    }\n    // @todo figure out why this is complaining\n    try {\n      return dom(parent).removeChild(node);\n    } catch (e) {\n      console.log(e);\n    }\n  },\n  /**\n   * Bulk import HTML with option to clear what is currently\n   * in the slot of this tag. This also validates tags\n   * that are being inserted for security based on the\n   * internal whitelist.\n   */\n  importContent: function(html, clear = true) {\n    // kill the slot of the active body, all of it\n    if (clear) {\n      window.HaxStore.wipeSlot(this, \"*\");\n    }\n    // pause quickly to ensure wipe goes through successfully\n    setTimeout(() => {\n      html = window.HaxStore.encapScript(html);\n      const validTags = window.HaxStore.instance.validTagList;\n      let fragment = document.createElement(\"div\");\n      fragment.insertAdjacentHTML(\"beforeend\", html);\n      while (fragment.firstChild !== null) {\n        if (\n          typeof fragment.firstChild.tagName !== typeof undefined &&\n          validTags.includes(fragment.firstChild.tagName.toLowerCase())\n        ) {\n          // ensure import doesn't import non-sandbox safe things!\n          if (\n            window.HaxStore.instance._isSandboxed &&\n            fragment.firstChild.tagName.toLowerCase() === \"iframe\"\n          ) {\n            // Create a replacement tag of the desired type\n            var replacement = document.createElement(\"webview\");\n            // Grab all of the original's attributes, and pass them to the replacement\n            for (\n              var j = 0, l = fragment.firstChild.attributes.length;\n              j < l;\n              ++j\n            ) {\n              var nodeName = fragment.firstChild.attributes.item(j).nodeName;\n              var value = fragment.firstChild.attributes.item(j).value;\n              if (nodeName === \"height\" || nodeName === \"width\") {\n                replacement.style[nodeName] == value;\n              }\n              replacement.setAttribute(nodeName, value);\n            }\n            dom(this).appendChild(replacement);\n          } else {\n            dom(this).appendChild(fragment.firstChild);\n          }\n        } else {\n          // this tag didn't pass the test, get rid of it\n          fragment.removeChild(fragment.firstChild);\n        }\n      }\n    }, 200);\n  },\n  /**\n   * Respond to hax operations.\n   */\n  _haxContextOperation: function(e) {\n    let detail = e.detail;\n    var haxElement;\n    // support a simple insert event to bubble up or everything else\n    switch (detail.eventName) {\n      // text based operations for primatives\n      case \"p\":\n      case \"h2\":\n      case \"h3\":\n      case \"h4\":\n      case \"h5\":\n      case \"h6\":\n      case \"code\":\n      case \"blockquote\":\n        // trigger the default selected value in context menu to match\n        this.$.textcontextmenu.selectedValue = detail.eventName;\n        window.HaxStore.write(\n          \"activeContainerNode\",\n          this.haxChangeTagName(this.activeContainerNode, detail.eventName),\n          this\n        );\n        break;\n      case \"text-align-left\":\n        this.activeNode.style.textAlign = null;\n        this.positionContextMenus(this.activeNode, this.activeContainerNode);\n        break;\n      case \"text-align-right\":\n        this.activeNode.style.textAlign = \"right\";\n        this.positionContextMenus(this.activeNode, this.activeContainerNode);\n        break;\n      // grid plate based operations\n      // allow for transforming this haxElement into another one\n      case \"grid-plate-convert\":\n        this.replaceElementWorkflow();\n        break;\n      // duplicate the active item or container\n      case \"grid-plate-duplicate\":\n        if (this.activeNode === this.activeContainerNode) {\n          this.haxDuplicateNode(this.activeNode);\n        } else {\n          this.haxDuplicateNode(this.activeNode, this.activeContainerNode);\n        }\n        break;\n      case \"grid-plate-delete\":\n        let options = [\n          {\n            icon: \"thumb-up\",\n            color: \"green\",\n            title: \"Yes\"\n          },\n          {\n            icon: \"thumb-down\",\n            color: \"red\",\n            title: \"No\"\n          }\n        ];\n        let tag = this.activeNode.tagName.toLowerCase();\n        let humanName = tag.replace(\"-\", \" \");\n        if (\n          typeof window.HaxStore.instance.elementList[tag] !==\n            typeof undefined &&\n          window.HaxStore.instance.elementList[tag].gizmo !== false\n        ) {\n          humanName = window.HaxStore.instance.elementList[tag].gizmo.title;\n        }\n        window.HaxStore.instance.haxAppPicker.presentOptions(\n          options,\n          \"\",\n          `Remove this \\`${humanName}\\`?`,\n          \"delete\"\n        );\n        break;\n      case \"grid-plate-first\":\n        this.haxMoveGridPlate(\n          \"first\",\n          this.activeNode,\n          this.activeContainerNode\n        );\n        break;\n      case \"grid-plate-up\":\n        this.haxMoveGridPlate(\"up\", this.activeNode, this.activeContainerNode);\n        break;\n      case \"hax-manager-open\":\n        window.HaxStore.write(\"activeHaxElement\", {}, this);\n        window.HaxStore.instance.haxManager.resetManager(\n          parseInt(detail.value)\n        );\n        window.HaxStore.instance.haxManager.toggleDialog();\n        break;\n      case \"grid-plate-down\":\n        this.haxMoveGridPlate(\n          \"down\",\n          this.activeNode,\n          this.activeContainerNode\n        );\n        break;\n      case \"grid-plate-last\":\n        this.haxMoveGridPlate(\n          \"last\",\n          this.activeNode,\n          this.activeContainerNode\n        );\n        break;\n      case \"close-menu\":\n        // this is the equivalent of hiding menus and resetting the board\n        window.HaxStore.write(\"activeContainerNode\", null, this);\n        window.HaxStore.write(\"activeNode\", null, this);\n        break;\n      case \"hax-edit-property\":\n        let haxInputMixer = this.$.haxinputmixer;\n        haxInputMixer.label = detail.target.label;\n        haxInputMixer.options = detail.target.options;\n        haxInputMixer.icon = detail.target.icon;\n        haxInputMixer.description = detail.target.description;\n        haxInputMixer.required = detail.target.required;\n        haxInputMixer.validation = detail.target.validation;\n        haxInputMixer.validationType = detail.target.validationType;\n        haxInputMixer.inputMethod = detail.target.inputMethod;\n        haxInputMixer.value = \"\";\n        // see if response should bind to the slot or property\n        if (\n          typeof detail.target.propertyToBind !== typeof undefined &&\n          detail.target.propertyToBind != null &&\n          detail.target.propertyToBind != false\n        ) {\n          haxInputMixer.propertyToBind = detail.target.propertyToBind;\n          if (\n            typeof this.activeNode[detail.target.propertyToBind] !==\n            typeof undefined\n          ) {\n            haxInputMixer.value = this.activeNode[detail.target.propertyToBind];\n          }\n          // try to get an attribute bind\n          else {\n            haxInputMixer.value = this.activeNode.getAttribute(\n              detail.target.propertyToBind\n            );\n          }\n          // @todo need to be able to support slot binding\n        }\n        // make input mixer show up\n        this._positionContextMenu(\n          haxInputMixer,\n          this.$.cecontextmenu,\n          -6,\n          -116\n        );\n        haxInputMixer.style.width = null;\n        break;\n      // directional / proportion operations\n      case \"hax-align-left\":\n        this.activeNode.style.float = null;\n        this.activeNode.style.margin = null;\n        this.activeNode.style.display = null;\n        this.positionContextMenus(this.activeNode, this.activeContainerNode);\n        break;\n      case \"hax-align-center\":\n        this.activeNode.style.float = null;\n        this.activeNode.style.margin = \"0 auto\";\n        this.activeNode.style.display = \"block\";\n        this.positionContextMenus(this.activeNode, this.activeContainerNode);\n        break;\n      case \"hax-align-right\":\n        this.activeNode.style.float = \"right\";\n        this.activeNode.style.margin = null;\n        this.activeNode.style.display = null;\n        this.positionContextMenus(this.activeNode, this.activeContainerNode);\n        break;\n      case \"hax-size-change\":\n        this.activeNode.style.width = detail.value + \"%\";\n        setTimeout(() => {\n          this.positionContextMenus(this.activeNode, this.activeContainerNode);\n        }, 1000);\n        break;\n      // settings button selected from hax-ce-context bar\n      // which means we should skip to the settings page after\n      // we set the thing selected as the active element to work\n      // on in the manager\n      case \"hax-manager-configure\":\n        // make sure input mixer is closed\n        this._hideContextMenu(this.$.haxinputmixer);\n        // reset the manager\n        window.HaxStore.instance.haxManager.resetManager();\n        // write activeElement updated so it'll go into the preview\n        haxElement = window.HaxStore.nodeToHaxElement(\n          window.HaxStore.instance.activeNode\n        );\n        window.HaxStore.write(\"activeHaxElement\", haxElement, this);\n        // clean up the manager before opening\n        window.HaxStore.instance.haxManager.editExistingNode = true;\n        window.HaxStore.instance.haxManager.selectStep(\"configure\");\n        window.HaxStore.instance.haxManager.toggleDialog();\n        // accessibility enhancement to keyboard focus configure button\n        setTimeout(() => {\n          window.HaxStore.instance.haxManager.$.preview.$.configurebutton.focus();\n        }, 100);\n        break;\n      // container / layout settings button has been activated\n      case \"hax-manager-configure-container\":\n        window.HaxStore.write(\n          \"activeNode\",\n          window.HaxStore.instance.activeContainerNode,\n          this\n        );\n        // make sure input mixer is closed\n        this._hideContextMenu(this.$.haxinputmixer);\n        // reset the manager\n        window.HaxStore.instance.haxManager.resetManager();\n        // write activeElement updated so it'll go into the preview\n        haxElement = window.HaxStore.nodeToHaxElement(\n          window.HaxStore.instance.activeNode\n        );\n        window.HaxStore.write(\"activeHaxElement\", haxElement, this);\n        // clean up the manager before opening\n        window.HaxStore.instance.haxManager.editExistingNode = true;\n        window.HaxStore.instance.haxManager.selectStep(\"configure\");\n        window.HaxStore.instance.haxManager.toggleDialog();\n        // accessibility enhancement to keyboard focus configure button\n        setTimeout(() => {\n          window.HaxStore.instance.haxManager.$.preview.$.configurebutton.focus();\n        }, 100);\n        break;\n    }\n  },\n  /**\n   * Respond to an input mixer call.\n   */\n  _haxInputMixerOperation: function(e) {\n    // this is a big deal how simple this part is in the end\n    let mixer = e.detail.inputMixer;\n    // if we have a property to bind, set that value from the\n    // widget that was dictated by the element itself\n    if (mixer.propertyToBind != null) {\n      this.activeNode[mixer.propertyToBind] = mixer.value;\n    }\n    // if we're told instead to do a slot bind, make a span tag\n    // with height same as parent and then mix in the innerHTML\n    else if (mixer.slotToBind != null) {\n      item = document.createElement(\"span\");\n      item.style.height = \"inherit\";\n      item.innerHTML = mixer.value;\n      //item.attribute.slot = mixer.slotToBind;\n      item.slot = mixer.slotToBind;\n      this.activeNode.appendChild(item);\n    }\n    // hide mixer\n    this._hideContextMenu(this.$.haxinputmixer);\n  },\n  /**\n   * Item has gained focus, change active element to match\n   */\n  _focusIn: function(e) {\n    // only worry about these when we are in edit mode\n    if (this.editMode && !this.__tabTrap) {\n      var normalizedEvent = dom(e);\n      var local = normalizedEvent.localTarget;\n      var tags = window.HaxStore.instance.validTagList;\n      let containerNode = local;\n      let activeNode = null;\n      // ensure this is valid\n      if (\n        this._haxElementTest(containerNode) &&\n        containerNode.parentNode != null\n      ) {\n        // keep looking til we are juuuust below the container\n        // @todo this is where we force a selection on highest level\n        // of the document\n        while (containerNode.parentNode.tagName != \"HAX-BODY\") {\n          // make sure active is set after closest legit element\n          if (\n            activeNode === null &&\n            tags.includes(containerNode.tagName.toLowerCase()) &&\n            containerNode.tagName !== \"LI\" &&\n            containerNode.tagName !== \"B\" &&\n            containerNode.tagName !== \"I\" &&\n            containerNode.tagName !== \"STRONG\" &&\n            containerNode.tagName !== \"EM\"\n          ) {\n            activeNode = containerNode;\n          }\n          containerNode = containerNode.parentNode;\n        }\n        // case with simple element\n        if (activeNode === null) {\n          activeNode = containerNode;\n        }\n        // we only allow disconnected node from container when\n        // the container is a grid plate\n        else if (!window.HaxStore.instance.isGridPlateElement(containerNode)) {\n          activeNode = containerNode;\n        }\n        // won't deal with lists inside of p tags\n        else if (\n          [\"UL\", \"OL\", \"LI\", \"P\", \"GRID-PLATE\"].includes(\n            containerNode.tagName\n          ) &&\n          [\"UL\", \"OL\", \"LI\"].includes(activeNode.tagName)\n        ) {\n          activeNode = containerNode;\n        }\n        // ensure this is a tag we care about / have support for and\n        // that it is a new value\n        if (\n          this.activeContainerNode !== containerNode &&\n          tags.includes(containerNode.tagName.toLowerCase()) &&\n          !containerNode.classList.contains(\"ignore-activation\")\n        ) {\n          window.HaxStore.write(\"activeContainerNode\", containerNode, this);\n          e.stopPropagation();\n        } else if (containerNode.classList.contains(\"ignore-activation\")) {\n          e.stopPropagation();\n        }\n        // test for active node changing\n        if (\n          this.activeNode !== activeNode &&\n          tags.includes(containerNode.tagName.toLowerCase()) &&\n          !activeNode.classList.contains(\"ignore-activation\")\n        ) {\n          setTimeout(() => {\n            window.HaxStore.write(\"activeNode\", activeNode, this);\n          }, 50);\n          e.stopPropagation();\n        }\n      }\n    } else {\n      this.__tabTrap = false;\n    }\n  },\n  /**\n   * Notice the change between states for editing.\n   */\n  _editModeChanged: function(newValue, oldValue) {\n    // fire above that we have changed states so things can react if needed\n    if (typeof oldValue !== typeof undefined) {\n      this._applyContentEditable(newValue);\n      if (\n        newValue !== false &&\n        typeof this.activeNode !== typeof undefined &&\n        this.activeNode !== null\n      ) {\n        this.positionContextMenus(this.activeNode, this.activeContainerNode);\n      }\n    }\n    // hide menus when state changes\n    if (newValue === false) {\n      this.hideContextMenus();\n    }\n  },\n  /**\n   * Test if this is a HAX element or not\n   */\n  _haxResolvePreviousElement: function(node) {\n    node = dom(node).previousElementSibling;\n    while (\n      typeof node.tagName !== typeof undefined &&\n      node.tagName.substring(0, 4) === \"HAX-\"\n    ) {\n      node = dom(node).previousElementSibling;\n    }\n    return node;\n  },\n  /**\n   * Test if this is a HAX element or not\n   */\n  _haxElementTest: function(node) {\n    if (\n      typeof node.tagName !== typeof undefined &&\n      node.tagName.substring(0, 4) !== \"HAX-\"\n    ) {\n      return true;\n    }\n    return false;\n  },\n  /**\n   * Test if this is an HTML primative\n   */\n  _HTMLPrimativeTest: function(node) {\n    if (\n      typeof node.tagName !== typeof undefined &&\n      node.tagName.indexOf(\"-\") == -1\n    ) {\n      return true;\n    }\n    return false;\n  },\n  /**\n   * Walk everything we find and either enable or disable editable state.\n   */\n  _applyContentEditable: function(status, target = this.$.body) {\n    let children = dom(target).getDistributedNodes();\n    // fallback for content nodes if not polymer managed nodes above\n    if (children.length === 0) {\n      children = dom(target).getEffectiveChildNodes();\n    }\n    for (var i = 0, len = children.length; i < len; i++) {\n      // we have to tell the browser that primatives are editable\n      if (this._HTMLPrimativeTest(children[i])) {\n        children[i].contentEditable = status;\n      }\n      // this does the real targetting\n      if (this._haxElementTest(children[i])) {\n        if (status) {\n          children[i].setAttribute(\"data-editable\", status);\n          children[i].setAttribute(\"data-hax-ray\", children[i].tagName);\n        } else {\n          children[i].removeAttribute(\"data-editable\");\n          children[i].removeAttribute(\"data-hax-ray\");\n        }\n      }\n    }\n  },\n  /**\n   * Container has changed\n   */\n  _activeContainerNodeChanged: function(newValue, oldValue) {\n    if (\n      this.editMode &&\n      typeof newValue !== typeof undefined &&\n      newValue !== null\n    ) {\n      let tag = newValue.tagName.toLowerCase();\n      // special case for the grid plate since it brings in dom nodes\n      // nested in it and needs to be put into an editMode\n      if (tag === \"grid-plate\") {\n        newValue.editMode = this.editMode;\n        this._applyContentEditable(this.editMode, newValue);\n      }\n    }\n  },\n  /**\n   * React to a new node being set to active.\n   */\n  _activeNodeChanged: function(newValue, oldValue) {\n    // clean up the older one\n    if (typeof oldValue !== typeof undefined && oldValue != null) {\n      oldValue.classList.remove(\"hax-active\");\n    }\n    if (\n      this.editMode &&\n      typeof newValue !== typeof undefined &&\n      newValue !== null\n    ) {\n      let tag = newValue.tagName.toLowerCase();\n      // remove the menu, establish the new active, then reapply\n      // this is nessecary because the context menu gets appended into\n      // the document\n      // only hide if we change containers\n      newValue.classList.add(\"hax-active\");\n      this.$.textcontextmenu.selectedValue = tag;\n      // position the operations / in context element\n      setTimeout(() => {\n        this.positionContextMenus(\n          newValue,\n          window.HaxStore.instance.activeContainerNode\n        );\n      }, 25);\n      if (newValue.style.textAlign == \"right\") {\n        this.$.textcontextmenu.justifyIcon = \"editor:format-align-right\";\n        this.$.textcontextmenu.justifyValue = \"text-align-right\";\n      } else if (newValue.style.textAlign == \"left\") {\n        this.$.textcontextmenu.justifyIcon = \"editor:format-align-left\";\n        this.$.textcontextmenu.justifyValue = \"text-align-left\";\n      } else if (newValue.style.float == \"left\") {\n        this.$.cecontextmenu.justifyIcon = \"editor:format-align-left\";\n        this.$.cecontextmenu.justifyValue = \"hax-align-left\";\n      } else if (newValue.style.float == \"right\") {\n        this.$.cecontextmenu.justifyIcon = \"editor:format-align-right\";\n        this.$.cecontextmenu.justifyValue = \"hax-align-right\";\n      } else if (newValue.style.margin == \"0 auto\") {\n        this.$.cecontextmenu.justifyIcon = \"editor:format-align-center\";\n        this.$.cecontextmenu.justifyValue = \"hax-align-center\";\n      }\n    }\n    // just hide menus if we don't have an active item\n    else if (newValue === null) {\n      this.hideContextMenus();\n      this.$.textcontextmenu.justifyIcon = \"editor:format-align-left\";\n      this.$.textcontextmenu.justifyValue = \"text-align-left\";\n    }\n  },\n  /**\n   * Handle display and position of the context menu\n   */\n  _positionContextMenu: function(\n    menu,\n    target,\n    xoffset,\n    yoffset,\n    matchStyle = true\n  ) {\n    try {\n      dom(this).insertBefore(menu, target);\n    } catch (err) {\n      try {\n        dom(target.parentNode).insertBefore(menu, target);\n      } catch (err2) {}\n    }\n    // account for the target using these layout busters\n    if (matchStyle) {\n      menu.style.width = target.style.width;\n    }\n    // make it account for the offset if it's floated over to one side\n    // or inside of something that's over that way\n    let style = target.currentStyle || window.getComputedStyle(target);\n    if (parseInt(style.marginLeft) != 0) {\n      xoffset = xoffset + parseInt(style.marginLeft);\n    } else {\n      xoffset = xoffset + parseInt(target.offsetLeft) - this.offsetLeft;\n    }\n    if (xoffset != null) {\n      menu.style[\"margin-left\"] = xoffset + \"px\";\n    }\n    if (yoffset != null) {\n      menu.style[\"margin-top\"] = yoffset + \"px\";\n    }\n    menu.classList.add(\"hax-context-visible\");\n    async.microTask.run(this._keepContextVisible());\n  },\n  /**\n   * Simple hide / reset of whatever menu it's handed.\n   */\n  _hideContextMenu: function(menu) {\n    menu.classList.remove(\"hax-context-visible\");\n    menu.classList.remove(\"hax-context-pin-top\");\n    menu.classList.remove(\"hax-context-pin-bottom\");\n    dom(this.$.contextcontainer).appendChild(menu);\n  },\n  /**\n   * When the user hits escape key, let's deselect what we have now\n   */\n  _escKeyPressed: function(e) {\n    if (this.editMode) {\n      e.preventDefault();\n      e.stopPropagation();\n      // support 1st press only closing the inline context menu\n      if (this.$.textcontextmenu.highlightOps) {\n        this.$.textcontextmenu.highlightOps = false;\n        // ensure these are the same\n        window.HaxStore.write(\"activeNode\", this.activeContainerNode, this);\n        this.activeContainerNode.focus();\n      } else if (this.activeNode === this.activeContainerNode) {\n        window.HaxStore.write(\"activeContainerNode\", null, this);\n        window.HaxStore.write(\"activeNode\", null, this);\n        document.body.focus();\n      } else {\n        window.HaxStore.write(\"activeNode\", this.activeContainerNode, this);\n        this.activeContainerNode.focus();\n      }\n    }\n  },\n  /**\n   * When the user hits delete, test if there's any content\n   * left in this container. If thre isn't then delete the\n   * container itself\n   */\n  _delKeyPressed: function(e) {\n    if (this.editMode) {\n      const activeNodeTextContent = dom(this.activeContainerNode).textContent;\n      if (activeNodeTextContent === \"\") {\n        e.preventDefault();\n        e.stopPropagation();\n        this.haxDeleteNode(this.activeContainerNode);\n      } else if (\n        window.HaxStore.instance.isTextElement(\n          this._haxResolvePreviousElement(this.activeContainerNode)\n        )\n      ) {\n        // test selection to see if we are at beginning of\n        // whatever element this is\n        var selection = window.getSelection();\n        let range = selection.getRangeAt(0).cloneRange();\n        // ensure our range is not inside of a list item\n        let tagTest = range.commonAncestorContainer.tagName;\n        if (typeof tagTest === typeof undefined) {\n          tagTest = range.commonAncestorContainer.parentNode.tagName;\n        }\n        // must strictly be single placement cursor at start of tag\n        if (\n          range.startOffset === 0 &&\n          range.endOffset === 0 &&\n          ![\"UL\", \"OL\", \"LI\"].includes(tagTest)\n        ) {\n          e.preventDefault();\n          e.stopPropagation();\n          while (this.activeContainerNode.firstChild) {\n            this._haxResolvePreviousElement(\n              this.activeContainerNode\n            ).appendChild(this.activeContainerNode.firstChild);\n          }\n          setTimeout(() => {\n            this.haxDeleteNode(this.activeContainerNode);\n          }, 100);\n        }\n      }\n    }\n  },\n  /**\n   * Move between things pressing up and down if empty\n   */\n  _upKeyPressed: function(e) {\n    if (this.editMode && dom(this.activeContainerNode).textContent === \"\") {\n      let node = this._haxResolvePreviousElement(this.activeContainerNode);\n      // see if we can focus it otherwise we were at the top\n      try {\n        node.focus();\n      } catch (e) {\n        // if an error then we are at the top anyway\n      }\n    }\n  },\n  /**\n   * Move between things pressing up and down if empty\n   */\n  _downKeyPressed: function(e) {\n    if (this.editMode && dom(this.activeContainerNode).textContent === \"\") {\n      let node = dom(this.activeContainerNode);\n      // try and focus on the next thing\n      try {\n        node.nextElementSibling.focus();\n      } catch (e) {\n        // do nothing, at bottom\n      }\n    }\n  },\n  /**\n   * Find the next thing to tab forward to.\n   */\n  _tabKeyPressed: function(e) {\n    if (this.editMode) {\n      e.preventDefault();\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n      let focus = false;\n      let node = this.activeContainerNode;\n      const activeNodeTagName = this.activeContainerNode.tagName;\n      // try selection / tab block since range can cause issues\n      try {\n        var selection = window.getSelection();\n        let range = selection.getRangeAt(0).cloneRange();\n        var tagTest = range.commonAncestorContainer.tagName;\n        if (typeof tagTest === typeof undefined) {\n          tagTest = range.commonAncestorContainer.parentNode.tagName;\n        }\n        if (\n          [\"UL\", \"OL\", \"LI\"].includes(activeNodeTagName) ||\n          [\"UL\", \"OL\", \"LI\"].includes(tagTest)\n        ) {\n          if (this.polyfillSafe) {\n            document.execCommand(\"indent\");\n            this.__tabTrap = true;\n          }\n        } else {\n          while (!focus) {\n            // do nothing\n            if (dom(node).nextSibling == null) {\n              focus = true;\n            } else if (dom(node).nextSibling.focus === \"function\") {\n              dom(node).nextSibling.focus();\n              focus = true;\n            } else {\n              node = dom(node).nextSibling;\n            }\n          }\n        }\n      } catch (e) {}\n    }\n  },\n  /**\n   * Move back through things when tab back pressed\n   */\n  _tabBackKeyPressed: function(e) {\n    if (this.editMode) {\n      e.preventDefault();\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n      let node = dom(this.activeContainerNode).previousSibling;\n      const activeNodeTagName = this.activeContainerNode.tagName;\n      var selection = window.getSelection();\n      try {\n        let range = selection.getRangeAt(0).cloneRange();\n        if (\n          [\"UL\", \"OL\", \"LI\"].includes(activeNodeTagName) ||\n          [\"UL\", \"OL\", \"LI\"].includes(\n            range.commonAncestorContainer.parentElement.tagName\n          )\n        ) {\n          if (this.polyfillSafe) {\n            document.execCommand(\"outdent\");\n            this.__tabTrap = true;\n          }\n        } else {\n          if (node != null) {\n            // step back ignoring hax- prefixed elements\n            while (node != null && !this._haxElementTest(node)) {\n              node = dom(node).previousSibling;\n            }\n          }\n          if (node != null) {\n            setTimeout(() => {\n              node.focus();\n            }, 100);\n          }\n        }\n      } catch (e) {}\n    }\n  }\n});\n"],"names":["_template","html","is","properties","corner","type","String","reflectToAttribute","value","disabled","Boolean","light","menu","mini","icon","label","tooltip","observer","tooltipDirection","default","iconClass","_tooltipChanged","newValue","oldValue","$","setAttribute","listeners","tap","resetOnSelect","selected","notify","_selectChanged","e","button","focus","_menubuttonTap","listbox","style","display","this","hideMenu","_blockEvent","selectedValue","Number","direction","eventName","_selectedUpdated","_typeof","children","dom","getDistributedNodes","item","Object","j","i","len","length","tagName","attributes","fire","target","inputMethod","propertyToBind","slotToBind","description","_fireEvent","ready","behaviors","simpleColorsBehaviors","hideTransform","reflectToAttritue","haxProperties","hideMore","size","justifyIcon","inline","justifyValue","_haxPropertiesChanged","window","HaxStore","instance","activeNode","width","replace","float","margin","_haxContextOperation","detail","moremenu","justify","polyfillSafe","selection","computePolyfillSafe","getSelection","formatsize","activePlaceHolder","values","text","toString","haxElements","guessGizmo","haxAppPicker","presentOptions","document","execCommand","toolbar","href","focusNode","parentNode","url","prompt","isSafari","typevalue","ua","navigator","userAgent","toLowerCase","indexOf","ceSize","humanName","setHaxProperties","props","set","_ceSizeChanged","settings","slot","firstChild","removeChild","quick","configure","advanced","element","__hasSettingsForm","__hasParentSettingsForm","activeContainerNode","__parentName","gizmo","title","setting","createElement","options","required","validation","validationType","property","attribute","appendChild","_resetInputMethods","_inputMethodChanged","method","validInputMethods","includes","val","innerHTML","setTimeout","_this","shadowRoot","querySelector","methods","count","mixer","inputMixer","$_documentContainer","head","focusin","mousedown","editMode","globalPreferences","haxRayMode","_observer","FlattenedNodesObserver","info","flush","addedNodes","map","node","_haxElementTest","_HTMLPrimativeTest","contentEditable","removedNodes","classList","contains","attached","__tabTrap","body","addEventListener","_haxStorePropertyUpdated","bind","_selectionChange","_selectionMouseUp","_keepContextVisible","detached","removeEventListener","el","textcontextmenu","cecontextmenu","elementInViewport","remove","__OffBottom","add","top","offsetTop","haxPanel","drawer","offsetHeight","left","offsetLeft","offsetWidth","height","offsetParent","pageYOffset","innerHeight","pageXOffset","innerWidth","__startedSelection","newRange","getRangeAt","cloneRange","startContainer","parentElement","write","err","replacePlaceholder","p","haxReplaceNode","_this2","replaceElementWorkflow","nodeToHaxElement","skipPropMatch","tag","elementList","handles","prop","toast","_globalPreferencesUpdated","haxClearBody","status","wipeSlot","haxInsert","content","validTagList","frag","newNode","cloneNode","attributeName","camelToDash","hasOwnProperty","removeAttribute","constructor","Array","readOnly","getAttribute","insertBefore","nextElementSibling","highlightOps","_this3","scrollIntoViewIfNeeded","scrollIntoView","behavior","haxToContent","hideContextMenus","__active","haxDeveloperMode","console","log","haxNodeToContent","_applyContentEditable","nodeType","textContent","parentTag","string","re","RegExp","tags","push","encapScript","haxDuplicateNode","parent","nodeClone","_isSandboxed","guestinstance","nextSibling","_this4","_hideContextMenu","platecontextmenu","haxinputmixer","positionContextMenus","container","offsetmenu","offsetplate","Math","max","documentElement","clientWidth","__activeContextType","_positionContextMenu","haxMoveGridPlate","previousElementSibling","replacement","replaceChild","haxChangeTagName","l","nodeName","haxDeleteNode","isTextElement","range","createRange","sel","setStart","collapse","removeAllRanges","addRange","importContent","validTags","fragment","insertAdjacentHTML","_this5","haxElement","textAlign","color","haxManager","resetManager","parseInt","toggleDialog","haxInputMixer","_this6","editExistingNode","selectStep","preview","configurebutton","_haxInputMixerOperation","_focusIn","local","localTarget","containerNode","isGridPlateElement","stopPropagation","_this7","_editModeChanged","_haxResolvePreviousElement","substring","getEffectiveChildNodes","_activeContainerNodeChanged","_activeNodeChanged","_this8","xoffset","yoffset","matchStyle","err2","currentStyle","getComputedStyle","marginLeft","async","run","contextcontainer","_escKeyPressed","preventDefault","_delKeyPressed","tagTest","commonAncestorContainer","startOffset","endOffset","_this9","_upKeyPressed","_downKeyPressed","_tabKeyPressed","stopImmediatePropagation","activeNodeTagName","_tabBackKeyPressed","previousSibling"],"mappings":"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"}