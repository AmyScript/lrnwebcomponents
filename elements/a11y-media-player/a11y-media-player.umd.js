!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@lrnwebcomponents/simple-colors/simple-colors.js"),require("@lrnwebcomponents/responsive-utility/responsive-utility.js"),require("screenfull/dist/screenfull.js"),require("@polymer/paper-menu-button/paper-menu-button.js"),require("@polymer/paper-listbox/paper-listbox.js"),require("@polymer/paper-item/paper-item.js"),require("@polymer/paper-icon-button/paper-icon-button.js"),require("@polymer/paper-toggle-button/paper-toggle-button.js"),require("@lrnwebcomponents/dropdown-select/dropdown-select.js"),require("@polymer/paper-slider/paper-slider.js"),require("@polymer/iron-icons/iron-icons.js"),require("@polymer/iron-icons/av-icons.js"),require("@polymer/paper-tooltip/paper-tooltip.js"),require("@polymer/iron-a11y-keys/iron-a11y-keys.js"),require("@lrnwebcomponents/simple-search/lib/simple-search-content.js"),require("@lrnwebcomponents/simple-search/simple-search.js"),require("@polymer/iron-resizable-behavior/iron-resizable-behavior.js"),require("@polymer/polymer/polymer-element.js")):"function"==typeof define&&define.amd?define(["exports","@lrnwebcomponents/simple-colors/simple-colors.js","@lrnwebcomponents/responsive-utility/responsive-utility.js","screenfull/dist/screenfull.js","@polymer/paper-menu-button/paper-menu-button.js","@polymer/paper-listbox/paper-listbox.js","@polymer/paper-item/paper-item.js","@polymer/paper-icon-button/paper-icon-button.js","@polymer/paper-toggle-button/paper-toggle-button.js","@lrnwebcomponents/dropdown-select/dropdown-select.js","@polymer/paper-slider/paper-slider.js","@polymer/iron-icons/iron-icons.js","@polymer/iron-icons/av-icons.js","@polymer/paper-tooltip/paper-tooltip.js","@polymer/iron-a11y-keys/iron-a11y-keys.js","@lrnwebcomponents/simple-search/lib/simple-search-content.js","@lrnwebcomponents/simple-search/simple-search.js","@polymer/iron-resizable-behavior/iron-resizable-behavior.js","@polymer/polymer/polymer-element.js"],t):t(e.A11YMediaPlayer={},e.simpleColors_js,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,e.polymerElement_js)}(this,function(e,t,n,a,o,i,r,l,s,c,u,d,p,h,y,m,v,b,g){"use strict";function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function w(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),e}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?S(e):t}function T(e,t,n){return(T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$(e)););return e}(e,t);if(a){var o=Object.getOwnPropertyDescriptor(a,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function L(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var M=function(e){function n(){return f(this,n),C(this,$(n).apply(this,arguments))}return _(n,t.SimpleColors),w(n,[{key:"connectedCallback",value:function(){T($(n.prototype),"connectedCallback",this).call(this)}},{key:"_hasAttribute",value:function(e){return null!=e}},{key:"_testAttribute",value:function(e,t){return e===t}},{key:"_addResponsiveUtility",value:function(e){window.ResponsiveUtility.requestAvailability(),window.dispatchEvent(new CustomEvent("responsive-element",{detail:void 0!==e?e:{element:this,attribute:"responsive-size",relativeToParent:!0}}))}},{key:"_getHHMMSS",value:function(e,t){t=void 0===t?e:t;var n=function(e){return e<10?"0"+e:e},a=function(e,a,o){return t>=a?n(Math.floor(e/a))+":":o};return a(e,3600,"")+a(e%3600,60,"00:")+n(Math.round(e%60))}}],[{key:"tag",get:function(){return"a11y-media-behaviors"}},{key:"properties",get:function(){return{autoplay:{type:Boolean,value:!1},cc:{type:Boolean,value:!1},height:{type:Number,value:null},isYoutube:{type:Boolean,computed:"_hasAttribute(youtubeId)"},lang:{type:String,value:"en"},loop:{type:Boolean,value:!1},manifest:{type:String,value:null},muted:{type:Boolean,value:!1},preload:{type:String,value:"metadata"},playbackRate:{type:Number,value:1},status:{type:String,value:"loading..."},selectedTrack:{type:Object,value:null},selectedTrackID:{type:Number,value:null},tracks:{type:Array,value:null},volume:{type:Number,value:70},youtubeId:{type:String,value:null},youTube:{type:Object,value:{}}}}},{key:"behaviors",get:function(){return[t.SimpleColors,ResponsiveUtility]}}]),n}();window.customElements.define(M.tag,M);var A=function(e){function t(){return f(this,t),C(this,$(t).apply(this,arguments))}return _(t,M),w(t,[{key:"_getNoHeight",value:function(e,t){return e&&null==t}},{key:"_noPlayButton",value:function(e,t){return e||t}},{key:"_getFullscreenButton",value:function(e){return!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&!e}},{key:"_getCompactControls",value:function(e){return this._testAttribute(e,"xs")||this._testAttribute(e,"sm")}},{key:"_showCustomCaptions",value:function(e,t,n,a){return this._hasCustomCaptions(e,t,n)&&a}},{key:"_hasCustomCaptions",value:function(e,t,n){return(e||t)&&n}},{key:"_isFlexLayout",value:function(e,t,n,a){return!(e||t||n||a)}}],[{key:"properties",get:function(){return{allowConcurrent:{type:Boolean,value:!1,reflectToAttribute:!0},audioLabel:{type:String,value:"audio"},audioOnly:{type:Boolean,value:!1,reflectToAttribute:!0},autoScrollLabel:{type:String,value:"auto-scrolling"},autoScrollIcon:{type:String,value:"swap-vert"},captionsIcon:{type:String,value:"av:closed-caption"},captionsLabel:{type:String,value:"closed captions"},captionsMenuLabel:{type:String,value:"Captions"},captionsMenuOff:{type:String,value:"Off"},compactControls:{type:Boolean,computed:"_getCompactControls(responsiveSize)",reflectToAttribute:!0},crossorigin:{type:String,value:null,reflectToAttribute:!0},darkTranscript:{type:Boolean,value:!1},disableFullscreen:{type:Boolean,value:!1},disableInteractive:{type:Boolean,value:!1},disableSearch:{type:Boolean,value:!1},disableScroll:{type:Boolean,value:!1},disablePrintButton:{type:Boolean,value:!1},flexLayout:{type:Boolean,computed:"_isFlexLayout(standAlone,hideTranscript,noHeight,stackedLayout)",reflectToAttribute:!0},forwardIcon:{type:String,value:"av:fast-forward"},forwardLabel:{type:String,value:"forward"},fullscreen:{type:Boolean,value:!1},fullscreenButton:{type:Boolean,computed:"_getFullscreenButton(disableFullscreen)",notify:!0},fullscreenIcon:{type:String,value:"fullscreen"},fullscreenLabel:{type:String,value:"fullscreen"},hasCaptions:{type:Boolean,value:!1},hasTranscript:{type:Boolean,value:!1},hideElapsedTime:{type:Boolean,value:!1},hideTimestamps:{type:Boolean,value:!1},loadingLabel:{type:String,value:"Loading..."},loopLabel:{type:String,value:"Loop Playback"},media:{type:Object,value:null},mediaTitle:{type:String,value:"",reflectToAttribute:!0},muteIcon:{type:String,value:"av:volume-up"},muteLabel:{type:String,value:"mute"},noHeight:{type:Boolean,computed:"_getNoHeight(audioOnly,thumbnailSrc)",reflectToAttribute:!0},noPlayButton:{type:Boolean,computed:"_noPlayButton(noHeight,isYoutube)"},pauseIcon:{type:String,value:"av:pause"},pauseLabel:{type:String,value:"pause"},playIcon:{type:String,value:"av:play-arrow"},playing:{type:Boolean,value:!1},playLabel:{type:String,value:"play"},printLabel:{type:String,value:"print transcript"},printIcon:{type:String,value:"print"},responsiveSize:{type:String,notify:!0,reflectToAttribute:!0},restartIcon:{type:String,value:"av:replay"},restartLabel:{type:String,value:"restart"},rewindIcon:{type:String,value:"av:fast-rewind"},rewindLabel:{type:String,value:"backward"},search:{type:Object,value:null},searchIcon:{type:String,value:"search"},searchLabel:{type:String,value:"search transcript"},searchNextButtonIcon:{type:String,value:"arrow-forward"},searchNextButtonLabel:{type:String,value:"next result"},searchNextIcon:{type:String,value:"arrow-forward"},searchNextLabel:{type:String,value:"next result"},searchPrevButtonIcon:{type:String,value:"arrow-back"},searchPrevButtonLabel:{type:String,value:"previous result"},searchPrevIcon:{type:String,value:"arrow-back"},searchPrevLabel:{type:String,value:"previous result"},settingsIcon:{type:String,value:"settings"},settingsLabel:{type:String,value:"settings"},showCustomCaptions:{type:Boolean,computed:"_showCustomCaptions(isYoutube,audioOnly,hasCaptions,cc)"},skipTranscriptLink:{type:String,value:"Skip the transcript."},speedLabel:{type:String,value:"Speed %"},stackedLayout:{type:Boolean,value:!1},standAlone:{type:Boolean,value:!1,reflectToAttribute:!0},target:{type:Object,value:null},thumbnailSrc:{type:String,value:null,reflectToAttribute:!0},transcriptIcon:{type:String,value:"description"},transcriptLabel:{type:String,value:"transcript"},transcriptMenuLabel:{type:String,value:"Transcript"},uiLanguage:{type:String,value:"en"},unmuteIcon:{type:String,value:"av:volume-off"},unmuteLabel:{type:String,value:"unmute"},videoLabel:{type:String,value:"video"},volumeLabel:{type:String,value:"volume"},width:{type:String,value:null}}}},{key:"behaviors",get:function(){return[M]}},{key:"tag",get:function(){return"a11y-media-player-properties"}}]),t}();function I(){var e=L(['\n      <style>\n        :host {\n          margin: 0;\n          padding: 0;\n        }\n        :host #button {\n          margin: 0;\n          padding: 8px;\n          line-height: 1;\n          border: none;\n          transition: color 0.25s;\n          color: var(--a11y-media-button-color);\n          background-color: var(--a11y-media-button-bg-color);\n        }\n        :host([toggle]) #button {\n          color: var(--a11y-media-button-toggle-color);\n          background-color: var(--a11y-media-button-toggle-bg-color);\n        }\n        :host([toggle]:active) #button,\n        :host([toggle]:focus) #button,\n        :host([toggle]:hover) #button,\n        :host(:active) #button,\n        :host(:focus) #button,\n        :host(:hover) #button {\n          cursor: pointer;\n          color: var(--a11y-media-button-hover-color);\n          background-color: var(--a11y-media-button-hover-bg-color);\n        }\n        :host .sr-only {\n          position: absolute;\n          left: -99999;\n          top: 0;\n          height: 0;\n          width: 0;\n          overflow: hidden;\n        }\n        :host paper-tooltip {\n          z-index: 100;\n        }\n        iron-icon {\n          display: inline-block;\n        }\n      </style>\n      <button\n        id="button"\n        aria-label$="[[label]]"\n        aria-pressed$="[[toggle]]"\n        aria-role="button"\n        controls="[[controls]]"\n        disabled$="[[disabled]]"\n        on-tap="_buttonTap"\n        tabindex="0"\n        toggle$="[[toggle]]"\n      >\n        <iron-icon icon="[[icon]]"></iron-icon>\n      </button>\n      <paper-tooltip for="button">[[label]]</paper-tooltip>\n    ']);return I=function(){return e},e}window.customElements.define(A.tag,A);var P=function(e){function t(){return f(this,t),C(this,$(t).apply(this,arguments))}return _(t,A),w(t,[{key:"connectedCallback",value:function(){T($(t.prototype),"connectedCallback",this).call(this)}},{key:"ready",value:function(){T($(t.prototype),"ready",this).call(this),this.__target=this.$.button}},{key:"_buttonTap",value:function(){this.dispatchEvent(new CustomEvent("tap",{detail:this}))}}],[{key:"properties",get:function(){return{controls:{type:String,value:"video"},icon:{type:String,value:null},label:{type:String,value:null},toggle:{type:Boolean,value:!1,reflectToAttribute:!0},disabled:{type:Boolean,value:null}}}},{key:"tag",get:function(){return"a11y-media-button"}},{key:"behaviors",get:function(){return[A]}},{key:"template",get:function(){return g.html(I())}}]),t}();function E(){var e=L(['\n      <style is="custom-style">\n        :host {\n          display: block;\n          width: 100%;\n          max-width: 100%;\n          position: relative;\n          height: 44px;\n          color: var(--a11y-media-color);\n          background-color: var(--a11y-media-bg-color);\n          --paper-listbox-background-color: var(--a11y-media-controls-bg-color);\n          --paper-listbox-color: var(--a11y-media-controls-color);\n          --paper-listbox: {\n            padding: 0;\n          };\n          --paper-menu-button-dropdown-background: var(--a11y-media-controls-bg-color);\n          --paper-menu-button: {\n            background-color: var(--a11y-media-controls-bg-color);\n            color: var(--a11y-media-controls-color);\n          };\n          --paper-menu-button-dropdown: {\n            background-color: var(--a11y-media-controls-bg-color);\n            color: var(--a11y-media-controls-color);\n            margin-top: 0 !important;\n            margin-bottom: 0 !important;\n          };\n          --paper-item-selected: {\n            color: var(--a11y-media-controls-hover-color);\n          };\n          --paper-item-focused: {\n            color: var(--a11y-media-controls-hover-color);\n          };\n          --primary-text-color: var(--a11y-media-controls-color);\n        }\n        :host > #controls-left {\n          position: absolute;\n          left: 0;\n          min-width: 200px;\n        }\n        :host > #controls-right {\n          position: absolute;\n          right: 0;\n          top: -2px;\n        }\n        :host paper-menu-button,\n        :host dropdown-select {\n          padding: 0;\n        }\n        :host paper-icon-button {\n          background-color: var(--a11y-media-controls-bg-color);\n          color: var(--a11y-media-controls-color);\n        }\n        :host paper-icon-button:active,\n        :host paper-icon-button:focus,\n        :host paper-icon-button:hover {\n          background-color: var(--a11y-media-controls-bg-color);\n          color: var(--a11y-media-controls-color);\n        }\n        :host paper-item {\n          min-height: 40;\n        }\n        :host paper-slider {\n          @apply --a11y-media-slider;\n        }\n        :host .play-status,\n        :host paper-icon-button {\n          border: none;\n          position: relative;\n        }\n        :host .play-status {\n          font-size: 85%;\n        }\n        :host .play-status.control-bar {\n          padding: 8px 13px 8px;\n        }\n        :host([hide-play-status]) .play-status {\n          display: none;\n        }\n        :host(:not([has-captions])) .captions {\n          display: none;\n        }\n        :host(:not([has-transcript])) .transcript,\n        :host(.stand-alone) .transcript {\n          display: none;\n        }\n        :host .setting {\n          display: flex;\n          justify-content: space-between;\n          width: 100%;\n        }\n        :host .setting-text {\n          min-width: 100px;\n        }\n        :host .setting-control {\n          max-width: 100px;\n        }\n        :host .setting-slider {\n          width: 130px;\n          margin-left: -15px;\n          margin-right: -15px;\n          @apply --a11y-media-slider;\n        }\n        :host #speed {\n          --paper-slider-knob-start-color: var(--a11y-media-accent-color);\n          --paper-slider-knob-start-border-color: var(--a11y-media-accent-color);\n          --paper-slider-knob-end-color: var(--a11y-media-accent-color);\n          --paper-slider-knob-end-border-color: var(--a11y-media-accent-color);\n        }\n        :host #showvolume {\n          display: inline;\n          position: relative;\n        }\n        :host #volume {\n          z-index: 1;\n          position: absolute;\n          left: 30px;\n          top: -5px;\n          width: 0;\n          overflow: hidden;\n          transition: width 0.5s;\n          z-index: 3;\n          background-color: var(--a11y-media-bg-color);\n          --paper-slider-knob-end-color: var(--a11y-media-accent-color);\n          --paper-slider-knob-end-border-color: var(--a11y-media-accent-color);\n\n        }\n        :host #volume:active,\n        :host #volume:focus,\n        :host #volume:hover,\n        :host #volume.focus,\n        :host #showvolume:active #volume,\n        :host #showvolume:focus #volume,\n        :host #showvolume:hover #volume {\n          overflow: visible;\n          width: 100px;\n        }\n        :host([responsive-size="xs"]) #volume:active,\n        :host([responsive-size="xs"]) #volume:focus,\n        :host([responsive-size="xs"]) #volume:hover,\n        :host([responsive-size="xs"]) #volume.focus,\n        :host([responsive-size="xs"]) #showvolume:active #volume,\n        :host([responsive-size="xs"]) #showvolume:focus #volume,\n        :host([responsive-size="xs"]) #showvolume:hover #volume {\n          top: -35px\n          border-radius: 4px;\n        }\n        :host .sr-only {\n          position: absolute;\n          left: -99999;\n          top: 0;\n          height: 0;\n          width: 0;\n          overflow: hidden;\n        }\n      </style>\n      <div id="controls-left">\n        <a11y-media-button\n          icon="[[playPause.icon]]"\n          label="[[playPause.label]]"\n          on-tap="_onButtonTap"\n        ></a11y-media-button>\n        <a11y-media-button\n          disabled$="[[compactControls]]"\n          hidden$="[[compactControls]]"\n          icon="[[rewindIcon]]"\n          label="[[rewindLabel]]"\n          on-tap="_onButtonTap"\n        ></a11y-media-button>\n        <a11y-media-button\n          disabled$="[[compactControls]]"\n          hidden$="[[compactControls]]"\n          icon="[[forwardIcon]]"\n          label="[[forwardLabel]]"\n          on-tap="_onButtonTap"\n        ></a11y-media-button>\n        <a11y-media-button\n          disabled$="[[compactControls]]"\n          hidden$="[[compactControls]]"\n          icon="[[restartIcon]]"\n          label="[[restartLabel]]"\n          on-tap="_onButtonTap"\n        ></a11y-media-button>\n        <div id="showvolume">\n          <a11y-media-button\n            id="mute"\n            icon="[[muteUnmute.icon]]"\n            label="[[muteUnmute.label]]"\n            on-tap="_onButtonTap"\n          ></a11y-media-button>\n          <span id="volume-slider-label" class="sr-only">[[volumeLabel]]</span>\n          <paper-slider\n            aria-labelledby="volume-slider-label"\n            id="volume"\n            min="0"\n            max="100"\n            on-change="_onSettingsChanged"\n            pin=""\n            step="10"\n            value$="[[volume]]"\n          ></paper-slider>\n        </div>\n        <span class="play-status control-bar" hidden$="[[compactControls]]">\n          <span id="statbar"></span>\n        </span>\n      </div>\n      <div id="controls-right">\n        <a11y-media-button\n          class="captions"\n          hidden="[[!hasCaptions]]"\n          icon="[[captionsIcon]]"\n          label="[[captionsLabel]]"\n          on-tap="_onButtonTap"\n          toggle="[[cc]]"\n        >\n        </a11y-media-button>\n        <a11y-media-button\n          class="transcript"\n          controls="transcript"\n          hidden$="[[_showTranscriptButton(compactControls,standAlone)]]"\n          disabled$="[[_showTranscriptButton(compactControls,standAlone)]]"\n          icon="[[transcriptIcon]]"\n          label="[[transcriptLabel]]"\n          on-tap="_onButtonTap"\n          toggle="[[!hideTranscript]]"\n        >\n        </a11y-media-button>\n        <paper-menu-button\n          id="settings"\n          allow-outside-scroll=""\n          horizontal-align="right"\n          ignore-select=""\n          on-change="_onSettingsChanged"\n          on-iron-activate="_handleSettingsActivate"\n          on-iron-select="_handleSettingsSelect"\n          vertical-align="bottom"\n        >\n          <paper-icon-button\n            icon$="[[settingsIcon]]"\n            slot="dropdown-trigger"\n            alt="[[settingsLabel]]"\n          ></paper-icon-button>\n          <paper-listbox id="settingslist" slot="dropdown-content">\n            <paper-item class="captions">\n              <div class="setting">\n                <div class="setting-text">[[captionsMenuLabel]]</div>\n                <div class="setting-control">\n                  <dropdown-select\n                    id="tracks"\n                    no-label-float=""\n                    on-change="_handleTrackChange"\n                    value=""\n                  >\n                    <paper-item value="">[[captionsMenuOff]]</paper-item>\n                    <template is="dom-repeat" items="{{tracks}}" as="option">\n                      <paper-item value$="{{option.value}}"\n                        >{{option.text}}</paper-item\n                      >\n                    </template>\n                  </dropdown-select>\n                </div>\n              </div>\n            </paper-item>\n            <paper-item hidden$="[[!compactControls]]" class="transcript">\n              <div class="setting">\n                <div id="transcript-label" class="setting-text">\n                  [[transcriptMenuLabel]]\n                </div>\n                <div class="setting-control">\n                  <paper-toggle-button\n                    id="transcript-toggle"\n                    aria-labelledby="transcript-label"\n                    checked$="[[!hideTranscript]]"\n                    controls="transcript"\n                    disabled$="[[!compactControls]]"\n                  >\n                  </paper-toggle-button>\n                </div>\n              </div>\n            </paper-item>\n            <paper-item>\n              <div class="setting">\n                <div id="speed-label" class="setting-text">[[speedLabel]]</div>\n                <div class="setting-control">\n                  <paper-slider\n                    id="speed"\n                    aria-labelledby="speed-label"\n                    class="setting-slider"\n                    label="tracks"\n                    min="0.5"\n                    max="4"\n                    pin=""\n                    step="0.5"\n                    tab-index="-1"\n                    value$="[[playbackRate]]"\n                  ></paper-slider>\n                </div>\n              </div>\n            </paper-item>\n            <paper-item>\n              <div class="setting">\n                <div id="loop-label" class="setting-text">[[loopLabel]]</div>\n                <div class="setting-control">\n                  <paper-toggle-button\n                    id="loop"\n                    aria-labelledby="loop-label"\n                    checked$="[[loop]]"\n                  ></paper-toggle-button>\n                </div>\n              </div>\n            </paper-item>\n            <paper-item hidden$="[[!compactControls]]">\n              <span class="play-status settings-menu">\n                <span id="statmenu"></span>\n              </span>\n            </paper-item>\n          </paper-listbox>\n        </paper-menu-button>\n        <paper-tooltip for="settings">[[settingsLabel]]</paper-tooltip>\n        <template is="dom-if" if="[[fullscreenButton]]">\n          <template is="dom-if" if="[[!noHeight]]">\n            <a11y-media-button\n              icon="[[fullscreenIcon]]"\n              label="[[fullscreenLabel]]"\n              on-tap="_onButtonTap"\n              toggle="[[fullscreen]]"\n              step="1"\n            >\n            </a11y-media-button>\n          </template>\n        </template>\n      </div>\n    ']);return E=function(){return e},e}window.customElements.define(P.tag,P);var B=function(e){function t(){return f(this,t),C(this,$(t).apply(this,arguments))}return _(t,A),w(t,[{key:"connectedCallback",value:function(){T($(t.prototype),"connectedCallback",this).call(this);this._addResponsiveUtility({element:this,attribute:"responsive-size",relativeToParent:!0,sm:300,md:600,lg:900,xl:1200})}},{key:"ready",value:function(){T($(t.prototype),"ready",this).call(this);var e=this;e.$.mute.$.button.onfocus=function(){e.$.volume.classList.add("focus")},e.$.mute.$.button.onblur=function(){e.$.volume.classList.remove("focus")}}},{key:"setStatus",value:function(e){this.$.statbar.innerText=e,this.$.statmenu.innerText=e}},{key:"setTracks",value:function(e){this.set("tracks",[]),this.set("tracks",e.slice(0))}},{key:"_getPlayPause",value:function(e,t,n,a,o){return e?{label:t,icon:n}:{label:a,icon:o}}},{key:"_getMuteUnmute",value:function(e,t,n,a,o){return e?{label:a,icon:o}:{label:t,icon:n}}},{key:"_handleTrackChange",value:function(e){null!==this.__selectedTrack&&(""!==e.detail.value?(this.dispatchEvent(new CustomEvent("select-track",{detail:{control:this,value:e.detail.value}})),this.dispatchEvent(new CustomEvent("toggle-cc",{detail:{control:this,value:!0}}))):this.dispatchEvent(new CustomEvent("toggle-cc",{detail:{control:this,value:!1}})))}},{key:"_handleSettingsSelect",value:function(e){}},{key:"_handleSettingsActivate",value:function(e){}},{key:"_onButtonTap",value:function(e){this.dispatchEvent(new CustomEvent("controls-change",{detail:e.detail}))}},{key:"_onSettingsChanged",value:function(e){this.dispatchEvent(new CustomEvent("controls-change",{detail:e.target}))}},{key:"_showTranscriptButton",value:function(e,t){return e||t}}],[{key:"properties",get:function(){return{playPause:{type:Object,computed:"_getPlayPause(playing,pauseLabel,pauseIcon,playLabel,playIcon)"},muteUnmute:{type:Object,computed:"_getMuteUnmute(muted,muteLabel,muteIcon,unmuteLabel,unmuteIcon)"}}}},{key:"tag",get:function(){return"a11y-media-controls"}},{key:"behaviors",get:function(){return[A]}},{key:"template",get:function(){return g.html(E())}}]),t}();function j(){var e=L(['\n      <style>\n        :host {\n          height: 100%;\n        }\n        #video {\n          width: 100%;\n          max-width: 100%;\n          max-height: 80vh;\n        }\n      </style>\n      <video\n        id="video"\n        autoplay$="[[autoplay]]"\n        crossorigin$="[[crossorigin]]"\n        hidden$="[[audioOnly]]"\n        lang$="[[lang]]"\n        on-loadedmetadata="_handleMetadata"\n        src$="[[manifest]]"\n        preload="metadata"\n      >\n        HTML5 video not supported\n      </video>\n      <audio\n        id="audio"\n        autoplay$="[[autoplay]]"\n        crossorigin$="[[crossorigin]]"\n        hidden$="[[!audioOnly]]"\n        lang$="[[lang]]"\n        on-loadedmetadata="_handleMetadata"\n        src$="[[manifest]]"\n        preload="metadata"\n      >\n        HTML5 audio not supported\n      </audio>\n    ']);return j=function(){return e},e}window.customElements.define(B.tag,B);var O=function(e){function t(){return f(this,t),C(this,$(t).apply(this,arguments))}return _(t,A),w(t,[{key:"connectedCallback",value:function(){T($(t.prototype),"connectedCallback",this).call(this)}},{key:"ready",value:function(){T($(t.prototype),"ready",this).call(this);this.media=void 0===this.$.video||this.audioOnly?this.$.audio:this.$.video}},{key:"_handleMetadata",value:function(){this.duration=this.media.duration>0?this.media.duration:0,this.tracks=[],this.volume=this.muted?0:Math.max(this.volume,10),this.seekable=this.media.seekable,this.setVolume(this.volume),this.setMute(this.muted),this.setCC(this.cc),this.setLoop(this.loop),this.setPlaybackRate(this.playbackRate),this.aspectRatio=this.media.videoWidth/this.media.videoHeight,this.dispatchEvent(new CustomEvent("media-loaded",{detail:this}))}},{key:"getBufferedTime",value:function(){return this.media.buffered.length>0?this.media.buffered.end(0):this.getCurrentTime()}},{key:"getCurrentTime",value:function(){return this.media.currentTime}},{key:"play",value:function(){this.media.play()}},{key:"pause",value:function(){this.media.pause()}},{key:"selectTrack",value:function(e){this.selectedTrack=this.media.textTracks[e];for(var t=0;t<this.media.textTracks.length;t++)parseInt(e)===t?this.media.textTracks[t].mode="showing":null!==this.media.textTracks[t]&&(this.media.textTracks[t].mode="hidden")}},{key:"stop",value:function(){this.pause(),this.seek(0)}},{key:"restart",value:function(){this.seek(0),this.play()}},{key:"seek",value:function(e){this.media.currentTime=e}},{key:"setCC",value:function(e){this.media.cc=!0===e,void 0!==this.selectedTrack&&1==e?(this.selectedTrack.mode="showing",this.$.video.textTracks.value=this.selectedTrackId):void 0!==this.selectedTrack&&null!==this.selectedTrack&&(this.selectedTrack.mode="hidden",this.$.video.textTracks.value="")}},{key:"setVolume",value:function(e){this.media.volume=e/100}},{key:"setPlaybackRate",value:function(e){this.media.playbackRate=null!==e?e:1}},{key:"setLoop",value:function(e){this.media.loop=!0===e}},{key:"setMute",value:function(e){this.media.muted=e}}],[{key:"properties",get:function(){return{controls:{type:String,value:"video"},icon:{type:String,value:null},label:{type:String,value:null},toggle:{type:Boolean,value:!1,reflectToAttribute:!0},disabled:{type:Boolean,value:null}}}},{key:"tag",get:function(){return"a11y-media-loader"}},{key:"behaviors",get:function(){return[A11yMediaBehaviors]}},{key:"template",get:function(){return g.html(j())}}]),t}();function z(){var e=L(['\n      <style>\n        :host {\n          display: block;\n          z-index: 2;\n          opacity: 1;\n          transition: opacity 0.5s;\n          position: absolute;\n          height: 100%;\n        }\n        :host([disabled]:not([audio-only])),\n        :host([playing]:not([audio-only])) {\n          opacity: 0;\n        }\n        :host,\n        :host #thumbnail,\n        :host #background,\n        :host #button {\n          width: 100%;\n          max-height: 80vh;\n          top: 0;\n          left: 0;\n          opacity: 1;\n          transition: opacity 0.5s;\n        }\n        :host #thumbnail,\n        :host #background,\n        :host #button {\n          position: absolute;\n          height: 100%;\n          padding: 0;\n          margin: 0;\n          border: none;\n        }\n        :host([audio-only][thumbnail-src][playing]) #button > *:not(#thumbnail),\n        :host([audio-only][thumbnail-src][disabled])\n          #button\n          > *:not(#thumbnail) {\n          opacity: 0;\n        }\n        :host #thumbnail {\n          height: auto;\n          overflow: hidden;\n        }\n        :host #button {\n          overflow: hidden;\n          background: transparent;\n        }\n        :host #button:hover {\n          cursor: pointer;\n        }\n        :host #background {\n          opacity: 0.3;\n          background: var(--a11y-play-button-bg-color);\n        }\n        :host #button:focus #background,\n        :host #button:hover #background {\n          background: var(--a11y-play-button-focus-bg-color);\n          opacity: 0.1;\n        }\n        :host #arrow {\n          stroke: #ffffff;\n          fill: #000000;\n        }\n        :host #text {\n          fill: #ffffff;\n        }\n        :host .sr-only {\n          font-size: 0;\n        }\n        @media print {\n          :host(:not([thumbnail-src])),\n          :host #background,\n          :host #svg {\n            display: none;\n          }\n        }\n      </style>\n      <button\n        id="button"\n        aria-pressed$="[[playing]]"\n        aria-hidden$="[[disabled]]"\n        tabindex="0"\n        disabled$="[[disabled]]"\n        controls="video"\n        on-tap="_buttonTap"\n        title$="[[label]]"\n      >\n        <div id="background"></div>\n        <svg\n          id="svg"\n          xmlns="http://www.w3.org/2000/svg"\n          viewBox="0 0 200 200"\n          width="30%"\n          height="30%"\n          opacity="0.7"\n        >\n          <g>\n            <polygon\n              id="arrow"\n              points="30,20 30,180 170,100"\n              fill="#000000"\n              stroke="#ffffff"\n              stroke-width="15px"\n            ></polygon>\n            <text\n              id="text"\n              class="sr-only"\n              x="50"\n              y="115"\n              fill="#ffffff"\n              font-size="30px"\n            >\n              [[label]]\n            </text>\n          </g>\n        </svg>\n      </button>\n    ']);return z=function(){return e},e}window.customElements.define(O.tag,O);var H=function(e){function t(){return f(this,t),C(this,$(t).apply(this,arguments))}return _(t,A),w(t,[{key:"connectedCallback",value:function(){if(T($(t.prototype),"connectedCallback",this).call(this),this.$.text.innerText=this.playLabel,this.audioOnly)var e=this,n=this.$.thumbnail,a=setInterval(function(){if(null!=n&&n.naturalWidth){clearInterval(a);var t=n.naturalHeight/n.naturalWidth*100;e.style.height=t+"%",e.dispatchEvent(new CustomEvent("thumbnail-aspect",{detail:t}))}},10)}},{key:"ready",value:function(){T($(t.prototype),"ready",this).call(this),this.__target=this.$.button}},{key:"_getPlaying",value:function(e,t,n){return e?t:n}},{key:"_buttonTap",value:function(){this.dispatchEvent(new CustomEvent("controls-change",{detail:this}))}}],[{key:"properties",get:function(){return{label:{type:String,computed:"_getPlaying(playing,pauseLabel,playLabel)"},pauseLabel:{type:String,value:"play"},playLabel:{type:String,value:"play"},disabled:{type:Boolean,value:!1},playing:{type:Boolean,value:!1}}}},{key:"tag",get:function(){return"a11y-media-play-button"}},{key:"behaviors",get:function(){return[A]}},{key:"template",get:function(){return g.html(z())}}]),t}();function R(){var e=L(['\n      <style is="custom-style">\n        :host {\n          cursor: default;\n          display: table-row;\n          width: 100%;\n          color: var(--a11y-media-transcript-color);\n          background-color: var(--a11y-media-transcript-bg-color);\n          transition: color 0.25s, background-color 0.25s;\n        }\n        :host([hide-timestamps]) {\n          display: inline;\n        }\n        :host(:not([active]):not([disabled]):active),\n        :host(:not([active]):not([disabled]):focus),\n        :host(:not([active]):not([disabled]):hover) {\n          cursor: pointer;\n          color: var(--a11y-media-transcript-focused-cue-color);\n          background-color: var(--a11y-media-transcript-focused-cue-bg-color);\n          outline: 1px dotted var(--a11y-media-transcript-focused-cue-color);\n          @apply --a11y-media-transcript-focused-cue;\n        }\n        :host([active]) {\n          color: var(--a11y-media-transcript-active-cue-color);\n          background-color: var(--a11y-media-transcript-active-cue-bg-color);\n          @apply --a11y-media-transcript-active-cue;\n        }\n        :host #text {\n          display: table-cell;\n          width: 100%;\n          line-height: 200%;\n        }\n        :host([hide-timestamps]) #text {\n          display: inline;\n        }\n        :host #time {\n          display: table-cell;\n          font-size: 80%;\n          padding: 0 16px 0 0;\n          white-space: nowrap;\n          font-family: monospace;\n        }\n        :host([hide-timestamps]) #time {\n          display: none;\n        }\n        :host simple-search-content {\n          --simple-search-match-text-color: var(\n            --a11y-media-transcript-match-color\n          );\n          --simple-search-match-bg-color: var(\n            --a11y-media-transcript-match-bg-color\n          );\n          --simple-search-match-border-color: var(\n            --a11y-media-transcript-match-border-color\n          );\n          --simple-search-match: {\n            border: none;\n            border-radius: 4px;\n            font-weight: normal;\n          }\n        }\n        @media print {\n          :host,\n          :host([active]),\n          :host(:not([active]):not([disabled]):active),\n          :host(:not([active]):not([disabled]):focus),\n          :host(:not([active]):not([disabled]):hover) {\n            color: #000000;\n            background-color: #ffffff;\n          }\n        }\n      </style>\n      <span id="time">[[cue.start]] - [[cue.end]]</span>\n      <span id="text">\n        <simple-search-content id="content" content="[[cue.text]]"\n          >[[cue.text]]</simple-search-content\n        >\n      </span>\n    ']);return R=function(){return e},e}window.customElements.define(H.tag,H);var q=function(e){function t(){return f(this,t),C(this,$(t).apply(this,arguments))}return _(t,A),w(t,[{key:"connectedCallback",value:function(){T($(t.prototype),"connectedCallback",this).call(this)}},{key:"ready",value:function(){T($(t.prototype),"ready",this).call(this);var e=this.search;this.disabled||(this.__target=this,this.setAttribute("aria-role","button"),this.setAttribute("controls",this.mediaId)),this.disableSearch||void 0===this.search||null===this.search||this.$.content.enableSearch(e),this.addEventListener("click",this._handleTap)}},{key:"_getActiveCue",value:function(e,t){return!(null===t||!t.includes(e.order.toString()))}},{key:"_handleTap",value:function(e){this.dispatchEvent(new CustomEvent("tap",{detail:this.cue.seek}))}}],[{key:"properties",get:function(){return{active:(e={type:Boolean,reflectToAttribute:!0,computed:"_getActiveCue(cue,activeCues)",notify:!0},t="reflectToAttribute",n=!0,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e),activeCues:{type:Array,value:null,notify:!0},cue:{type:Array,value:null},disabled:{type:Boolean,value:!1},text:{type:String,value:""}};var e,t,n}},{key:"tag",get:function(){return"a11y-media-transcript-cue"}},{key:"behaviors",get:function(){return[A]}},{key:"template",get:function(){return g.html(R())}}]),t}();function U(){var e=L(['\n      <style is="custom-style" include="simple-colors">\n        :host {\n          display: block;\n          padding: 15px;\n          color: var(--a11y-media-transcript-color);\n          background-color: var(--a11y-media-transcript-bg-color);\n        }\n        :host([hidden]) {\n          display: none;\n        }\n        :host #inner {\n          width: 100%;\n          display: none;\n        }\n        :host #inner[active] {\n          display: table;\n          width: 100%;\n        }\n        :host #inner[active][hideTimestamps] {\n          display: block;\n        }\n        :host .sr-only:not(:focus) {\n          position: absolute;\n          left: -99999;\n          top: 0;\n          height: 0;\n          width: 0;\n          overflow: hidden;\n        }\n        @media print {\n          :host {\n            padding: 0 15px 5px;\n            color: #000;\n            background-color: #ffffff;\n            border-top: 1px solid #aaa;\n          }\n        }\n      </style>\n      <a id="transcript-desc" href="#bottom" class="sr-only"\n        >[[skipTranscriptLink]]</a\n      >\n      <template id="tracks" is="dom-repeat" items="{{tracks}}" as="track">\n        <div\n          id="inner"\n          class="transcript-from-track"\n          lang="{{track.language}}"\n          active$="[[track.active]]"\n        >\n          <template is="dom-repeat" items="{{track.cues}}" as="cue">\n            <a11y-media-transcript-cue\n              accent-color$="[[accentColor]]"\n              active-cues$="[[activeCues]]"\n              controls$="[[mediaId]]"\n              cue$="{{cue}}"\n              disabled$="[[disableInteractive]]"\n              disable-search$="[[disableSearch]]"\n              hide-timestamps$="[[hideTimestamps]]"\n              on-tap="_handleCueSeek"\n              order$="{{cue.order}}"\n              role="button"\n              search="[[search]]"\n              tabindex="0"\n            >\n            </a11y-media-transcript-cue>\n          </template>\n        </div>\n      </template>\n      <div id="bottom" class="sr-only"></div>\n    ']);return U=function(){return e},e}function N(){var e=L(["\n        <h1>Transcript</h1>\n      "]);return N=function(){return e},e}function Y(){var e=L(["\n        <style>\n          a11y-media-transcript-cue {\n            display: table-row;\n            background-color: #fff;\n            color: #000;\n          }\n          a11y-media-transcript-cue[hide-timestamps],\n          a11y-media-transcript-cue[hide-timestamps] #text {\n            display: inline;\n          }\n          a11y-media-transcript-cue #text {\n            display: table-cell;\n            line-height: 200%;\n          }\n          a11y-media-transcript-cue #time {\n            display: table-cell;\n            font-size: 80%;\n            padding: 0 16px;\n            white-space: nowrap;\n            font-family: monospace;\n          }\n          a11y-media-transcript-cue[hide-timestamps] #time {\n            display: none;\n          }\n          a11y-media-transcript-cue [matched] {\n            background-color: #fff;\n            color: #eee;\n            padding: 3px 4px;\n            border-radius: 3px;\n          }\n        </style>\n      "]);return Y=function(){return e},e}window.customElements.define(q.tag,q);var D=function(e){function t(){return f(this,t),C(this,$(t).apply(this,arguments))}return _(t,A),w(t,[{key:"connectedCallback",value:function(){T($(t.prototype),"connectedCallback",this).call(this),this.dispatchEvent(new CustomEvent("transcript-ready",{detail:this}))}},{key:"ready",value:function(){T($(t.prototype),"ready",this).call(this)}},{key:"setMedia",value:function(e){this.media=e,this.dispatchEvent(new CustomEvent("transcript-ready",{detail:this}))}},{key:"toggleHidden",value:function(e){var t=document.getElementById("inner");null!=t&&t.querySelector("a11y-media-transcript-cue[active]"),null!=t&&t.querySelector("a11y-media-transcript-cue");e=void 0!==e?e:this.hidden,this.hidden=e}},{key:"print",value:function(e){var t=this.shadowRoot.querySelector("#inner[active]").cloneNode(!0),n=g.html(Y()),a=g.html(N());if(void 0!==e&&(a.innerHTML=e),null!==t&void 0!==t){var o=window.open("","","left=0,top=0,width=552,height=477,toolbar=0,scrollbars=0,status =0");o.document.body.appendChild(n),o.document.body.appendChild(a),o.document.body.appendChild(t),o.document.close(),o.focus(),o.print(),o.close()}}},{key:"setTracks",value:function(e){this.set("tracks",e.slice(0)),this.notifyPath("tracks"),void 0!==this.tracks&&this.tracks.length>0&&this.$.tracks.render()}},{key:"setActiveCues",value:function(e){var t=null!==this.shadowRoot.querySelector("#inner")&&void 0!==this.shadowRoot.querySelector("#inner")?this.shadowRoot.querySelector("#inner").offsetTop:0,n=this.shadowRoot.querySelector("#inner a11y-media-transcript-cue[active]");if(this.set("activeCues",e.slice(0)),!this.disableScroll&&null!==n&void 0!==n){!function e(t,n,a){if(!(a<=0)){var o=(n-t.scrollTop)/a*10;setTimeout(function(){t.scrollTop=t.scrollTop+o,t.scrollTop!==n&&e(t,n,a-10)},10)}}(this,n.offsetTop-t,250)}}},{key:"_getTabIndex",value:function(e){return e?-1:0}},{key:"_getRole",value:function(e){return e?null:"button"}},{key:"_handleCueSeek",value:function(e){this.disableInteractive||this.dispatchEvent(new CustomEvent("cue-seek",{detail:e.detail}))}},{key:"setActiveTranscript",value:function(e){if(void 0!==this.tracks&&null!==this.tracks)for(var t=0;t<this.tracks.length;t++)parseInt(e)===t?(this.selectedTranscript=parseInt(e),this.set("tracks."+t+".active",!0)):null!==this.tracks[t]&&this.set("tracks."+t+".active",!1),this.notifyPath("tracks."+t+".active");this.$.tracks.render()}}],[{key:"properties",get:function(){return{activeCues:{type:Array,value:null,reflectToAttribute:!0,notify:!0},lang:{type:String,value:"en",reflectToAttribute:!0},mediaId:{type:String,value:null},tabIndex:{type:Number,computed:"_getTabIndex(disableInteractive)"},role:{type:Number,computed:"_getRole(disableInteractive)"},selectedTranscript:{type:String,value:"0"},tracks:{type:Array,value:null}}}},{key:"tag",get:function(){return"a11y-media-transcript"}},{key:"behaviors",get:function(){return[A]}},{key:"template",get:function(){return g.html(U())}}]),t}();function F(){var e=L(['\n      <style is="custom-style" include="simple-colors">\n        :host {\n          background-color: var(--a11y-media-transcript-bg-color);\n          color: var(--a11y-media-transcript-text-color);\n          --a11y-media-button-color: var(--a11y-media-transcript-color);\n          --a11y-media-button-bg-color: var(--a11y-media-transcript-bg-color);\n          --a11y-media-button-toggle-color: var(\n            --a11y-media-transcript-accent-color\n          );\n          --a11y-media-button-hover-color: var(\n            --a11y-media-transcript-faded-accent-color\n          );\n          --a11y-media-button-hover-bg-color: var(\n            --a11y-media-transcript-bg-color\n          );\n          --simple-search-input-color: var(--a11y-media-transcript-color);\n          --simple-search-input-line-color: var(\n            --a11y-media-transcript-accent-color\n          );\n          --simple-search-input-placeholder-color: var(\n            --a11y-media-transcript-color\n          );\n          --simple-search-button-color: var(\n            --a11y-media-transcript-accent-color\n          );\n          --simple-search-button-hover-color: var(\n            --a11y-media-transcript-faded-accent-color\n          );\n          --simple-search-button-bg-color: var(\n            --a11y-media-transcript-bg-color\n          );\n          --simple-search-button-border-color: var(\n            --a11y-media-transcript-bg-color\n          );\n          --simple-search-button-hover-border-color: var(\n            --a11y-media-transcript-bg-color\n          );\n          --simple-search-button-disabled-color: var(\n            --simple-colors-default-theme-grey-5\n          );\n          --simple-search-button-disabled-bg-color: var(\n            --simple-colors-default-theme-grey-2\n          );\n          --simple-search-button-disabled-border-color: var(\n            --simple-colors-default-theme-grey-3\n          );\n          --simple-search-container: {\n            padding: 0 15px;\n          }\n        }\n        :host #searchbar {\n          display: flex;\n          align-items: stretch;\n          justify-content: space-between;\n          width: 100%;\n        }\n        :host #searching {\n          flex-grow: 2;\n        }\n        :host #autoscroll {\n          padding-right: 8px;\n        }\n        :host #scrolling,\n        :host #printing {\n          display: flex;\n          align-items: center;\n        }\n        @media print {\n          :host {\n            display: none;\n          }\n        }\n      </style>\n      <div id="searchbar">\n        <div id="searching">\n          <simple-search\n            id="simplesearch"\n            disabled$="[[disableSearch]]"\n            controls="transcript"\n            hidden$="[[disableSearch]]"\n            no-label-float=""\n            next-button-icon$="[[searchNextIcon]]"\n            next-button-label$="[[searchNextLabel]]"\n            prev-button-icon$="[[searchPrevIcon]]"\n            prev-button-label$="[[searchPrevLabel]]"\n            search-input-icon$="[[searchIcon]]"\n            search-input-label$="[[searchLabel]]"\n            target="[[target]]"\n          >\n          </simple-search>\n        </div>\n        <div id="scrolling">\n          <a11y-media-button\n            id="scroll"\n            controls="transcript"\n            icon="[[autoScrollIcon]]"\n            label="[[autoScrollLabel]]"\n            on-click="_handleScrollClick"\n            toggle$="[[!disableScroll]]"\n          >\n          </a11y-media-button>\n        </div>\n        <div\n          id="printing"\n          hidden$="[[disablePrintButton]]"\n          disabled$="[[disablePrintButton]]"\n        >\n          <a11y-media-button\n            controls="transcript"\n            id="print"\n            icon="[[printIcon]]"\n            on-click="_handlePrintClick"\n            label="[[printLabel]]"\n          >\n          </a11y-media-button>\n        </div>\n      </div>\n    ']);return F=function(){return e},e}window.customElements.define(D.tag,D);var V=function(e){function t(){return f(this,t),C(this,$(t).apply(this,arguments))}return _(t,A),w(t,[{key:"connectedCallback",value:function(){T($(t.prototype),"connectedCallback",this).call(this);this.search=this.$.simplesearch,this.dispatchEvent(new CustomEvent("searchbar-added",{detail:this.search}))}},{key:"_handleScrollClick",value:function(e){this.dispatchEvent(new CustomEvent("toggle-scroll",{detail:this}))}},{key:"_handlePrintClick",value:function(e){this.dispatchEvent(new CustomEvent("print-transcript",{detail:this}))}}],[{key:"properties",get:function(){return{lang:{type:String,value:"en",reflectToAttribute:!0},target:{type:Object,value:null}}}},{key:"tag",get:function(){return"a11y-media-transcript-controls"}},{key:"behaviors",get:function(){return[A]}},{key:"template",get:function(){return g.html(F())}}]),t}();window.customElements.define(V.tag,V),window.A11yMediaUtility=window.A11yMediaUtility||{},window.A11yMediaUtility.requestAvailability=function(){return window.A11yMediaUtility.instance||(window.A11yMediaUtility.instance=document.createElement("a11y-media-utility"),document.body.appendChild(window.A11yMediaUtility.instance)),window.A11yMediaUtility.instance};var W=function(e){function t(){var e;f(this,t);var n=S(S(e=C(this,$(t).call(this))));return n.__playerLoader=function(e){n.players.push(e.detail)},window.A11yMediaUtility.instance||(window.A11yMediaUtility.instance=S(S(e)),window.addEventListener("a11y-player",n.__playerLoader)),e}return _(t,g.PolymerElement),w(t,null,[{key:"tag",get:function(){return"a11y-media-utility"}},{key:"properties",get:function(){return{players:{type:Array,value:[]},stickyPlayer:{type:Object,value:null}}}}]),w(t,[{key:"connectedCallback",value:function(){T($(t.prototype),"connectedCallback",this).call(this);var e=this;this.__stickyManager=function(t){e.setStickyPlayer(t.detail)},this.__scrollChecker=function(t){e._checkScroll()},window.addEventListener("a11y-player-playing",e.__stickyManager),window.addEventListener("scroll",e.__scrollChecker)}},{key:"checkConcurrentPlayers",value:function(){for(var e=this.stickyPlayer,t=0;t<this.players.length;t++){var n=this.players[t];n===e||e.allowConcurrent&&n.allowConcurrent||n.pause()}}},{key:"setStickyPlayer",value:function(e){var t=this._getParentNode(e);this.__playerTop=t.offsetTop,this.__playerUpperMiddle=this.__playerTop+.9*t.offsetHeight,this.__playerLowerMiddle=this.__playerTop+.1*t.offsetHeight,e!==this.stickyPlayer&&void 0!==this.stickyPlayer&&null!==this.stickyPlayer&&(this.stickyPlayer.toggleSticky(!1),this.__parent.style.height="unset"),t.style.height=t.offsetHeight+"px",this.__parent=t,this.stickyPlayer=e,e.allowConcurrent||this.checkConcurrentPlayers(),this._checkScroll()}},{key:"_checkScroll",value:function(){var e=window.pageYOffset,t=e+window.innerHeight;void 0!==this.stickyPlayer&&null!==this.stickyPlayer&&(this.stickyPlayer.__playing&&(this.__playerLowerMiddle>t||this.__playerUpperMiddle<e)?this.stickyPlayer.toggleSticky(!0):this.stickyPlayer.toggleSticky(!1))}},{key:"_getParentNode",value:function(e){var t=e.parentNode;return null!=t&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(t=t.host),t}},{key:"disconnectedCallback",value:function(){T($(t.prototype),"disconnectedCallback",this).call(this);window.removeEventListener("a11y-player",this.__playerLoader),window.removeEventListener("a11y-player-playing",this.__stickyManager),window.removeEventListener("scroll",this.__scrollChecker)}}]),t}();window.customElements.define(W.tag,W),window.A11yMediaYoutubeUtility=window.A11yMediaYoutubeUtility||{},window.A11yMediaYoutubeUtility.requestAvailability=function(){return window.A11yMediaYoutubeUtility.instance||(window.A11yMediaYoutubeUtility.instance=document.createElement("a11y-media-youtube-utility"),document.body.appendChild(window.A11yMediaYoutubeUtility.instance)),window.A11yMediaYoutubeUtility.instance};var K=function(e){function t(){return f(this,t),C(this,$(t).apply(this,arguments))}return _(t,g.PolymerElement),w(t,[{key:"connectedCallback",value:function(){T($(t.prototype),"connectedCallback",this).call(this);var e=this,n=document.createElement("script");n.setAttribute("src","https://www.youtube.com/iframe_api"),n.setAttribute("type","text/javascript"),document.body.appendChild(n),window.onYouTubeIframeAPIReady=function(){var t=new CustomEvent("youtube-api-ready");e.apiReady=!0,document.dispatchEvent(t)}}},{key:"initYoutubePlayer",value:function(e){var t="a11y-media-yt-",n=document.createElement("div");this.counter++,t+=this.counter,document.body.appendChild(n),n.setAttribute("id",t);var a=new YT.Player(t,{width:e.width,height:e.height,videoId:e.videoId,playerVars:{color:"white",controls:0,autoplay:e.autoplay,disablekb:1,enablejsapi:1,iv_load_policy:3,modestbranding:1,showinfo:0,rel:0}});return a.tracks=[],a.duration=0,a.play=function(){a.playVideo()},a.pause=function(){a.pauseVideo()},a.seek=function(e){a.seekTo(e),a.pauseVideo()},a.setMute=function(e){e?a.mute():a.unMute()},a.seekable={length:1,start:function(e){return 0},end:function(e){return a.duration}},a}}],[{key:"tag",get:function(){return"a11y-media-youtube-utility"}},{key:"properties",get:function(){return{apiReady:{type:"Boolean",value:void 0!==window.YT},counter:{type:"Number",value:0}}}}]),t}();function G(){var e=L(['\n      <style is="custom-style" include="simple-colors">\n        :host {\n          width: 100%;\n          display: block;\n          color: var(--simple-colors-default-theme-grey-12);\n          background-color: var(--simple-colors-default-theme-grey-2);\n          outline: 1px solid var(--simple-colors-default-theme-grey-3);\n        }\n        :host([dark]) {\n          outline: 1px solid var(--simple-colors-default-theme-grey-1);\n        }\n        :host #outerplayer,\n        :host #outerplayer * {\n          --a11y-media-color: var(--simple-colors-default-theme-grey-11);\n          --a11y-media-bg-color: var(--simple-colors-default-theme-grey-2);\n          --a11y-media-hover-color: var(--simple-colors-default-theme-grey-12);\n          --a11y-media-hover-bg-color: var(\n            --simple-colors-default-theme-grey-2\n          );\n          --a11y-media-accent-color: var(\n            --simple-colors-default-theme-accent-9\n          );\n          --a11y-media-faded-accent-color: var(\n            --simple-colors-default-theme-accent-8\n          );\n\n          /* settings */\n          --a11y-media-settings-menu-color: var(--a11y-media-color);\n          --a11y-media-settings-menu-bg-color: var(--a11y-media-bg-color);\n          --a11y-media-settings-menu-hover-color: var(--a11y-media-hover-color);\n          --a11y-media-settings-menu-hover-bg-color: var(\n            --a11y-media-hover-bg-color\n          );\n\n          /* buttons */\n          --a11y-media-button-color: var(--a11y-media-color);\n          --a11y-media-button-bg-color: var(--a11y-media-bg-color);\n          --a11y-media-button-hover-color: var(--a11y-media-accent-color);\n          --a11y-media-button-hover-bg-color: var(--a11y-media-hover-bg-color);\n          --a11y-media-button-toggle-color: var(\n            --a11y-media-faded-accent-color\n          );\n\n          /* toggle button */\n          --paper-toggle-button-unchecked-bar-color: var(--a11y-media-color);\n          --paper-toggle-button-unchecked-button-color: var(--a11y-media-color);\n          --paper-toggle-button-checked-bar-color: var(\n            --a11y-media-accent-color\n          );\n          --paper-toggle-button-checked-button-color: var(\n            --a11y-media-accent-color\n          );\n\n          /* slider */\n          --paper-slider-active-color: var(--a11y-media-accent-color);\n          --paper-slider-secondary-color: var(--a11y-media-faded-accent-color);\n          --paper-slider-pin-color: var(--a11y-media-faded-bg-color);\n          --paper-slider-pin-start-color: var(--a11y-media-faded-bg-color);\n          --paper-slider-pin-end-color: var(--a11y-media-faded-bg-color);\n          --paper-slider-knob-color: var(--a11y-media-accent-color);\n          --paper-slider-knob-start-color: var(--a11y-media-bg-color);\n          --paper-slider-knob-end-color: var(--a11y-media-bg-color);\n          --paper-slider-knob-border-color: var(--a11y-media-accent-color);\n          --paper-slider-knob-start-border-color: var(--a11y-media-bg-color);\n          --paper-slider-knob-end-border-color: var(--a11y-media-bg-color);\n        }\n        :host #outertranscript,\n        :host #outertranscript *,\n        :host #transcript {\n          --a11y-media-transcript-color: var(\n            --simple-colors-default-theme-grey-12\n          );\n          --a11y-media-transcript-bg-color: var(\n            --simple-colors-default-theme-grey-1\n          );\n          --a11y-media-transcript-accent-color: var(\n            --simple-colors-default-theme-accent-8\n          );\n          --a11y-media-transcript-faded-accent-color: var(\n            --simple-colors-default-theme-accent-10\n          );\n          --a11y-media-transcript-active-cue-color: var(\n            --simple-colors-default-theme-grey-12\n          );\n          --a11y-media-transcript-active-cue-bg-color: var(\n            --simple-colors-default-theme-accent-1\n          );\n          --a11y-media-transcript-focused-cue-color: var(\n            --simple-colors-default-theme-grey-12\n          );\n          --a11y-media-transcript-focused-cue-bg-color: var(\n            --simple-colors-default-theme-grey-2\n          );\n          --a11y-media-transcript-match-color: var(\n            --simple-colors-default-theme-grey-1\n          );\n          --a11y-media-transcript-match-bg-color: var(\n            --simple-colors-default-theme-accent-10\n          );\n          --a11y-media-transcript-match-border-color: var(\n            --simple-colors-default-theme-accent-12\n          );\n          --a11y-media-hover-color: var(--simple-colors-default-theme-grey-12);\n          --a11y-media-hover-bg-color: var(\n            --simple-colors-default-theme-grey-2\n          );\n        }\n        :host([dark-transcript]) #outertranscript,\n        :host([dark-transcript]) #outertranscript *,\n        :host([dark-transcript]) #transcript {\n          --a11y-media-transcript-active-cue-color: var(\n            --simple-colors-default-theme-accent-10\n          );\n          --a11y-media-transcript-active-cue-bg-color: var(\n            --simple-colors-default-theme-grey-1\n          );\n        }\n        :host #player {\n          display: block;\n          max-width: 100%;\n          transition: position 0.5s ease, max-width 1s ease;\n          background-color: var(--simple-colors-default-theme-grey-2);\n        }\n        :host #innerplayer {\n          z-index: 1;\n        }\n        :host #outeraudiocc:not([hidden]) {\n          display: flex;\n          align-items: center;\n          padding: 5px 16px;\n          min-height: 4em;\n          transition: all 0.5s;\n        }\n        :host #sources {\n          display: flex;\n          align-items: stretch;\n          position: relative;\n        }\n        :host([no-height]) #sources {\n          display: none;\n        }\n        :host #controls,\n        :host #slider,\n        :host #sources,\n        :host #sources > * {\n          width: 100%;\n        }\n        :host #loader,\n        :host #youtube,\n        :host #customcc,\n        :host #customcctxt {\n          position: absolute;\n          top: 0;\n          left: 0;\n        }\n        :host #youtube {\n          height: 100%;\n        }\n        :host #customcc {\n          font-size: 20px;\n          width: 100%;\n          height: 100%;\n          transition: font-size 0.25s;\n        }\n        :host([responsive-size*="lg"]) #customcc {\n          font-size: 14px;\n        }\n        :host([responsive-size*="md"]) #customcc {\n          font-size: 14px;\n        }\n        :host([responsive-size*="sm"]) #customcc {\n          font-size: 12px;\n        }\n        :host([responsive-size*="xs"]) #customcc {\n          font-size: 10px;\n        }\n        :host([sticky]:not([sticky-corner="none"])) #customcc {\n          display: none;\n        }\n        :host #customcctxt:not(:empty) {\n          top: unset;\n          bottom: 8px;\n          display: inline-block;\n          margin: 0 10px;\n          color: white;\n          background-color: black;\n          background-color: rgba(0, 0, 0, 0.8);\n          padding: 0.15em 4px;\n        }\n        :host #innerplayer,\n        :host #sources > * {\n          max-height: 80vh;\n        }\n        :host #controls,\n        :host #slider {\n          z-index: 2 !important;\n        }\n        :host #audio-only {\n          text-align: center;\n          font-style: italic;\n          width: 100%;\n          line-height: 160%;\n        }\n        :host .media-caption:not(:empty) {\n          padding: 5px 15px;\n        }\n        :host #printthumb {\n          width: 100%;\n          margin: 0;\n          display: block;\n          border-top: 1px solid #aaaaaa;\n        }\n        :host .sr-only {\n          position: absolute;\n          left: -9999px;\n          font-size: 0;\n          height: 0;\n          width: 0;\n          overflow: hidden;\n        }\n        @media screen {\n          :host #printthumb {\n            display: none;\n          }\n          :host([flex-layout]:not([responsive-size*="s"])) {\n            display: inline-flex;\n            align-items: stretch;\n            outline: 1px solid;\n            color: var(--simple-colors-default-theme-grey-12);\n            background-color: var(--simple-colors-default-theme-grey-2);\n            outline-color: var(--simple-colors-default-theme-grey-3);\n            padding: 0;\n          }\n          :host([dark][flex-layout]:not([responsive-size*="s"])) {\n            outline-color: var(--simple-colors-default-theme-grey-1);\n          }\n          :host > div {\n            transition: all 0.5s;\n          }\n          :host([sticky]:not([sticky-corner="none"])) #player {\n            position: fixed;\n            top: 5px;\n            right: 5px;\n            width: 200px;\n            max-width: 200px;\n            z-index: 999999;\n            border: 1px solid;\n            box-shadow: 1px 1px 20px 1px rgba(125, 125, 125);\n            border-radius: 3.2px;\n            border-color: var(--a11y-media-bg-color);\n          }\n          :host([dark][sticky]:not([sticky-corner="none"])) #player {\n            border-color: var(--a11y-media-bg-color);\n          }\n          :host([sticky][sticky-corner="top-left"]) #player {\n            right: unset;\n            left: 5px;\n          }\n          :host([flex-layout]:not([responsive-size*="s"])) > div {\n            width: 50%;\n            flex-grow: 1;\n            flex-shrink: 1;\n          }\n          :host #innertranscript {\n            position: relative;\n            height: 100%;\n          }\n          :host([hide-transcript]) #outerplayer {\n            min-width: 50%;\n            max-width: 100%;\n          }\n          :host([hide-transcript]) #outertranscript {\n            display: none;\n          }\n          :host #transcript {\n            padding-top: 48px;\n          }\n          :host(:not([no-height]):not([stacked-layout]):not([responsive-size*="s"]))\n            #transcript {\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            overflow-y: scroll;\n          }\n          :host(:not([no-height]):not([stacked-layout]):not([responsive-size*="s"]))\n            #player.totop {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 200px !important;\n            z-index: 9999;\n          }\n          :host #tcontrols {\n            z-index: 1000;\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            display: flex;\n          }\n          :host([sticky][sticky-corner="bottom-left"]) #player {\n            top: unset;\n            right: unset;\n            bottom: 5px;\n          }\n          :host([sticky][sticky-corner="bottom-right"]) #player {\n            top: unset;\n            bottom: 5px;\n          }\n          :host([sticky]:not([sticky-corner="none"]):not([no-height]):not([stacked-layout]):not([responsive-size*="s"]))\n            #controls {\n            display: none;\n          }\n          :host .print-only {\n            display: none;\n          }\n          :host .media-caption {\n            color: var(--simple-colors-default-theme-grey-1);\n            background-color: var(--simple-colors-default-theme-accent-10);\n          }\n        }\n\n        @media print {\n          :host,\n          :host([dark]) {\n            outline: 1px solid #aaaaaa;\n            background-color: #ffffff;\n          }\n          :host([sticky]:not([sticky-corner="none"])) #outerplayer {\n            height: unset !important;\n          }\n          :host .screen-only,\n          :host #player,\n          :host #outeraudiocc,\n          :host #printthumb:not([src]) {\n            display: none;\n          }\n          :host(:not([thumbnail-src])) #sources,\n          :host #slider,\n          :host #loader,\n          :host #youtube,\n          :host #controls {\n            display: none;\n          }\n          :host .media-type {\n            font-style: italic;\n          }\n          :host #searchbar {\n            display: none;\n          }\n          :host .media-caption {\n            background-color: #cccccc;\n            color: #000000;\n            font-size: 120%;\n            padding: 5px 15px;\n          }\n        }\n      </style>\n      <div class="sr-only">[[mediaCaption]]</div>\n      <div id="outerplayer" lang$="[[uiLanguage]]">\n        <div id="outeraudiocc" hidden$="[[!showCustomCaptions]]">\n          <div id="audiocc" hidden$="[[!noHeight]]"></div>\n        </div>\n        <div id="player">\n          <div id="innerplayer">\n            <div id="sources" hidden$="[[noHeight]]">\n              <a11y-media-play-button\n                id="playbutton"\n                audio-only$="[[audioOnly]]"\n                disabled="true"\n                hidden$="[[noPlayButton]]"\n                disabled$="[[noPlayButton]]"\n                on-controls-change="_onControlsChanged"\n                pause-label$="[[pauseLabel]]"\n                playing$="[[__playing]]"\n                play-label$="[[playLabel]]"\n              >\n              </a11y-media-play-button>\n              <a11y-media-loader\n                id="loader"\n                audio-only$="[[audioOnly]]"\n                autoplay$="[[autoplay]]"\n                cc$="[[cc]]"\n                crossorigin$="[[crossorigin]]"\n                hidden$="[[isYoutube]]"\n                lang$="[[lang]]"\n                loop$="[[loop]]"\n                muted$="[[muted]]"\n                manifest$="[[manifest]]"\n                on-media-loaded="_handleMediaLoaded"\n                playback-rate$="[[playbackRate]]"\n                style$="[[_getThumbnailCSS(thumbnailSrc)]]"\n                preload$="[[preload]]"\n                volume$="[[volume]]"\n              >\n                <slot></slot>\n              </a11y-media-loader>\n              <div\n                id="youtube"\n                hidden$="[[!isYoutube]]"\n                video-id$="[[videoId]]"\n              ></div>\n              <div id="customcc" hidden$="[[!showCustomCaptions]]">\n                <span id="customcctxt" hidden$="[[noHeight]]"></span>\n              </div>\n            </div>\n          </div>\n          <paper-slider\n            id="slider"\n            max$="[[__duration]]"\n            on-dragging-changed="_handleSliderDragging"\n            on-focused-changed="_handleSliderKeyboard"\n            pin=""\n            secondary-progress$="[[__buffered]]"\n            value$="[[__elapsed]]"\n          >\n          </paper-slider>\n        </div>\n        <a11y-media-controls\n          id="controls"\n          audio-only$="[[audioOnly]]"\n          audio-label$="[[audioLabel]]"\n          captions-icon$="[[captionsIcon]]"\n          captions-label$="[[captionsLabel]]"\n          captions-menu-label$="[[captionsMenuLabel]]"\n          captions-menu-off$="[[captionsMenuOff]]"\n          cc$="[[cc]]"\n          forward-icon$="[[forwardIcon]]"\n          forward-label$="[[forwardLabel]]"\n          fullscreen-icon$="[[fullscreenIcon]]"\n          fullscreen-label$="[[fullscreenLabel]]"\n          has-captions$="[[hasCaptions]]"\n          has-transcript$="[[hasTranscript]]"\n          lang$="[[uiLanguage]]"\n          loop-icon$="[[loopIcon]]"\n          loop-label$="[[loopLabel]]"\n          mute-icon$="[[muteIcon]]"\n          mute-label$="[[muteLabel]]"\n          muted$="[[muted]]"\n          on-controls-change="_onControlsChanged"\n          pause-icon$="[[pauseIcon]]"\n          pause-label$="[[pauseLabel]]"\n          play-icon$="[[playIcon]]"\n          play-label$="[[playLabel]]"\n          playing$="[[__playing]]"\n          restart-icon$="[[restartIcon]]"\n          restart-label$="[[restartLabel]]"\n          rewind-icon$="[[rewindIcon]]"\n          rewind-label$="[[rewindLabel]]"\n          search-transcript$="[[searchTranscript]]"\n          settings-icon$="[[settingsIcon]]"\n          settings-label$="[[settingsLabel]]"\n          speed-label$="[[speedLabel]]"\n          stand-alone$="[[standAlone]]"\n          transcript-icon$="[[transcriptIcon]]"\n          transcript-label$="[[transcriptLabel]]"\n          transcript-menu-label$="[[transcriptMenuLabel]]"\n          unmute-icon$="[[unmuteIcon]]"\n          unmute-label$="[[unmuteLabel]]"\n          video-label$="[[videoLabel]]"\n          volume="[[__volume]]"\n          volume-icon$="[[volumeIcon]]"\n          volume-label$="[[volumeLabel]]"\n        >\n        </a11y-media-controls>\n        <div\n          class="screen-only media-caption"\n          aria-hidden="true"\n          hidden$="[[!_hasAttribute(mediaCaption)]]"\n        >\n          [[mediaCaption]]\n        </div>\n        <div class="print-only media-caption">[[printCaption]]</div>\n      </div>\n      <img id="printthumb" aria-hidden="true" src$="[[thumbnailSrc]]" />\n      <div id="outertranscript" hidden$="[[standAlone]]" lang$="[[uiLanguage]]">\n        <div id="innertranscript">\n          <a11y-media-transcript-controls\n            id="tcontrols"\n            accent-color$="[[accentColor]]"\n            auto-scroll-icon$="[[autoScrollIcon]]"\n            auto-scroll-label$="[[autoScrollLabel]]"\n            dark$="[[darkTranscript]]"\n            disable-print-button$="[[disablePrintButton]]"\n            disable-scroll$="[[disableScroll]]"\n            disable-search$="[[disableSearch]]"\n            lang$="[[uiLanguage]]"\n            on-searchbar-added="_handleSearchAdded"\n            on-toggle-scroll="_handleTranscriptScrollToggle"\n            on-print-transcript="_handlePrinting"\n            print-icon$="[[printIcon]]"\n            print-label$="[[printLabel]]"\n            stand-alone$="[[standAlone]]"\n            search-label$="[[searchLabel]]"\n            search-prev-label$="[[searchPrevLabel]]"\n            search-prev-icon$="[[searchPrevIcon]]"\n            search-next-label$="[[searchNextLabel]]"\n            search-next-icon$="[[searchNextIcon]]"\n            skip-transcript-link$="[[skipTranscriptLink]]"\n          >\n          </a11y-media-transcript-controls>\n          <a11y-media-transcript\n            id="transcript"\n            accent-color$="[[accentColor]]"\n            dark$="[[darkTranscript]]"\n            disable-scroll$="[[disableScroll]]"\n            disable-search$="[[disableSearch]]"\n            disable-interactive$="[[disableInteractive]]"\n            hide-timestamps$="[[hideTimestamps]]"\n            on-cue-seek="_handleCueSeek"\n            search="[[search]]"\n          >\n          </a11y-media-transcript>\n        </div>\n      </div>\n    ']);return G=function(){return e},e}window.customElements.define(K.tag,K);var J=function(e){function t(){return f(this,t),C(this,$(t).apply(this,arguments))}return _(t,A),w(t,[{key:"connectedCallback",value:function(){T($(t.prototype),"connectedCallback",this).call(this);this.__playerAttached=!0,window.A11yMediaUtility.requestAvailability(),this._addResponsiveUtility(),window.dispatchEvent(new CustomEvent("a11y-player",{detail:this})),this.isYoutube&&(window.A11yMediaYoutubeUtility.requestAvailability(),this._youTubeRequest())}},{key:"ready",value:function(){var e=this;T($(t.prototype),"ready",this).call(this);var n=this;n.__playerReady=!0,n.__interactive=!n.disableInteractive,n.target=n.shadowRoot.querySelector("#transcript"),n.__status=n.loadingLabel,n.__slider=n.$.slider,n.__volume=n.muted?0:Math.max(this.volume,10),n.__resumePlaying=!1,n.__showFullscreen=!this.disableFullscreen&&screenfull.enabled,n.__duration=0,n.$.controls.setStatus(n.__status),n.width=null!==n.width?n.width:"100%",n.style.maxWidth=null!==n.width?n.width:"100%",n.$.sources.style.paddingTop="56.25%",n.querySelectorAll("source,track").forEach(function(e){n.$.loader.media.appendChild(e)}),this.isYoutube?(n.disableInteractive=!0,this._youTubeRequest()):n.media=n.$.loader,n.$.transcript.setMedia(n.$.player),n.__showFullscreen&&screenfull.on("change",function(){e.fullscreen=screenfull.isFullscreen})}},{key:"play",value:function(e){var t=this;t.__playing=!0,void 0!==e&&e.detail!==t.$.playbutton||(t.__playProgress=setInterval(function(){t.__elapsed=t.media.getCurrentTime()>0?t.media.getCurrentTime():0,t.__duration=t.media.duration>0?t.media.duration:0,t._updateCustomTracks(),t.__status=t._getHHMMSS(t.media.getCurrentTime(),t.__duration)+"/"+t._getHHMMSS(t.__duration),t.$.controls.setStatus(t.__status),t.__elapsed!==t.__duration||t.loop||(t.__playing=!1,clearInterval(t.__playProgress)),t.__buffered=t.media.getBufferedTime},1),window.dispatchEvent(new CustomEvent("a11y-player-playing",{detail:t})),t.media.play())}},{key:"pause",value:function(){this.__playing=!1,this.media.pause(),clearInterval(this.__playProgress)}},{key:"stop",value:function(){this.pause(),this.seek(0)}},{key:"restart",value:function(){this.seek(0),this.play()}},{key:"rewind",value:function(e){e=void 0!==e?e:1,this.seek(Math.max(this.media.getCurrentTime()-e,0))}},{key:"forward",value:function(e){e=void 0!==e?e:1,this.seek(Math.min(this.media.getCurrentTime()+e,this.__duration))}},{key:"seek",value:function(e){var t=void 0!==this.media&&null!==this.media?this.media.seekable:[];t.length>0&&e>=t.start(0)&&e<=t.end(0)&&(this.media.seek(e),this.__elapsed=e,this.__status=this._getHHMMSS(this.media.getCurrentTime(),this.__duration)+"/"+this._getHHMMSS(this.__duration),this.$.controls.setStatus(this.__status),this._updateCustomTracks(),this.__resumePlaying&&this.play())}},{key:"selectTrack",value:function(e){this.$.loader.selectTrack(e),this.$.transcript.setActiveTranscript(e)}},{key:"setVolume",value:function(e){this.volume=null!==e?e:70,this.media.setVolume(this.volume),this.muted=0===this.volume}},{key:"setPlaybackRate",value:function(e){e=null!==e?e:1,this.media.setPlaybackRate(e)}},{key:"toggleCC",value:function(e){this.cc=void 0===e?!this.cc:e,this.$.loader.setCC(this.cc)}},{key:"toggleLoop",value:function(e){this.isYoutube||(this.loop=void 0===e?!this.loop:e,this.media.setLoop(this.loop))}},{key:"toggleMute",value:function(e){this.muted=void 0===e?!this.muted:e,this.__volume=this.muted?0:Math.max(this.volume,10),this.media.setMute(this.muted)}},{key:"toggleSticky",value:function(e){e=void 0===e?!this.sticky:e,this.sticky=e,this.dispatchEvent(new CustomEvent("player-sticky",{detail:this}))}},{key:"toggleTranscript",value:function(e){e=void 0===e?this.hideTranscript:e,this.hideTranscript=!e,void 0!==this.$.transcript&&null!==this.$.transcript&&(this.dispatchEvent(new CustomEvent("transcript-toggle",{detail:this})),this.$.transcript.toggleHidden(this.hideTranscript))}},{key:"_getMediaCaption",value:function(e,t,n){var a=null!=n&&""!==n;return e&&a?n+" ("+t+")":e?t:a?n:null}},{key:"_getPrintCaption",value:function(e,t,n,a){var o=null!=a&&""!==a;return e&&o?a+" ("+t+")":e?t:o?a+" ("+n+")":n}},{key:"_getThumbnailCSS",value:function(e){return null!=e?"background-image: url("+e+"); background-size: cover;":null}},{key:"_getTrackData",value:function(){var e=this,t=e.$.loader.media,n=new Array;e.hasTranscript=!e.standAlone;for(var a=function(a){if(null!==t.textTracks[a])var o=t.textTracks[a],i={},r=(o.cues,o.label),l=o.language,s=void 0!==r?r:void 0!==l?l:"Track "+a,c=setInterval(function(){o.mode="showing",void 0!==o.cues&&o.cues.length>0&&(o.mode="hidden",u(),clearInterval(c))},1),u=function(){o.mode="hidden";var t=Object.keys(o.cues).map(function(t){return{order:""!==o.cues[t].id?o.cues[t].id:t,seek:o.cues[t].startTime,seekEnd:o.cues[t].endTime,start:e._getHHMMSS(o.cues[t].startTime,e.media.duration),end:e._getHHMMSS(o.cues[t].endTime,e.media.duration),text:o.cues[t].text}});i={text:s,language:l,value:a,cues:t},n.push(i),e.set("tracks",n),e.$.controls.setTracks(n),e.$.transcript.setTracks(n),e.selectTrack(o.default?a:0),o.oncuechange=function(t){e.$.transcript.setActiveCues(Object.keys(t.currentTarget.activeCues).map(function(e){return t.currentTarget.activeCues[e].id}))}}},o=0;o<t.textTracks.length;o++)a(o);t.textTracks.length>0?e.hasCaptions=!0:e.standAlone=!0}},{key:"_handleCueSeek",value:function(e){this.standAlone||void 0===this.$.transcript||null===this.$.transcript||(this.__resumePlaying=this.__playing,this.seek(e.detail))}},{key:"_handleMediaLoaded",value:function(e){var t=this.media.aspectRatio;this.$.sources.style.paddingTop=100/t+"%",this.$.playbutton.removeAttribute("disabled"),this.__duration=this.media.duration>0?this.media.duration:0,this.__status=this._getHHMMSS(0,this.media.duration)+"/"+this._getHHMMSS(this.media.duration),this.$.controls.setStatus(this.__status),this._getTrackData(this.$.loader.media)}},{key:"_handlePrinting",value:function(e){this.dispatchEvent(new CustomEvent("printing-transcript",{detail:this})),this.$.transcript.print(this.mediaTitle)}},{key:"_handleSearchAdded",value:function(e){this.search=e.detail}},{key:"_handleSliderDragging",value:function(e){this._toggleSliderSeek(this.$.slider.dragging,this.$.slider.immediateValue)}},{key:"_handleSliderKeyboard",value:function(e){this._toggleSliderSeek(this.$.slider.focused,this.$.slider.value)}},{key:"_handleTranscriptScrollToggle",value:function(e){this.disableScroll=!this.disableScroll}},{key:"_onControlsChanged",value:function(e){var t=void 0!==e.detail.label?e.detail.label:e.detail.id;"backward"===t||t===this.rewindLabel?this.rewind(this.__duration/20):"closed captions"===t||"captions"===t||t===this.captionsLabel||t===this.captionsMenuLabel?this.toggleCC():"transcript"===t||"transcript-toggle"===t||t===this.transcriptLabel||t===this.transcriptMenuLabel?this.toggleTranscript():"tracks"===e.detail.id?""===e.detail.value?this.toggleCC(!1):(this.toggleCC(!0),this.selectTrack(e.detail.value)):"forward"===t||t===this.forwardLabel?this.forward(this.__duration/20):"full screen"===t||t===this.fullscreenLabel?(this.toggleTranscript(this.fullscreen),screenfull.toggle(this.$.outerplayer)):"loop"===t||t===this.loopLabel?this.toggleLoop():"mute"===t||"unmute"===t||t===this.muteLabel||t===this.unmuteLabel?this.toggleMute():"pause"===t||t===this.pauseLabel?this.pause():"play"===t||t===this.playLabel?this.play():"restart"===t||t===this.restartLabel?(this.seek(0),this.play()):"speed"===t||t===this.speedLabel?this.setPlaybackRate(e.detail.value):"volume"!==t&&t!==this.volumeLabel||this.setVolume(e.detail.value)}},{key:"_toggleSliderSeek",value:function(e,t){e?(this.__playing&&(this.__resumePlaying=!0),this.pause()):(this.seek(t),this.__resumePlaying=!1)}},{key:"_youTubeRequest",value:function(){var e=this,t=window.A11yMediaYoutubeUtility.instance;if(e.__playerAttached&&e.__playerReady){var n=function(){e.media=t.initYoutubePlayer({width:"100%",height:"100%",videoId:e.youtubeId}),e.$.youtube.appendChild(e.media.a),e._getTrackData(e.$.loader.media),e._updateCustomTracks();var n=setInterval(function(){void 0!==e.media.getDuration&&(clearInterval(n),e.__duration=e.media.duration=e.media.getDuration(),e.__status=e._getHHMMSS(0,e.media.duration)+"/"+e._getHHMMSS(e.media.duration),e.$.controls.setStatus(e.__status),e.disableInteractive=!e.__interactive)},100)};t.apiReady?n():document.addEventListener("youtube-api-ready",function e(a){t.apiReady&&(document.removeEventListener("youtube-api-ready",e),n())})}}},{key:"_updateCustomTracks",value:function(){if(this._hasCustomCaptions(this.isYoutube,this.audioOnly,this.tracks)){var e=this.tracks[this.$.transcript.selectedTranscript],t=[],n="";if(null!=e&&void 0!==e.cues&&null!==e.cues){for(var a=0;a<e.cues.length;a++)e.cues[a].seek<this.__elapsed&&e.cues[a].seekEnd>this.__elapsed&&(t.push(e.cues[a].order),n=""===n?e.cues[a].text:n);this.$.customcctxt.innerText=n,this.$.audiocc.innerText=n,this.$.transcript.setActiveCues(t)}}}}],[{key:"tag",get:function(){return"a11y-media-player"}},{key:"properties",get:function(){return{mediaCaption:{type:String,computed:"_getMediaCaption(audioOnly,audioLabel,mediaTitle)"},printCaption:{type:String,computed:"_getPrintCaption(audioOnly,audioLabel,videoLabel,mediaTitle)"},sticky:{type:Boolean,value:!1,reflectToAttribute:!0},stickyCorner:{type:String,value:"top-right",reflectToAttribute:!0}}}},{key:"behaviors",get:function(){return[A]}},{key:"template",get:function(){return g.html(G())}}]),t}();window.customElements.define(J.tag,J),e.A11yMediaPlayer=J,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=a11y-media-player.umd.js.map
