!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("@polymer/polymer/polymer-legacy.js"),require("@polymer/polymer/lib/legacy/polymer.dom.js"),require("@polymer/iron-icons/editor-icons.js"),require("@polymer/marked-element/marked-element.js"),require("@polymer/paper-tooltip/paper-tooltip.js"),require("@polymer/paper-card/paper-card.js"),require("@polymer/paper-badge/paper-badge.js"),require("@lrnwebcomponents/moment-element/moment-element.js"),require("@lrnwebcomponents/materializecss-styles/lib/colors.js"),require("@lrnwebcomponents/mtz-marked-editor/mtz-marked-editor.js"),require("@lrnwebcomponents/mtz-marked-editor/lib/mtz-marked-control-generic-line.js"),require("@lrnwebcomponents/mtz-marked-editor/lib/mtz-marked-control-generic-wrap.js"),require("@lrnwebcomponents/mtz-marked-editor/lib/controls/mtz-marked-control-link.js"),require("@lrnwebcomponents/word-count/word-count.js"),require("@lrnwebcomponents/lrnsys-button/lrnsys-button.js"),require("@lrnwebcomponents/lrndesign-avatar/lrndesign-avatar.js")):"function"==typeof define&&define.amd?define(["@polymer/polymer/polymer-legacy.js","@polymer/polymer/lib/legacy/polymer.dom.js","@polymer/iron-icons/editor-icons.js","@polymer/marked-element/marked-element.js","@polymer/paper-tooltip/paper-tooltip.js","@polymer/paper-card/paper-card.js","@polymer/paper-badge/paper-badge.js","@lrnwebcomponents/moment-element/moment-element.js","@lrnwebcomponents/materializecss-styles/lib/colors.js","@lrnwebcomponents/mtz-marked-editor/mtz-marked-editor.js","@lrnwebcomponents/mtz-marked-editor/lib/mtz-marked-control-generic-line.js","@lrnwebcomponents/mtz-marked-editor/lib/mtz-marked-control-generic-wrap.js","@lrnwebcomponents/mtz-marked-editor/lib/controls/mtz-marked-control-link.js","@lrnwebcomponents/word-count/word-count.js","@lrnwebcomponents/lrnsys-button/lrnsys-button.js","@lrnwebcomponents/lrndesign-avatar/lrndesign-avatar.js"],n):n(e.polymerLegacy_js,e.polymer_dom_js)}(this,function(e,n){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){var e,n,t=(e=['\n    <style include="materializecss-styles-colors">\n      :host {\n        display: block;\n        padding: 10px 10px 10px 0px;\n      }\n      :host([disabled]) {\n        opacity: .5;\n        background-color: #cccccc;\n        pointer-events: none;\n      }\n      :host(:focus),\n      :host(:hover) {\n        z-index: 2;\n      }\n      :host(:focus) .comment-outer,\n      :host(:hover) .comment-outer {\n        border: 1px #0277bd solid;\n      }\n      .comment-outer {\n        display: table;\n        width: 100%;\n        border: 1px #ddd solid;\n        color: #444;\n      }\n      .comment-outer.new-comment {\n        border: 1px #d81b60 dashed;\n        color: #000;\n      }\n      .comment-inner {\n        display: table-row;\n      }\n      .comment-avatar {\n        padding: 0 7px;\n        width: 40px;\n      }\n      .comment-depth,\n      .comment-avatar, \n      .comment-content {\n        padding-top: 8px;\n        padding-bottom: 8px;\n        display: table-cell;\n        vertical-align: top;\n      }\n      .comment-content {\n        padding-right: 7px;\n      }\n      h1,\n      h2,\n      h3,\n      h4 {\n        text-align: left;\n        font-size: 16px;\n        line-height: 20px;\n      }\n      h1.comment-heading,\n      h2.comment-heading,\n      h3.comment-heading,\n      h4.comment-heading {\n        margin-top: 7px;\n      }\n      p {\n        font-size: 14px;\n        line-height: 18px;\n        text-align: left;\n      }\n      #edit-comment {\n        background-color: white;\n        padding: 4px;\n      }\n      marked-element {\n        line-height: 16px;\n        font-size: 14.4px;\n      }\n      .nowrap-me marked-element:hover {\n        box-shadow: -1px 0 0 0 black inset;\n        cursor: pointer;\n      }\n      .nowrap-me marked-element ::slotted(#content p.marked-element) {\n        height: 32px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        margin-bottom: 35px;\n      }\n      .nowrap-me marked-element ::slotted(#content p.marked-element:after) {\n        content: "see more";\n        position: absolute;\n        bottom: 65px;\n        right: 17px;\n        color: #1976d2;\n      }\n      .comment-depth-1 {\n        width: 0;\n      }\n      .comment-depth-2 {\n        width: 54px;\n        border-right: 3px solid #ccc;\n      }\n      .comment-depth-3,\n      .comment-depth-4,\n      .comment-depth-5,\n      .comment-depth-6,\n      .comment-depth-7,\n      .comment-depth-8,\n      .comment-depth-9 {\n        width: 108px;\n        border-right: 3px solid #ccc;\n      }\n      .center {\n        padding: 0;\n      }\n      .circle {\n        border-radius: 50% !important;\n      }\n      .comment-actions {\n        margin: 0;\n        padding: 0;\n        display: block;\n        border-top: 1px solid #ddd;\n      }\n      .comment-actions lrnsys-button {\n        display: inline-flex;\n      }\n      .comment-actions .comment-actions-group {\n        margin: 0;\n        padding: 0;\n        display: block;\n      }\n      .comment-actions .comment-actions-group.left-actions {\n        float: left;\n      }\n      .comment-actions .comment-actions-group.right-actions {\n        float: right;\n      }\n      moment-element {\n        float: right;\n        font-size: 90%;\n        font-style: italic;\n        font-weight: normal;\n      }\n      paper-badge {\n        right: 0px;\n        top: 0px;\n      }\n      .like-icon-color {\n        color: #2196F3;\n      }\n      .element-invisible {\n        position: absolute;\n        left: -9999px;\n        top: 0;\n        width: 0;\n        height: 0;\n        overflow: hidden;\n      }\n    </style>\n    <div class$="comment-outer [[commentNew]]">\n      <div class="comment-inner">\n        <div class$="comment-depth comment-depth-[[comment.attributes.threadDepth]] grey lighten-3"></div>\n        <div class="comment-avatar">\n          <lrndesign-avatar id="avatar" label="[[comment.relationships.author.data.name]]" src="[[comment.relationships.author.data.avatar]]" class="float-left ferpa-protect"></lrndesign-avatar>\n          <paper-tooltip for="avatar" animation-delay="0" class="ferpa-protect">[[displayName]]</paper-tooltip>\n        </div>\n        <div class="comment-content">\n          <div class="comment-body">\n            <div id="bodyarea" class="nowrap-me">\n              <h4 class="ferpa-protect comment-heading">\n                <span class="element-invisible">At </span><moment-element datetime$="[[comment.attributes.created]]" output-format="MMM DD[,] YYYY"></moment-element>\n                [[comment.relationships.author.data.display_name]] <span class="element-invisible">[[comment.relationships.author.data.visual.label]]</span> said:\n              </h4>\n              <marked-element smartypants="" id="rendered-comment" markdown="[[comment.attributes.body]]">\n                <word-count class="markdown-html-slot" slot="markdown-html"></word-count>\n              </marked-element>\n            </div>\n            <mtz-marked-editor id="comment-editor" hidden="">\n              <div slot="controls">\n                <mtz-marked-control-generic-wrap icon="editor:format-bold" title="Bold" syntax-prefix="**" syntax-suffix="**" keys="ctrl+b"></mtz-marked-control-generic-wrap>\n                <mtz-marked-control-generic-wrap icon="editor:format-italic" title="Italic" syntax-prefix="_" syntax-suffix="_" keys="ctrl+i"></mtz-marked-control-generic-wrap>\n                <mtz-marked-control-generic-line icon="editor:format-size" title="Heading 3" syntax-prefix="### "></mtz-marked-control-generic-line>\n                <mtz-marked-control-generic-line icon="editor:format-list-numbered" title="Ordered List" syntax-prefix="1. "></mtz-marked-control-generic-line>\n                <mtz-marked-control-generic-line icon="editor:format-list-bulleted" title="Unordered List" syntax-prefix="- "></mtz-marked-control-generic-line>\n                <mtz-marked-control-link icon="editor:insert-link" title="Link"></mtz-marked-control-link>\n              </div>\n              <paper-textarea char-counter="" autofocus="" id="edit-comment" label="Comment" value="{{comment.attributes.body}}" slot="textarea"></paper-textarea>\n            </mtz-marked-editor>\n          </div>\n          <div class="comment-actions">\n            <div class="comment-actions-group left-actions">\n              <lrnsys-button on-click="actionHandler" id="reply" data-commentid="[[comment.id]]" alt="Reply" icon="reply" hover-class="[[hoverClass]]" icon-class="grey-text no-margin" hidden$="[[!comment.actions.reply]]"></lrnsys-button>\n              <lrnsys-button on-click="actionHandler" id="like" data-commentid="[[comment.id]]" alt="Like" icon="thumb-up" hover-class="[[hoverClass]]" icon-class="grey-text no-margin" hidden$="[[!comment.actions.like]]"></lrnsys-button>\n            </div>\n            <div class="comment-actions-group right-actions">\n              <lrnsys-button on-click="actionHandler" id="edit" data-commentid="[[comment.id]]" icon="create" alt="Edit" hover-class="[[hoverClass]]" icon-class="grey-text no-margin" hidden$="[[!comment.actions.edit]]"></lrnsys-button>\n              <lrnsys-button on-click="actionHandler" id="delete" data-commentid="[[comment.id]]" icon="delete-forever" alt="Delete" hover-class="[[hoverClass]]" icon-class="grey-text no-margin" hidden$="[[!comment.actions.delete]]"></lrnsys-button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <template is="dom-if" if="[[comment.relationships.author.data.visual.icon]]">\n      <paper-badge icon="[[comment.relationships.author.data.visual.icon]]" for="papercard" label="[[comment.relationships.author.data.visual.label]]">\n      </paper-badge>\n    </template>\n'],(n=['\n    <style include="materializecss-styles-colors">\n      :host {\n        display: block;\n        padding: 10px 10px 10px 0px;\n      }\n      :host([disabled]) {\n        opacity: .5;\n        background-color: #cccccc;\n        pointer-events: none;\n      }\n      :host(:focus),\n      :host(:hover) {\n        z-index: 2;\n      }\n      :host(:focus) .comment-outer,\n      :host(:hover) .comment-outer {\n        border: 1px #0277bd solid;\n      }\n      .comment-outer {\n        display: table;\n        width: 100%;\n        border: 1px #ddd solid;\n        color: #444;\n      }\n      .comment-outer.new-comment {\n        border: 1px #d81b60 dashed;\n        color: #000;\n      }\n      .comment-inner {\n        display: table-row;\n      }\n      .comment-avatar {\n        padding: 0 7px;\n        width: 40px;\n      }\n      .comment-depth,\n      .comment-avatar, \n      .comment-content {\n        padding-top: 8px;\n        padding-bottom: 8px;\n        display: table-cell;\n        vertical-align: top;\n      }\n      .comment-content {\n        padding-right: 7px;\n      }\n      h1,\n      h2,\n      h3,\n      h4 {\n        text-align: left;\n        font-size: 16px;\n        line-height: 20px;\n      }\n      h1.comment-heading,\n      h2.comment-heading,\n      h3.comment-heading,\n      h4.comment-heading {\n        margin-top: 7px;\n      }\n      p {\n        font-size: 14px;\n        line-height: 18px;\n        text-align: left;\n      }\n      #edit-comment {\n        background-color: white;\n        padding: 4px;\n      }\n      marked-element {\n        line-height: 16px;\n        font-size: 14.4px;\n      }\n      .nowrap-me marked-element:hover {\n        box-shadow: -1px 0 0 0 black inset;\n        cursor: pointer;\n      }\n      .nowrap-me marked-element ::slotted(#content p.marked-element) {\n        height: 32px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        margin-bottom: 35px;\n      }\n      .nowrap-me marked-element ::slotted(#content p.marked-element:after) {\n        content: "see more";\n        position: absolute;\n        bottom: 65px;\n        right: 17px;\n        color: #1976d2;\n      }\n      .comment-depth-1 {\n        width: 0;\n      }\n      .comment-depth-2 {\n        width: 54px;\n        border-right: 3px solid #ccc;\n      }\n      .comment-depth-3,\n      .comment-depth-4,\n      .comment-depth-5,\n      .comment-depth-6,\n      .comment-depth-7,\n      .comment-depth-8,\n      .comment-depth-9 {\n        width: 108px;\n        border-right: 3px solid #ccc;\n      }\n      .center {\n        padding: 0;\n      }\n      .circle {\n        border-radius: 50% !important;\n      }\n      .comment-actions {\n        margin: 0;\n        padding: 0;\n        display: block;\n        border-top: 1px solid #ddd;\n      }\n      .comment-actions lrnsys-button {\n        display: inline-flex;\n      }\n      .comment-actions .comment-actions-group {\n        margin: 0;\n        padding: 0;\n        display: block;\n      }\n      .comment-actions .comment-actions-group.left-actions {\n        float: left;\n      }\n      .comment-actions .comment-actions-group.right-actions {\n        float: right;\n      }\n      moment-element {\n        float: right;\n        font-size: 90%;\n        font-style: italic;\n        font-weight: normal;\n      }\n      paper-badge {\n        right: 0px;\n        top: 0px;\n      }\n      .like-icon-color {\n        color: #2196F3;\n      }\n      .element-invisible {\n        position: absolute;\n        left: -9999px;\n        top: 0;\n        width: 0;\n        height: 0;\n        overflow: hidden;\n      }\n    </style>\n    <div class\\$="comment-outer [[commentNew]]">\n      <div class="comment-inner">\n        <div class\\$="comment-depth comment-depth-[[comment.attributes.threadDepth]] grey lighten-3"></div>\n        <div class="comment-avatar">\n          <lrndesign-avatar id="avatar" label="[[comment.relationships.author.data.name]]" src="[[comment.relationships.author.data.avatar]]" class="float-left ferpa-protect"></lrndesign-avatar>\n          <paper-tooltip for="avatar" animation-delay="0" class="ferpa-protect">[[displayName]]</paper-tooltip>\n        </div>\n        <div class="comment-content">\n          <div class="comment-body">\n            <div id="bodyarea" class="nowrap-me">\n              <h4 class="ferpa-protect comment-heading">\n                <span class="element-invisible">At </span><moment-element datetime\\$="[[comment.attributes.created]]" output-format="MMM DD[,] YYYY"></moment-element>\n                [[comment.relationships.author.data.display_name]] <span class="element-invisible">[[comment.relationships.author.data.visual.label]]</span> said:\n              </h4>\n              <marked-element smartypants="" id="rendered-comment" markdown="[[comment.attributes.body]]">\n                <word-count class="markdown-html-slot" slot="markdown-html"></word-count>\n              </marked-element>\n            </div>\n            <mtz-marked-editor id="comment-editor" hidden="">\n              <div slot="controls">\n                <mtz-marked-control-generic-wrap icon="editor:format-bold" title="Bold" syntax-prefix="**" syntax-suffix="**" keys="ctrl+b"></mtz-marked-control-generic-wrap>\n                <mtz-marked-control-generic-wrap icon="editor:format-italic" title="Italic" syntax-prefix="_" syntax-suffix="_" keys="ctrl+i"></mtz-marked-control-generic-wrap>\n                <mtz-marked-control-generic-line icon="editor:format-size" title="Heading 3" syntax-prefix="### "></mtz-marked-control-generic-line>\n                <mtz-marked-control-generic-line icon="editor:format-list-numbered" title="Ordered List" syntax-prefix="1. "></mtz-marked-control-generic-line>\n                <mtz-marked-control-generic-line icon="editor:format-list-bulleted" title="Unordered List" syntax-prefix="- "></mtz-marked-control-generic-line>\n                <mtz-marked-control-link icon="editor:insert-link" title="Link"></mtz-marked-control-link>\n              </div>\n              <paper-textarea char-counter="" autofocus="" id="edit-comment" label="Comment" value="{{comment.attributes.body}}" slot="textarea"></paper-textarea>\n            </mtz-marked-editor>\n          </div>\n          <div class="comment-actions">\n            <div class="comment-actions-group left-actions">\n              <lrnsys-button on-click="actionHandler" id="reply" data-commentid="[[comment.id]]" alt="Reply" icon="reply" hover-class="[[hoverClass]]" icon-class="grey-text no-margin" hidden\\$="[[!comment.actions.reply]]"></lrnsys-button>\n              <lrnsys-button on-click="actionHandler" id="like" data-commentid="[[comment.id]]" alt="Like" icon="thumb-up" hover-class="[[hoverClass]]" icon-class="grey-text no-margin" hidden\\$="[[!comment.actions.like]]"></lrnsys-button>\n            </div>\n            <div class="comment-actions-group right-actions">\n              <lrnsys-button on-click="actionHandler" id="edit" data-commentid="[[comment.id]]" icon="create" alt="Edit" hover-class="[[hoverClass]]" icon-class="grey-text no-margin" hidden\\$="[[!comment.actions.edit]]"></lrnsys-button>\n              <lrnsys-button on-click="actionHandler" id="delete" data-commentid="[[comment.id]]" icon="delete-forever" alt="Delete" hover-class="[[hoverClass]]" icon-class="grey-text no-margin" hidden\\$="[[!comment.actions.delete]]"></lrnsys-button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <template is="dom-if" if="[[comment.relationships.author.data.visual.icon]]">\n      <paper-badge icon="[[comment.relationships.author.data.visual.icon]]" for="papercard" label="[[comment.relationships.author.data.visual.label]]">\n      </paper-badge>\n    </template>\n'])||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return o=function(){return t},t}e.Polymer({_template:e.html(o()),is:"lrnsys-comment",properties:{comment:{type:Object,notify:!0,observer:"_commentLoaded"},displayName:{type:String,notify:!0,computed:"_generateName(comment.relationships.author.data.display_name, comment.relationships.author.data.visual)"},commentNew:{type:String,notify:!0,computed:"_isCommentNew(comment.relationships.author.data.visual)"},hoverClass:{type:String,reflectToAttribute:!0},editform:{type:Boolean,notify:!0,observer:"_editTrigger",reflectToAttribute:!0},disabled:{type:Boolean,notify:!0,reflectToAttribute:!0}},attached:function(){this.$.bodyarea.addEventListener("tap",this.bodyToggle.bind(this)),this.$.bodyarea.addEventListener("dblclick",this.bodyToggleOn.bind(this))},detached:function(){this.$.bodyarea.removeEventListener("tap",this.bodyToggle.bind(this)),this.$.bodyarea.removeEventListener("dblclick",this.bodyToggleOn.bind(this))},_generateName:function(e,n){return"undefined"!==t(n)&&!1!==n.label?e+" ("+n.label+")":e},_isCommentNew:function(e){return"undefined"!==t(e)&&!1!==e.label?"new-comment":""},_commentLoaded:function(e){this.editform=this.comment.metadata.editing,this.disabled=this.comment.metadata.disabled,this.blockFirstState=!0},actionHandler:function(e){var t=n.dom(e).localTarget;null==t.dataCommentid||t.disabled||(t.dataCommentid,"reply"==t.id?this.fire("comment-reply",{comment:this.comment}):"like"==t.id?(this.shadowRoot.querySelector("#like").classList.toggle("like-icon-color"),this.fire("comment-like",{comment:this.comment})):"edit"==t.id?this.editform=!this.editform:"delete"==t.id&&this.fire("comment-delete-dialog",{comment:this.comment}))},_editTrigger:function(e){var n=this;"undefined"!==t(n.comment)&&n.comment.actions.edit&&n.async(function(){n.shadowRoot.querySelector("#rendered-comment").hidden=n.editform,n.shadowRoot.querySelector("#comment-editor").hidden=!n.editform,n.editform?(n.shadowRoot.querySelector("#edit").icon="save",n.shadowRoot.querySelector("#edit").alt="Save",n.shadowRoot.querySelector("#reply").disabled=!0,n.shadowRoot.querySelector("#edit-comment").focus(),n.fire("comment-editing",{comment:n.comment}),n.blockFirstState=!1):(n.blockFirstState?n.blockFirstState=!1:n.fire("comment-save",{comment:n.comment}),n.shadowRoot.querySelector("#edit").icon="create",n.shadowRoot.querySelector("#edit").alt="Edit",n.shadowRoot.querySelector("#reply").disabled=!1),document.querySelector("iron-list").fire("iron-resize")})},bodyToggle:function(e){this.$.bodyarea.classList.remove("nowrap-me"),document.querySelector("iron-list").fire("iron-resize")},bodyToggleOn:function(e){this.$.bodyarea.classList.toggle("nowrap-me"),document.querySelector("iron-list").fire("iron-resize")}})});
//# sourceMappingURL=lrnsys-comment.umd.js.map
