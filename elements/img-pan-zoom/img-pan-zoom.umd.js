!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(require("@polymer/polymer/polymer-legacy.js"),require("openseadragon/openseadragon.min.js")):"function"==typeof define&&define.amd?define(["@polymer/polymer/polymer-legacy.js","openseadragon/openseadragon.min.js"],i):i(e.polymerLegacy_js)}(this,function(e){"use strict";function i(e,i){return i||(i=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(i)}}))}function n(){var e=i(['\n    <img id="img" hidden="" src="[[src]]">\n']);return n=function(){return e},e}function o(){var e=i(['\n    <style>\n      :host {\n        display: block;\n        position: relative;\n        height: 500px;\n      }\n      #viewer{\n        position: relative;\n        height: 100%;\n        width: 100%;\n      }\n\n      paper-spinner-lite{\n        opacity: 0;\n        display: block;\n        transition: opacity 700ms;\n        position: absolute;\n        margin: auto;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        z-index: 1;\n        height: 70px;\n        width: 70px;\n        --paper-spinner-color: var(--img-pan-zoom-spinner-color, #2196F3);\n        --paper-spinner-stroke-width: var(--img-pan-zoom-spinner-width, 5px);\n        @apply(--img-pan-zoom-spinner);\n      }\n      paper-spinner-lite[active]{\n        opacity: 1;\n      }\n      [hidden]{\n        display: none;\n      }\n    </style>\n\n    \x3c!-- Only preload regular images --\x3e\n    <template is="dom-if" if="[[!dzi]]">\n      <paper-spinner-lite hidden$="[[hideSpinner]]" active="[[loading]]"></paper-spinner-lite>\n      <img-loader loaded="{{loaded}}" loading="{{loading}}" src="[[src]]"></img-loader>\n    </template>\n\n    \x3c!-- Openseadragon --\x3e\n    <div id="viewer"></div>\n'],['\n    <style>\n      :host {\n        display: block;\n        position: relative;\n        height: 500px;\n      }\n      #viewer{\n        position: relative;\n        height: 100%;\n        width: 100%;\n      }\n\n      paper-spinner-lite{\n        opacity: 0;\n        display: block;\n        transition: opacity 700ms;\n        position: absolute;\n        margin: auto;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        z-index: 1;\n        height: 70px;\n        width: 70px;\n        --paper-spinner-color: var(--img-pan-zoom-spinner-color, #2196F3);\n        --paper-spinner-stroke-width: var(--img-pan-zoom-spinner-width, 5px);\n        @apply(--img-pan-zoom-spinner);\n      }\n      paper-spinner-lite[active]{\n        opacity: 1;\n      }\n      [hidden]{\n        display: none;\n      }\n    </style>\n\n    \x3c!-- Only preload regular images --\x3e\n    <template is="dom-if" if="[[!dzi]]">\n      <paper-spinner-lite hidden\\$="[[hideSpinner]]" active="[[loading]]"></paper-spinner-lite>\n      <img-loader loaded="{{loaded}}" loading="{{loading}}" src="[[src]]"></img-loader>\n    </template>\n\n    \x3c!-- Openseadragon --\x3e\n    <div id="viewer"></div>\n']);return o=function(){return e},e}e.Polymer({_template:e.html(n()),is:"img-loader",properties:{src:{observer:"_srcChanged",type:String},loaded:{notify:!0,readOnly:!0,type:Boolean,value:!1},loading:{notify:!0,readOnly:!0,type:Boolean,value:!1},error:{notify:!0,readOnly:!0,type:Boolean,value:!1}},ready:function(){var e=this.$.img;e.onload=function(){this.$.img.src===this._resolveSrc(this.src)&&(this._setLoading(!1),this._setLoaded(!0),this._setError(!1))}.bind(this),e.onerror=function(){this.$.img.src===this._resolveSrc(this.src)&&(this._reset(),this._setLoading(!1),this._setLoaded(!1),this._setError(!0))}.bind(this),this._resolvedSrc=""},_srcChanged:function(e,i){var n=this._resolveSrc(e);n!==this._resolvedSrc&&(this._resolvedSrc=n,this._reset(),this._load(e))},_load:function(e){e?this.$.img.src=e:this.$.img.removeAttribute("src"),this._setLoading(!!e),this._setLoaded(!1),this._setError(!1)},_reset:function(){this.$.img.removeAttribute("src"),this._setLoading(!1),this._setLoaded(!1),this._setError(!1)},_resolveSrc:function(e){var i=this.ownerDocument.baseURI;return new URL(this.resolveUrl(e,i),i).href}}),e.Polymer({_template:e.html(o()),is:"img-pan-zoom",properties:{src:{type:String},dzi:{type:Boolean,value:!1},fadeIn:{type:Boolean,value:!0},loading:{type:Boolean,readonly:!0,notify:!0},hideSpinner:{type:Boolean,value:!1},loaded:{type:Boolean,readonly:!0,notify:!0,observer:"_loadedChanged"},showNavigationControl:{type:Boolean,value:!1},showNavigator:{type:Boolean,value:!1},zoomPerClick:{type:Number,value:2},zoomPerScroll:{type:Number,value:1.2},animationTime:{type:Number,value:1.2},navPrevNextWrap:{type:Boolean,value:!1},showRotationControl:{type:Boolean,value:!1},minZoomImageRatio:{type:Number,value:1},maxZoomPixelRatio:{type:Number,value:1.1},constrainDuringPan:{type:Boolean,value:!1},visibilityRatio:{type:Number,value:1}},observers:["_srcChanged(src)"],ready:function(){this.animationConfig={fade:{name:"fade-in-animation",node:this.$.viewer}},this.dzi&&this._initOpenSeadragon()},_initOpenSeadragon:function(){var e=this.src;this.dzi||(e={type:"image",url:this.src,buildPyramid:!1}),this.viewer=OpenSeadragon({element:this.$.viewer,visibilityRatio:this.visibilityRatio,constrainDuringPan:this.constrainDuringPan,showNavigationControl:this.showNavigationControl,showNavigator:this.showNavigator,zoomPerClick:this.zoomPerClick,zoomPerScroll:this.zoomPerScroll,animationTime:this.animationTime,navPrevNextWrap:this.navPrevNextWrap,showRotationControl:this.showRotationControl,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,tileSources:e}),this.init=!0},destroy:function(){this.viewer.destroy()},zoomIn:function(){var e=this.viewer.viewport.getZoom()+.7;e<this.viewer.viewport.getMaxZoom()&&this.viewer.viewport.zoomTo(e)},zoomOut:function(){var e=this.viewer.viewport.getZoom(),i=this.viewer.viewport.getMinZoom(),n=e-.7;n>i?this.viewer.viewport.zoomTo(n):i!=e&&this.resetZoom()},resetZoom:function(){this.viewer.viewport.goHome()},_srcChanged:function(){this.dzi&&this.init&&this._addTiledImage()},_loadedChanged:function(){this.loaded&&(this.init?this._addImage():this._initOpenSeadragon())},_addImage:function(){this.viewer.addSimpleImage({url:this.src,index:0,replace:!0})},_addTiledImage:function(){this.viewer.addTiledImage({tileSource:this.src,index:0,replace:!0})}})});
//# sourceMappingURL=img-pan-zoom.umd.js.map
