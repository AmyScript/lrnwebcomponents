{"version":3,"file":"outline-designer.umd.js","sources":["lib/sortable-list.js","outline-designer.umd.js"],"sourcesContent":["/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { GestureEventListeners } from \"@polymer/polymer/lib/mixins/gesture-event-listeners.js\";\nimport * as async from \"@polymer/polymer/lib/utils/async.js\";\nimport * as Gestures from \"@polymer/polymer/lib/utils/gestures.js\";\n/**\n * `outline-designer`\n * `tools to modify and visualize JSON Outline Schema for editing`\n *\n * @microcopy - language worth noting:\n *\n * @customElement\n * @polymer\n * @demo demo/index.html\n */\nclass SortableList extends GestureEventListeners(PolymerElement) {\n  // render function\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: flex;\n        }\n        #items ::slotted(*) {\n          user-drag: none;\n          user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n          -webkit-user-drag: none;\n          -webkit-user-select: none;\n          -webkit-tap-highlight-color: rgba(255, 255, 255, 0);\n        }\n        #items ::slotted(.item--transform) {\n          left: 0;\n          margin: 0 !important;\n          position: fixed !important;\n          top: 0;\n          transition: transform 0.2s cubic-bezier(0.333, 0, 0, 1);\n          will-change: transform;\n          z-index: 1;\n        }\n        #items ::slotted(.item--pressed) {\n          transition: none !important;\n        }\n        #items ::slotted(.item--dragged) {\n          -webkit-box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n          filter: brightness(1.1);\n          z-index: 2;\n        }\n      </style>\n      <div id=\"items\"><slot id=\"slot\"></slot></div>\n    `;\n  }\n  static get is() {\n    return \"sortable-list\";\n  }\n  static get properties() {\n    return {\n      /**\n       * This is a CSS selector string. If this is set, only items that\n       * match the CSS selector are sortable.\n       */\n      sortable: String,\n      /**\n       * The list of sortable items.\n       */\n      items: {\n        type: Array,\n        notify: true,\n        readOnly: true\n      },\n      /**\n       * Returns true when an item is being drag.\n       */\n      dragging: {\n        type: Boolean,\n        notify: true,\n        readOnly: true,\n        reflectToAttribute: true,\n        value: false\n      },\n      /**\n       * Disables the draggable if set to true.\n       */\n      disabled: {\n        type: Boolean,\n        reflectToAttribute: true,\n        value: false\n      }\n    };\n  }\n  constructor() {\n    super();\n    this._observer = null;\n    this._target = null;\n    this._targetRect = null;\n    this._rects = null;\n    this._onTrack = this._onTrack.bind(this);\n    this._onDragStart = this._onDragStart.bind(this);\n    this._onTransitionEnd = this._onTransitionEnd.bind(this);\n    this._onContextMenu = this._onContextMenu.bind(this);\n    this._onTouchMove = this._onTouchMove.bind(this);\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    async.microTask.run(() => {\n      this._observeItems();\n      this._updateItems();\n      this._toggleListeners({ enable: true });\n    });\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this._unobserveItems();\n    this._toggleListeners({ enable: false });\n  }\n  _toggleListeners({ enable }) {\n    const m = enable ? \"addEventListener\" : \"removeEventListener\";\n    this.$.items[m](\"dragstart\", this._onDragStart);\n    this.$.items[m](\"transitionend\", this._onTransitionEnd);\n    this.$.items[m](\"contextmenu\", this._onContextMenu);\n    this.$.items[m](\"touchmove\", this._onTouchMove);\n    if (enable) {\n      Gestures.addListener(this, \"track\", this._onTrack);\n    } else {\n      Gestures.removeListener(this, \"track\", this._onTrack);\n    }\n  }\n  _onTrack(event) {\n    switch (event.detail.state) {\n      case \"start\":\n        this._trackStart(event);\n        break;\n      case \"track\":\n        this._track(event);\n        break;\n      case \"end\":\n        this._trackEnd(event);\n        break;\n    }\n  }\n  _trackStart(event) {\n    if (this.disabled) {\n      return;\n    }\n    this._target = this._itemFromEvent(event);\n    if (!this._target) {\n      return;\n    }\n    event.stopPropagation();\n    this._rects = this._getItemsRects();\n    this._targetRect = this._rects[this.items.indexOf(this._target)];\n    this._target.classList.add(\"item--dragged\", \"item--pressed\");\n    if (\"vibrate\" in navigator) {\n      navigator.vibrate(30);\n    }\n    const rect = this.getBoundingClientRect();\n    this.style.height = rect.height + \"px\";\n    this.style.width = rect.width + \"px\";\n    this.items.forEach((item, idx) => {\n      const rect = this._rects[idx];\n      item.classList.add(\"item--transform\");\n      item.style.transition = \"none\";\n      item.__originalWidth = item.style.width;\n      item.__originalHeight = item.style.height;\n      item.style.width = rect.width + \"px\";\n      item.style.height = rect.height + \"px\";\n      this._translate3d(rect.left, rect.top, 1, item);\n      setTimeout(_ => {\n        item.style.transition = null;\n      }, 20);\n    });\n    this._setDragging(true);\n  }\n  _track(event) {\n    if (!this.dragging) {\n      return;\n    }\n    const left = this._targetRect.left + event.detail.dx;\n    const top = this._targetRect.top + event.detail.dy;\n    this._translate3d(left, top, 1, this._target);\n    const overItem = this._itemFromCoords(event.detail);\n    if (overItem && overItem !== this._target) {\n      const overItemIndex = this.items.indexOf(overItem);\n      const targetIndex = this.items.indexOf(this._target);\n      this._moveItemArray(this.items, targetIndex, overItemIndex);\n      for (let i = 0; i < this.items.length; i++) {\n        if (this.items[i] !== this._target) {\n          const rect = this._rects[i];\n          requestAnimationFrame(_ => {\n            this._translate3d(rect.left, rect.top, 1, this.items[i]);\n          });\n        }\n      }\n    }\n  }\n  // The track really ends\n  _trackEnd(event) {\n    if (!this.dragging) {\n      return;\n    }\n    const rect = this._rects[this.items.indexOf(this._target)];\n    this._target.classList.remove(\"item--pressed\");\n    this._setDragging(false);\n    this._translate3d(rect.left, rect.top, 1, this._target);\n  }\n  _onTransitionEnd() {\n    if (this.dragging || !this._target) {\n      return;\n    }\n    const fragment = document.createDocumentFragment();\n    this.items.forEach(item => {\n      item.style.transform = \"\";\n      item.style.width = item.__originalWidth;\n      item.style.height = item.__originalHeight;\n      item.classList.remove(\"item--transform\");\n      fragment.appendChild(item);\n    });\n    if (this.children[0]) {\n      this.insertBefore(fragment, this.children[0]);\n    } else {\n      this.appendChild(fragment);\n    }\n    this.style.height = \"\";\n    this._target.classList.remove(\"item--dragged\");\n    this._rects = null;\n    this._targetRect = null;\n    this._updateItems();\n    this.dispatchEvent(\n      new CustomEvent(\"sort-finish\", {\n        composed: true,\n        detail: {\n          target: this._target\n        }\n      })\n    );\n    this._target = null;\n  }\n  _onDragStart(event) {\n    event.preventDefault();\n  }\n  _onContextMenu(event) {\n    if (this.dragging) {\n      event.preventDefault();\n      this._trackEnd();\n    }\n  }\n  _onTouchMove(event) {\n    event.preventDefault();\n  }\n  _updateItems() {\n    if (this.dragging) {\n      return;\n    }\n    const items = this.$.slot.assignedNodes().filter(node => {\n      if (\n        node.nodeType === Node.ELEMENT_NODE &&\n        (!this.sortable || node.matches(this.sortable))\n      ) {\n        return true;\n      }\n    });\n    this._setItems(items);\n  }\n  _itemFromCoords({ x, y }) {\n    if (!this._rects) {\n      return;\n    }\n    let match = null;\n    this._rects.forEach((rect, i) => {\n      if (\n        x >= rect.left &&\n        x <= rect.left + rect.width &&\n        y >= rect.top &&\n        y <= rect.top + rect.height\n      ) {\n        match = this.items[i];\n      }\n    });\n    return match;\n  }\n  _itemFromEvent(event) {\n    const path = event.composedPath();\n    for (var i = 0; i < path.length; i++) {\n      if (this.items.indexOf(path[i]) > -1) {\n        return path[i];\n      }\n    }\n  }\n  _getItemsRects() {\n    return this.items.map(item => {\n      return item.getBoundingClientRect();\n    });\n  }\n  _observeItems() {\n    if (!this._observer) {\n      this._observer = new MutationObserver(_ => {\n        this._updateItems();\n      });\n      this._observer.observe(this, { childList: true });\n    }\n  }\n  _unobserveItems() {\n    if (this._observer) {\n      this._observer.disconnect();\n      this._observer = null;\n    }\n  }\n  /**\n   * Move an array item from one position to another.\n   * Source: http://stackoverflow.com/questions/5306680/move-an-array-element-from-one-array-position-to-another\n   */\n  _moveItemArray(array, oldIndex, newIndex) {\n    if (newIndex >= array.length) {\n      var k = newIndex - array.length;\n      while (k-- + 1) {\n        array.push(undefined);\n      }\n    }\n    array.splice(newIndex, 0, array.splice(oldIndex, 1)[0]);\n    return array;\n  }\n  _translate3d(x, y, z, el) {\n    el.style.transform = `translate3d(${x}px, ${y}px, ${z}px)`;\n  }\n}\nwindow.customElements.define(\"sortable-list\", SortableList);\nexport { SortableList };\n","/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport * as async from \"@polymer/polymer/lib/utils/async.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@polymer/iron-icons/social-icons.js\";\nimport \"@polymer/iron-pages/iron-pages.js\";\nimport \"@polymer/iron-image/iron-image.js\";\nimport \"@polymer/paper-button/paper-button.js\";\nimport \"@polymer/paper-card/paper-card.js\";\nimport \"@polymer/iron-ajax/iron-ajax.js\";\nimport \"@polymer/iron-list/iron-list.js\";\nimport \"@polymer/iron-swipeable-container/iron-swipeable-container.js\";\nimport \"@polymer/paper-tooltip/paper-tooltip.js\";\nimport \"@polymer/paper-progress/paper-progress.js\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar.js\";\nimport \"@polymer/app-layout/app-header/app-header.js\";\nimport \"@lrnwebcomponents/item-overlay-ops/item-overlay-ops.js\";\nimport \"@lrnwebcomponents/lrnsys-outline/lrnsys-outline.js\";\nimport \"@lrnwebcomponents/simple-colors/simple-colors.js\";\nimport \"@lrnwebcomponents/simple-modal/simple-modal.js\";\nimport \"./lib/sortable-list.js\";\n/**\n * `outline-designer`\n * `tools to modify and visualize JSON Outline Schema for editing`\n *\n * @microcopy - language worth noting:\n *  -\n * Feedback\n * color code lessons\nstep down the hierarchy\n\nmode vs resolution (3 levels)\n\n *\n * @customElement\n * @polymer\n * @demo demo/index.html\n */\nclass OutlineDesigner extends PolymerElement {\n  \n  // render function\n  static get template() {\n    return html`\n<style>:host {\n  display: block;\n}\n\n:host([hidden]) {\n  display: none;\n}\n\napp-toolbar {\n  background-color: var(--simple-colors-default-theme-light-blue-1, #4285f4);\n  color: var(--simple-colors-default-theme-grey-12, #222222);\n  margin: 20px 0;\n}\n\n#viewmode, #detailsmode {\n  transition: .3s all ease;\n  -webkit-transition: .3s all ease;\n  -moz-transition: .3s all ease;\n  -ms-transition: .3s all ease;\n  -o-transition: .3s all ease;\n}\n.rotate-90 {\n  transform: rotate(90deg);\n  -webkit-transform: rotate(90deg);\n  -moz-transform: rotate(90deg);\n  -ms-transform: rotate(90deg);\n  -o-transform: rotate(90deg);\n}\n\n.breadcrumb-arrow:first-child {\n    display: none;\n}\n.breadcrumb-arrow {\n  color: var(--breadcrumb-color1,rgb(67, 110, 144));\n  margin: -2px 6px 0 6px;\n}\n.breadcrumb {\n  text-decoration: none;\n  -webkit-tap-highlight-color: transparent;\n  background-color: transparent;\n  line-height: 34px;\n  font-size: 18px;\n  color: var(--breadcrumb-color1,rgb(67, 110, 144));\n  opacity: 0.8;\n}\n\npaper-progress {\n  display: block;\n  width: 100%;\n  --paper-progress-active-color: rgba(255, 255, 255, 0.5);\n  --paper-progress-container-color: transparent;\n}\n.card-wrapper {\n  padding: 16px;\n}\n\n#sort .card-wrapper {\n  background: #dddddd;\n  display: inline-block;\n  float: left;\n  margin: 16px;\n  vertical-align: top;\n}\n\npaper-card {\n  width: 250px;\n  height: 300px;\n  display: block;\n  visibility: visible;\n  opacity: 1;\n}\n\n#addbutton {\n  opacity: .6;\n  background-color: #dddddd;\n}\n.add-button {\n  width: 200px;\n  height: 200px;\n  margin: auto;\n  display: flex;\n}\n\npaper-card.expanded {\n  min-height: 300px;\n}\n\niron-list {\n  flex: 1 1 auto;\n}\n\n.low-detail,\n.mid-detail,\n.high-detail {\n  visibility: visible;\n  opacity: 1;\n  transition: .6s all ease;\n  -webkit-transition: .6s all ease;\n  -moz-transition: .6s all ease;\n  -ms-transition: .6s all ease;\n  -o-transition: .6s all ease;\n}\n\n:host([details-mode=\"low\"]) .mid-detail,\n:host([details-mode=\"low\"]) .high-detail {\n  visibility: hidden;\n  opacity: 0;\n}\n\n:host([details-mode=\"mid\"]) .high-detail {\n  visibility: hidden;\n  opacity: 0;\n}\n:host([details-mode=\"mid\"]) .mid-detail {\n  visibility: visible;\n  opacity: 1;\n}\n\npaper-card.card-low-detail {\n  width: 150px;\n  height: 150px;\n}\npaper-card.card-mid-detail {\n  width: 250px;\n  height: 250px;\n}\npaper-card.card-high-detail {\n  width: 250px;\n  height: 300px;\n}\n\n.tf-tree{transition: .3s all ease;font-size:16px;overflow:auto}.tf-tree *{transition: .3s all ease;box-sizing:border-box;margin:0;padding:0}.tf-tree ul{display:inline-flex}.tf-tree li{align-items:center;display:flex;flex-direction:column;flex-wrap:wrap;padding:0 1em;position:relative}.tf-tree li ul{margin:2em 0}.tf-tree li li:before{border-top:.0625em solid #000;content:\"\";display:block;height:.0625em;left:-.03125em;position:absolute;top:-1.03125em;width:100%}.tf-tree li li:first-child:before{left:calc(50% - .03125em);max-width:calc(50% + .0625em)}.tf-tree li li:last-child:before{left:auto;max-width:calc(50% + .0625em);right:calc(50% - .03125em)}.tf-tree li li:only-child:before{display:none}.tf-tree li li:only-child>.tf-nc:before,.tf-tree li li:only-child>.tf-node-content:before{height:1.0625em;top:-1.0625em}.tf-tree .tf-nc,.tf-tree .tf-node-content{border:.0625em solid #000;display:inline-block;padding:.5em 1em;position:relative}.tf-tree .tf-nc:before,.tf-tree .tf-node-content:before{top:-1.03125em}.tf-tree .tf-nc:after,.tf-tree .tf-nc:before,.tf-tree .tf-node-content:after,.tf-tree .tf-node-content:before{border-left:.0625em solid #000;content:\"\";display:block;height:1em;left:calc(50% - .03125em);position:absolute;width:.0625em}.tf-tree .tf-nc:after,.tf-tree .tf-node-content:after{top:calc(100% + .03125em)}.tf-tree .tf-nc:only-child:after,.tf-tree .tf-node-content:only-child:after,.tf-tree>ul>li>.tf-nc:before,.tf-tree>ul>li>.tf-node-content:before{display:none}.tf-tree.tf-gap-sm li{padding:0 .6em}.tf-tree.tf-gap-sm li>.tf-nc:before,.tf-tree.tf-gap-sm li>.tf-node-content:before{height:.6em;top:-.6em}.tf-tree.tf-gap-sm li>.tf-nc:after,.tf-tree.tf-gap-sm li>.tf-node-content:after{height:.6em}.tf-tree.tf-gap-sm li ul{margin:1.2em 0}.tf-tree.tf-gap-sm li li:before{top:-.63125em}.tf-tree.tf-gap-sm li li:only-child>.tf-nc:before,.tf-tree.tf-gap-sm li li:only-child>.tf-node-content:before{height:.6625em;top:-.6625em}.tf-tree.tf-gap-lg li{padding:0 1.5em}.tf-tree.tf-gap-lg li>.tf-nc:before,.tf-tree.tf-gap-lg li>.tf-node-content:before{height:1.5em;top:-1.5em}.tf-tree.tf-gap-lg li>.tf-nc:after,.tf-tree.tf-gap-lg li>.tf-node-content:after{height:1.5em}.tf-tree.tf-gap-lg li ul{margin:3em 0}.tf-tree.tf-gap-lg li li:before{top:-1.53125em}.tf-tree.tf-gap-lg li li:only-child>.tf-nc:before,.tf-tree.tf-gap-lg li li:only-child>.tf-node-content:before{height:1.5625em;top:-1.5625em}.tf-tree li.tf-dotted-children .tf-nc:after,.tf-tree li.tf-dotted-children .tf-nc:before,.tf-tree li.tf-dotted-children .tf-node-content:after,.tf-tree li.tf-dotted-children .tf-node-content:before{border-left-style:dotted}.tf-tree li.tf-dotted-children li:before{border-top-style:dotted}.tf-tree li.tf-dotted-children>.tf-nc:before,.tf-tree li.tf-dotted-children>.tf-node-content:before{border-left-style:solid}.tf-tree li.tf-dashed-children .tf-nc:after,.tf-tree li.tf-dashed-children .tf-nc:before,.tf-tree li.tf-dashed-children .tf-node-content:after,.tf-tree li.tf-dashed-children .tf-node-content:before{border-left-style:dashed}.tf-tree li.tf-dashed-children li:before{border-top-style:dashed}.tf-tree li.tf-dashed-children>.tf-nc:before,.tf-tree li.tf-dashed-children>.tf-node-content:before{border-left-style:solid}\n.tf-label {\n  transition: .3s all ease;\n  cursor: pointer;\n}\n\n.node-high-detail li iron-image {\n  height: 50px;\n  position: static;\n}\n.node-high-detail li .tf-label {\n  z-index: 1;\n  position: relative;\n  font-size: 1.75em;\n  padding: 8px;\n  background-color: rgba(250,250,250,.8);\n}\n\n  .node-low-detail .tf-nc {\n    height: 32px;\n    width: 32px;\n    background-color: dodgerblue;\n    border-color: dodgerblue;\n    padding: 0;\n    border-radius: 50%;\n    overflow: hidden;\n    -webkit-border-radius: 50%;\n    -moz-border-radius: 50%;\n    -ms-border-radius: 50%;\n    -o-border-radius: 50%;\n  }\n\n  \n  .node-low-detail .tf-nc:before,\n  .node-low-detail .tf-nc:after {\n    border-left-color: dodgerblue;\n    border-left-width: 2px;\n  }\n  .node-low-detail li li:before {\n    border-top-color: dodgerblue;\n    border-top-width: 2px;\n  }</style>\n<style is=\"custom-style\" include=\"simple-colors\"></style>\n<iron-ajax\n  auto\n  url=\"[[outlineSchemaUrl]]\"\n  handle-as=\"json\"\n  on-response=\"handleResponse\"\n  last-response=\"{{manifest}}\"\n  loading=\"{{__loading}}\">\n</iron-ajax>\n<app-header reveals>\n  <app-toolbar>\n    View: [[viewModeLabel]]\n    <paper-icon-button on-tap=\"_toggleViewMode\" id=\"viewmode\" icon=\"[[viewModeIcon]]\"></paper-icon-button>\n    <paper-tooltip for=\"viewmode\">[[viewModeLabel]]</paper-tooltip>\n    Detail: [[detailsModeLabel]]\n    <paper-icon-button on-tap=\"_toggleDetailsMode\" id=\"detailsmode\" icon=\"[[detailsModeIcon]]\"></paper-icon-button>\n    <paper-tooltip for=\"detailsmode\">[[detailsModeLabel]]</paper-tooltip>\n    <div main-title class=\"flex layout breadcrumb_layout\">\n      <iron-icon class=\"breadcrumb-arrow\" icon=\"icons:chevron-right\"></iron-icon>\n      <a class=\"breadcrumb\" id=\"main\">[[manifest.title]]</a>\n\n          <iron-icon class=\"breadcrumb-arrow\" icon=\"icons:chevron-right\"></iron-icon>\n      <a class=\"breadcrumb\" id=\"second\">Lesson 2</a>\n\n          <iron-icon class=\"breadcrumb-arrow\" icon=\"icons:chevron-right\"></iron-icon>\n      <a class=\"breadcrumb\" id=\"third\">Math Basics</a>\n    </div>\n    <div>\n      <paper-icon-button id=\"helpbutton\" icon=\"icons:help\" title=\"help\"></paper-icon-button>\n      <paper-tooltip for=\"helpbutton\">Help</paper-tooltip>\n    </div>\n    <paper-progress value=\"10\" indeterminate bottom-item hidden$=\"[[!__loading]]\"></paper-progress>\n  </app-toolbar>\n</app-header>\n<iron-pages selected=\"[[selectedView]]\">\n  <section id=\"listpage\">\n    <iron-list id=\"ironlist\" items=\"[[manifest.items]]\" as=\"item\" grid>\n    <template>\n      <div class=\"card-wrapper\">\n      <item-overlay-ops fixed-height=\"140\" data-item-id$=\"[[item.id]]\" add=\"\" edit=\"\" remove=\"\" duplicate=\"\" move=\"\" edit-mode=\"\">\n        <paper-card class$=\"card-[[detailsMode]]-detail\" heading=\"[[item.title]]\" image=\"[[item.metadata.image]]\" elevation=\"2\" animated-shadow=\"false\">\n          <div class=\"card-content mid-detail\">[[item.description]]</div>\n          <div class=\"card-actions high-detail\">\n            <ul>\n              <iron-swipeable-container swipe-style=\"curve\"><li>Page 1</li></iron-swipeable-container>\n              <iron-swipeable-container swipe-style=\"curve\"><li>Page 2</li></iron-swipeable-container>\n              <iron-swipeable-container swipe-style=\"curve\"><li>Page 3</li></iron-swipeable-container>\n            </ul>\n          </div>\n        </paper-card>\n      </item-overlay-ops>\n      </div>\n    </template>\n    </iron-list>\n  </section>\n  <section id=\"outlinepage\">\n    <lrnsys-outline id=\"outline\" items=\"{{manifest.items}}\" title=\"[[manifest.title]]\"></lrnsys-outline>\n  </section>\n  <section id=\"treepage\">\n    <div class$=\"node-[[detailsMode]]-detail tf-tree\">\n      <ul>\n        <template is=\"dom-repeat\" items=\"{{manifest.items}}\" as=\"item\" mutable-data>\n        <li>\n          <span class=\"tf-nc\">\n            <div class=\"tf-label\" id$=\"item-tip-[[item.id]]\">[[item.title]]</div>\n            <paper-tooltip for$=\"item-tip-[[item.id]]\">[[item.title]]</paper-tooltip>\n            <iron-image src=\"[[item.metadata.image]]\" preload sizing=\"cover\" class=\"high-detail\"></iron-image>\n          </span>\n        </li>\n        </template>\n      </ul>\n    </div>\n  </section>\n  <section id=\"sortpage\">\n    <sortable-list id=\"sort\" sortable=\".card-wrapper\" on-sort-finish=\"_onSortFinish\" dragging=\"{{dragging}}\">\n      <template is=\"dom-repeat\" items=\"{{manifest.items}}\" as=\"item\" mutable-data>\n        <div class=\"card-wrapper\">\n          <paper-card class$=\"card-[[detailsMode]]-detail\" data-item-id$=\"[[item.id]]\" heading=\"[[item.title]]\" image=\"[[item.metadata.image]]\" elevation=\"2\"\n            animated-shadow=\"false\">\n            <div class=\"card-content mid-detail\">[[item.description]]</div>\n            <div class=\"card-actions high-detail\"></div>\n          </paper-card>\n        </div>\n      </template>\n    </sortable-list>\n  </section>\n</iron-pages>\n<slot></slot>`;\n  }\n\n  // properties available to the custom element for data binding\n  static get properties() {\n    return {\n  /**\n   * Which layout to the outline to display\n   */\n  \"viewMode\": {\n    \"name\": \"viewMode\",\n    \"type\": \"String\",\n    \"value\": \"cards\",\n    \"observer\": \"_viewModeChanged\"\n  },\n  /**\n   * Icon for the selected view mode\n   */\n  \"viewModeIcon\": {\n    \"name\": \"viewModeIcon\",\n    \"type\": \"String\"\n  },\n  /**\n   * Label for the selected view mode\n   */\n  \"viewModeLabel\": {\n    \"name\": \"viewModeLabel\",\n    \"type\": \"String\"\n  },\n  /**\n   * Which layout to the outline to display\n   */\n  \"detailsMode\": {\n    \"name\": \"detailsMode\",\n    \"type\": \"String\",\n    \"value\": \"mid\",\n    \"reflectToAttribute\": true,\n    \"observer\": \"_detailsModeChanged\"\n  },\n  /**\n   * Icon for the selected view mode\n   */\n  \"detailsModeIcon\": {\n    \"name\": \"detailsModeIcon\",\n    \"type\": \"String\"\n  },\n  /**\n   * Label for the selected view mode\n   */\n  \"detailsModeLabel\": {\n    \"name\": \"detailsModeLabel\",\n    \"type\": \"String\"\n  },\n  /**\n   * Data binding to show the selected view\n   */\n  \"selectedView\": {\n    \"name\": \"selectedView\",\n    \"type\": \"Number\"\n  },\n  /**\n   * Whether or not we are in an editing state\n   */\n  \"editMode\": {\n    \"name\": \"editMode\",\n    \"type\": \"String\",\n    \"value\": false,\n    \"reflectToAttribute\": true,\n    \"observer\": \"_editModeChanged\"\n  },\n  /**\n   * end point / JSON to load\n   */\n  \"outlineSchemaUrl\": {\n    \"name\": \"outlineSchemaUrl\",\n    \"type\": \"String\"\n  },\n  /**\n   * JSON outline schema manifest\n   */\n  \"manifest\": {\n    \"name\": \"manifest\",\n    \"type\": \"Object\",\n    \"notify\": true\n  },\n  /**\n   * Data in outline format\n   */\n  \"outlineData\": {\n    \"name\": \"outlineData\",\n    \"type\": \"Object\",\n    \"notify\": true\n  }\n}\n;\n  }\n\n  /**\n   * Store the tag name to make it easier to obtain directly.\n   */\n  static get tag() {\n    return \"outline-designer\";\n  }\n  /**\n   * life cycle, element is afixed to the DOM\n   */\n  connectedCallback() {\n    super.connectedCallback();\n    this.$.ironlist.addEventListener(\n      \"item-overlay-op-changed\",\n      this._overlayOpChanged.bind(this)\n    );\n    this.$.ironlist.addEventListener(\n      \"item-overlay-option-selected\",\n      this._overlayOpSelected.bind(this)\n    );\n  }\n  /**\n   * life cycle, element is removed from the DOM\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.$.ironlist.removeEventListener(\n      \"item-overlay-op-changed\",\n      this._overlayOpChanged.bind(this)\n    );\n    this.$.ironlist.removeEventListener(\n      \"item-overlay-option-selected\",\n      this._overlayOpSelected.bind(this)\n    );\n  }\n  /**\n   * toggle between view modes\n   */\n  _toggleViewMode(e) {\n    switch (this.viewMode) {\n      case \"cards\":\n        this.viewMode = \"outline\";\n        break;\n      case \"outline\":\n        this.outlineData = this.$.outline.getData();\n        this.viewMode = \"tree\";\n        break;\n      case \"tree\":\n        this.viewMode = \"drag\";\n        break;\n      case \"drag\":\n        this.viewMode = \"cards\";\n        break;\n    }\n  }\n  /**\n   * toggle between details mode\n   */\n  _toggleDetailsMode(e) {\n    switch (this.detailsMode) {\n      case \"low\":\n        this.detailsMode = \"mid\";\n        break;\n      case \"mid\":\n        this.detailsMode = \"high\";\n        break;\n      case \"high\":\n        this.detailsMode = \"low\";\n        break;\n    }\n  }\n  // Observer details mode for changes\n  _detailsModeChanged(newValue, oldValue) {\n    if (typeof newValue !== typeof undefined) {\n      switch (newValue) {\n        case \"low\":\n          this.detailsModeIcon = \"icons:apps\";\n          this.detailsModeLabel = \"Low\";\n          break;\n        case \"mid\":\n          this.detailsModeIcon = \"icons:view-module\";\n          this.detailsModeLabel = \"Medium\";\n          break;\n        case \"high\":\n          this.detailsModeIcon = \"icons:view-carousel\";\n          this.detailsModeLabel = \"High\";\n          break;\n      }\n      // fire resize event if iron-list is visible\n      if (this.selectedView === 0) {\n        async.microTask.run(() => {\n          setTimeout(() => {\n            this.$.ironlist.fire(\"iron-resize\");\n            window.dispatchEvent(new Event(\"resize\"));\n          }, 50);\n        });\n      }\n    }\n  }\n  /**\n   * Sorting of items has finished, meaning drag drop complete\n   */\n  _onSortFinish(e) {\n    // @todo ensure items align with what's been drag and drop reordered\n    console.log(e.detail);\n  }\n  /**\n   * overlay operation changed\n   */\n  _overlayOpChanged(e) {\n    console.log(e.detail);\n    switch (e.detail.operation) {\n      case \"add\":\n        // @todo execute adding an item after here\n        console.log(\"add item\");\n        console.log(e.detail.element.getAttribute(\"data-item-id\"));\n        break;\n      case \"edit\":\n        // @todo execute edit item here\n        console.log(\"edit item\");\n        console.log(e.detail.element.getAttribute(\"data-item-id\"));\n        break;\n    }\n  }\n  /**\n   * Option selected in overlay by the user\n   */\n  _overlayOpSelected(e) {\n    console.log(e.detail);\n    switch (e.detail.operation) {\n      case \"move\":\n        if (e.detail.option === \"option1\") {\n          // @todo execute move left\n          console.log(\"move left\");\n        } else if (e.detail.option === \"option2\") {\n          // @todo execute move right\n          console.log(\"move right\");\n        }\n        console.log(e.detail.element.getAttribute(\"data-item-id\"));\n        break;\n      case \"duplicate\":\n        if (e.detail.option === \"option1\") {\n          // @todo execute duplicate\n          console.log(\"duplicate\");\n          console.log(e.detail.element.getAttribute(\"data-item-id\"));\n        }\n        break;\n      case \"remove\":\n        if (e.detail.option === \"option1\") {\n          // @todo execute delete\n          console.log(\"remove\");\n          console.log(e.detail.element.getAttribute(\"data-item-id\"));\n        }\n        break;\n    }\n  }\n  // Observer layoutMode for changes\n  _viewModeChanged(newValue, oldValue) {\n    if (typeof newValue !== typeof undefined) {\n      switch (newValue) {\n        case \"cards\":\n          this.$.viewmode.classList.add(\"rotate-90\");\n          this.selectedView = 0;\n          this.viewModeIcon = \"icons:view-module\";\n          this.viewModeLabel = \"Card view\";\n          async.microTask.run(() => {\n            setTimeout(() => {\n              this.$.ironlist.fire(\"iron-resize\");\n              window.dispatchEvent(new Event(\"resize\"));\n            }, 100);\n          });\n          break;\n        case \"outline\":\n          this.$.viewmode.classList.remove(\"rotate-90\");\n          this.selectedView = 1;\n          this.viewModeIcon = \"icons:view-list\";\n          this.viewModeLabel = \"Outline view\";\n          break;\n        case \"tree\":\n          this.$.viewmode.classList.add(\"rotate-90\");\n          this.selectedView = 2;\n          this.viewModeIcon = \"social:share\";\n          this.viewModeLabel = \"Tree view\";\n          break;\n        case \"drag\":\n          this.$.viewmode.classList.remove(\"rotate-90\");\n          this.selectedView = 3;\n          this.viewModeIcon = \"icons:touch-app\";\n          this.viewModeLabel = \"Draggable cards\";\n          break;\n      }\n    }\n  }\n  // Observer editMode for changes\n  _editModeChanged(newValue, oldValue) {\n    if (typeof newValue !== typeof undefined) {\n      console.log(newValue);\n    }\n  }\n}\nwindow.customElements.define(\"outline-designer\", OutlineDesigner);\nexport { OutlineDesigner };\n"],"names":["SortableList","_observer","_target","_targetRect","_rects","_onTrack","_this","bind","_onDragStart","_onTransitionEnd","_onContextMenu","_onTouchMove","GestureEventListeners","PolymerElement","html","sortable","String","items","type","Array","notify","readOnly","dragging","Boolean","reflectToAttribute","value","disabled","async","run","_this2","_observeItems","_updateItems","_toggleListeners","enable","_unobserveItems","m","$","this","Gestures","event","detail","state","_trackStart","_track","_trackEnd","_itemFromEvent","stopPropagation","_getItemsRects","indexOf","classList","add","navigator","vibrate","rect","getBoundingClientRect","style","height","width","forEach","item","idx","_this3","transition","__originalWidth","__originalHeight","_translate3d","left","top","setTimeout","_","_setDragging","dx","dy","overItem","_itemFromCoords","overItemIndex","targetIndex","_moveItemArray","i","_this4","requestAnimationFrame","length","remove","fragment","document","createDocumentFragment","transform","appendChild","children","insertBefore","dispatchEvent","CustomEvent","composed","target","preventDefault","slot","assignedNodes","filter","node","nodeType","Node","ELEMENT_NODE","_this5","matches","_setItems","x","y","match","_this6","path","composedPath","map","MutationObserver","_this7","observe","childList","disconnect","array","oldIndex","newIndex","k","push","undefined","splice","z","el","window","customElements","define","OutlineDesigner","ironlist","addEventListener","_overlayOpChanged","_overlayOpSelected","removeEventListener","e","viewMode","outlineData","outline","getData","detailsMode","newValue","oldValue","_typeof","detailsModeIcon","detailsModeLabel","selectedView","fire","Event","console","log","operation","element","getAttribute","option","viewmode","viewModeIcon","viewModeLabel"],"mappings":"kpKAkBMA,8EA+EGC,UAAY,OACZC,QAAU,OACVC,YAAc,OACdC,OAAS,OACTC,SAAWC,EAAKD,SAASE,gBACzBC,aAAeF,EAAKE,aAAaD,gBACjCE,iBAAmBH,EAAKG,iBAAiBF,gBACzCG,eAAiBJ,EAAKI,eAAeH,gBACrCI,aAAeL,EAAKK,aAAaJ,2BAvFfK,wBAAsBC,mEAGtCC,6CAqCA,yDAGA,CAKLC,SAAUC,OAIVC,MAAO,CACLC,KAAMC,MACNC,QAAQ,EACRC,UAAU,GAKZC,SAAU,CACRJ,KAAMK,QACNH,QAAQ,EACRC,UAAU,EACVG,oBAAoB,EACpBC,OAAO,GAKTC,SAAU,CACRR,KAAMK,QACNC,oBAAoB,EACpBC,OAAO,wHAkBXE,YAAgBC,IAAI,WAClBC,EAAKC,gBACLD,EAAKE,eACLF,EAAKG,iBAAiB,CAAEC,QAAQ,mHAK7BC,uBACAF,iBAAiB,CAAEC,QAAQ,oDAEfA,IAAAA,OACXE,EAAIF,EAAS,mBAAqB,2BACnCG,EAAEnB,MAAMkB,GAAG,YAAaE,KAAK7B,mBAC7B4B,EAAEnB,MAAMkB,GAAG,gBAAiBE,KAAK5B,uBACjC2B,EAAEnB,MAAMkB,GAAG,cAAeE,KAAK3B,qBAC/B0B,EAAEnB,MAAMkB,GAAG,YAAaE,KAAK1B,cAC9BsB,EACFK,cAAqBD,KAAM,QAASA,KAAKhC,UAEzCiC,iBAAwBD,KAAM,QAASA,KAAKhC,2CAGvCkC,UACCA,EAAMC,OAAOC,WACd,aACEC,YAAYH,aAEd,aACEI,OAAOJ,aAET,WACEK,UAAUL,wCAITA,kBACNF,KAAKX,gBAGJxB,QAAUmC,KAAKQ,eAAeN,GAC9BF,KAAKnC,UAGVqC,EAAMO,uBACD1C,OAASiC,KAAKU,sBACd5C,YAAckC,KAAKjC,OAAOiC,KAAKpB,MAAM+B,QAAQX,KAAKnC,eAClDA,QAAQ+C,UAAUC,IAAI,gBAAiB,iBACxC,YAAaC,WACfA,UAAUC,QAAQ,QAEdC,EAAOhB,KAAKiB,6BACbC,MAAMC,OAASH,EAAKG,OAAS,UAC7BD,MAAME,MAAQJ,EAAKI,MAAQ,UAC3BxC,MAAMyC,QAAQ,SAACC,EAAMC,OAClBP,EAAOQ,EAAKzD,OAAOwD,GACzBD,EAAKV,UAAUC,IAAI,mBACnBS,EAAKJ,MAAMO,WAAa,OACxBH,EAAKI,gBAAkBJ,EAAKJ,MAAME,MAClCE,EAAKK,iBAAmBL,EAAKJ,MAAMC,OACnCG,EAAKJ,MAAME,MAAQJ,EAAKI,MAAQ,KAChCE,EAAKJ,MAAMC,OAASH,EAAKG,OAAS,KAClCK,EAAKI,aAAaZ,EAAKa,KAAMb,EAAKc,IAAK,EAAGR,GAC1CS,WAAW,SAAAC,GACTV,EAAKJ,MAAMO,WAAa,MACvB,WAEAQ,cAAa,mCAEb/B,iBACAF,KAAKf,cAGJ4C,EAAO7B,KAAKlC,YAAY+D,KAAO3B,EAAMC,OAAO+B,GAC5CJ,EAAM9B,KAAKlC,YAAYgE,IAAM5B,EAAMC,OAAOgC,QAC3CP,aAAaC,EAAMC,EAAK,EAAG9B,KAAKnC,aAC/BuE,EAAWpC,KAAKqC,gBAAgBnC,EAAMC,WACxCiC,GAAYA,IAAapC,KAAKnC,QAAS,KACnCyE,EAAgBtC,KAAKpB,MAAM+B,QAAQyB,GACnCG,EAAcvC,KAAKpB,MAAM+B,QAAQX,KAAKnC,cACvC2E,eAAexC,KAAKpB,MAAO2D,EAAaD,sBACpCG,MACHC,EAAK9D,MAAM6D,KAAOC,EAAK7E,QAAS,KAC5BmD,EAAO0B,EAAK3E,OAAO0E,GACzBE,sBAAsB,SAAAX,GACpBU,EAAKd,aAAaZ,EAAKa,KAAMb,EAAKc,IAAK,EAAGY,EAAK9D,MAAM6D,QAJlDA,EAAI,EAAGA,EAAIzC,KAAKpB,MAAMgE,OAAQH,MAA9BA,uCAWHvC,MACHF,KAAKf,cAGJ+B,EAAOhB,KAAKjC,OAAOiC,KAAKpB,MAAM+B,QAAQX,KAAKnC,eAC5CA,QAAQ+C,UAAUiC,OAAO,sBACzBZ,cAAa,QACbL,aAAaZ,EAAKa,KAAMb,EAAKc,IAAK,EAAG9B,KAAKnC,yDAG3CmC,KAAKf,UAAae,KAAKnC,aAGrBiF,EAAWC,SAASC,8BACrBpE,MAAMyC,QAAQ,SAAAC,GACjBA,EAAKJ,MAAM+B,UAAY,GACvB3B,EAAKJ,MAAME,MAAQE,EAAKI,gBACxBJ,EAAKJ,MAAMC,OAASG,EAAKK,iBACzBL,EAAKV,UAAUiC,OAAO,mBACtBC,EAASI,YAAY5B,KAEnBtB,KAAKmD,SAAS,QACXC,aAAaN,EAAU9C,KAAKmD,SAAS,SAErCD,YAAYJ,QAEd5B,MAAMC,OAAS,QACftD,QAAQ+C,UAAUiC,OAAO,sBACzB9E,OAAS,UACTD,YAAc,UACd4B,oBACA2D,cACH,IAAIC,YAAY,cAAe,CAC7BC,UAAU,EACVpD,OAAQ,CACNqD,OAAQxD,KAAKnC,iBAIdA,QAAU,2CAEJqC,GACXA,EAAMuD,wDAEOvD,GACTF,KAAKf,WACPiB,EAAMuD,sBACDlD,kDAGIL,GACXA,EAAMuD,uEAGFzD,KAAKf,cAGHL,EAAQoB,KAAKD,EAAE2D,KAAKC,gBAAgBC,OAAO,SAAAC,MAE7CA,EAAKC,WAAaC,KAAKC,gBACrBC,EAAKvF,UAAYmF,EAAKK,QAAQD,EAAKvF,kBAE9B,SAGNyF,UAAUvF,0DAECwF,IAAAA,EAAGC,IAAAA,KACdrE,KAAKjC,YAGNuG,EAAQ,iBACPvG,OAAOsD,QAAQ,SAACL,EAAMyB,GAEvB2B,GAAKpD,EAAKa,MACVuC,GAAKpD,EAAKa,KAAOb,EAAKI,OACtBiD,GAAKrD,EAAKc,KACVuC,GAAKrD,EAAKc,IAAMd,EAAKG,SAErBmD,EAAQC,EAAK3F,MAAM6D,MAGhB6B,0CAEMpE,WACPsE,EAAOtE,EAAMuE,eACVhC,EAAI,EAAGA,EAAI+B,EAAK5B,OAAQH,OAC3BzC,KAAKpB,MAAM+B,QAAQ6D,EAAK/B,KAAO,SAC1B+B,EAAK/B,mDAKTzC,KAAKpB,MAAM8F,IAAI,SAAApD,UACbA,EAAKL,6EAITjB,KAAKpC,iBACHA,UAAY,IAAI+G,iBAAiB,SAAA3C,GACpC4C,EAAKlF,sBAEF9B,UAAUiH,QAAQ7E,KAAM,CAAE8E,WAAW,+CAIxC9E,KAAKpC,iBACFA,UAAUmH,kBACVnH,UAAY,6CAONoH,EAAOC,EAAUC,MAC1BA,GAAYF,EAAMpC,eAChBuC,EAAID,EAAWF,EAAMpC,OACZ,EAANuC,KACLH,EAAMI,UAAKC,UAGfL,EAAMM,OAAOJ,EAAU,EAAGF,EAAMM,OAAOL,EAAU,GAAG,IAC7CD,uCAEIZ,EAAGC,EAAGkB,EAAGC,GACpBA,EAAGtE,MAAM+B,gCAA2BmB,iBAAQC,iBAAQkB,ugVAGxDE,OAAOC,eAAeC,OAAO,gBAAiBhI,OChSxCiI,0FAAwBpH,4HAqXrBuB,EAAE8F,SAASC,iBACd,0BACA9F,KAAK+F,kBAAkB7H,KAAK8B,YAEzBD,EAAE8F,SAASC,iBACd,+BACA9F,KAAKgG,mBAAmB9H,KAAK8B,oHAQ1BD,EAAE8F,SAASI,oBACd,0BACAjG,KAAK+F,kBAAkB7H,KAAK8B,YAEzBD,EAAE8F,SAASI,oBACd,+BACAjG,KAAKgG,mBAAmB9H,KAAK8B,+CAMjBkG,UACNlG,KAAKmG,cACN,aACEA,SAAW,oBAEb,eACEC,YAAcpG,KAAKD,EAAEsG,QAAQC,eAC7BH,SAAW,iBAEb,YACEA,SAAW,iBAEb,YACEA,SAAW,oDAOHD,UACTlG,KAAKuG,iBACN,WACEA,YAAc,gBAEhB,WACEA,YAAc,iBAEhB,YACEA,YAAc,mDAKLC,EAAUC,+BACxBC,EAAOF,GAA+B,QAChCA,OACD,WACEG,gBAAkB,kBAClBC,iBAAmB,gBAErB,WACED,gBAAkB,yBAClBC,iBAAmB,mBAErB,YACED,gBAAkB,2BAClBC,iBAAmB,OAIF,IAAtB5G,KAAK6G,cACPvH,YAAgBC,IAAI,WAClBwC,WAAW,WACT9D,EAAK8B,EAAE8F,SAASiB,KAAK,eACrBrB,OAAOpC,cAAc,IAAI0D,MAAM,YAC9B,6CAQGb,GAEZc,QAAQC,IAAIf,EAAE/F,kDAKE+F,UAChBc,QAAQC,IAAIf,EAAE/F,QACN+F,EAAE/F,OAAO+G,eACV,MAEHF,QAAQC,IAAI,YACZD,QAAQC,IAAIf,EAAE/F,OAAOgH,QAAQC,aAAa,2BAEvC,OAEHJ,QAAQC,IAAI,aACZD,QAAQC,IAAIf,EAAE/F,OAAOgH,QAAQC,aAAa,6DAO7BlB,UACjBc,QAAQC,IAAIf,EAAE/F,QACN+F,EAAE/F,OAAO+G,eACV,OACqB,YAApBhB,EAAE/F,OAAOkH,OAEXL,QAAQC,IAAI,aACiB,YAApBf,EAAE/F,OAAOkH,QAElBL,QAAQC,IAAI,cAEdD,QAAQC,IAAIf,EAAE/F,OAAOgH,QAAQC,aAAa,2BAEvC,YACqB,YAApBlB,EAAE/F,OAAOkH,SAEXL,QAAQC,IAAI,aACZD,QAAQC,IAAIf,EAAE/F,OAAOgH,QAAQC,aAAa,4BAGzC,SACqB,YAApBlB,EAAE/F,OAAOkH,SAEXL,QAAQC,IAAI,UACZD,QAAQC,IAAIf,EAAE/F,OAAOgH,QAAQC,aAAa,4DAMjCZ,EAAUC,+BACrBC,EAAOF,UACDA,OACD,aACEzG,EAAEuH,SAAS1G,UAAUC,IAAI,kBACzBgG,aAAe,OACfU,aAAe,yBACfC,cAAgB,YACrBlI,YAAgBC,IAAI,WAClBwC,WAAW,WACTvC,EAAKO,EAAE8F,SAASiB,KAAK,eACrBrB,OAAOpC,cAAc,IAAI0D,MAAM,YAC9B,iBAGF,eACEhH,EAAEuH,SAAS1G,UAAUiC,OAAO,kBAC5BgE,aAAe,OACfU,aAAe,uBACfC,cAAgB,yBAElB,YACEzH,EAAEuH,SAAS1G,UAAUC,IAAI,kBACzBgG,aAAe,OACfU,aAAe,oBACfC,cAAgB,sBAElB,YACEzH,EAAEuH,SAAS1G,UAAUiC,OAAO,kBAC5BgE,aAAe,OACfU,aAAe,uBACfC,cAAgB,4DAMZhB,EAAUC,iBACrBC,EAAOF,IACTQ,QAAQC,IAAIT,6CAziBP/H,qDA0QA,UAIG,MACF,gBACA,eACC,iBACG,iCAKE,MACN,oBACA,wBAKO,MACP,qBACA,sBAKK,MACL,mBACA,eACC,0BACa,WACV,uCAKK,MACT,uBACA,2BAKU,MACV,wBACA,uBAKM,MACN,oBACA,mBAKE,MACF,gBACA,gBACC,sBACa,WACV,qCAKM,MACV,wBACA,mBAKE,MACF,gBACA,iBACE,eAKG,MACL,mBACA,iBACE,sCAUH,4BAmMXgH,OAAOC,eAAeC,OAAO,mBAAoBC"}