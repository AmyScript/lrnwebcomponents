{"version":3,"file":"lrn-vocab.umd.js","sources":["lib/lrn-vocab-dialog.js","lrn-vocab.umd.js"],"sourcesContent":["import \"@polymer/paper-dialog/paper-dialog.js\";\nimport \"@polymer/paper-dialog-scrollable/paper-dialog-scrollable.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nPolymer({\n  _template: html`\n        <style>\n          :host {\n            display: block;\n            position: relative;\n          }\n          paper-dialog {\n            display: block;\n            margin: auto;\n            width: 80%;\n            height: auto;\n            z-index: 1000;\n          }\n          .close_button {\n            display: flex;\n            flex-direction: row-reverse;\n            margin-top: 0;\n            background-color: #20427b;\n            color: #fff;\n            padding: 8px;\n          }\n        </style>\n        <paper-dialog id=\"dialog\" with-backdrop=\"\" opened=\"{{opened}}\">\n          <div class=\"close_button\">\n            <paper-icon-button icon=\"cancel\" dialog-dismiss=\"\"></paper-icon-button>\n          </div>\n          <paper-dialog-scrollable>\n            <slot></slot>\n          </paper-dialog-scrollable>\n        </paper-dialog>\n`,\n\n  is: \"lrn-vocab-dialog\",\n\n  listeners: {\n    \"iron-overlay-closed\": \"_modalClosed\",\n    \"iron-overlay-opened\": \"_resizeContent\",\n    \"iron-overlay-canceled\": \"_changeOpen\"\n  },\n\n  properties: {\n    /**\n     * Dialog state management.\n     */\n    opened: {\n      type: Boolean,\n      value: false,\n      notify: true\n    }\n  },\n\n  /**\n   * Attached lifecyce\n   */\n  attached: function() {\n    // support for appending to the light document\n    // while also making sure we don't loop in attach\n    if (this.bodyAppend && !this._bodyAppended) {\n      this._bodyAppended = true;\n      document.body.appendChild(this);\n    }\n  },\n\n  /**\n   * Modal has closed, let's react appropriately.\n   */\n  _modalClosed: function(e) {\n    // fire so we can react to accessibly; don't care who invoked this\n    // just that it has happened\n    this._changeOpen(e);\n    this.fire(\"lrn-vocab-dialog-closed\", this);\n  },\n\n  /**\n   * Ensure everything is visible in what's been expanded.\n   */\n  _resizeContent: function(e) {\n    // fake a resize event to make contents happy\n    var evt = document.createEvent(\"UIEvents\");\n    evt.initUIEvent(\"resize\", true, false, window, 0);\n    window.dispatchEvent(evt);\n    this._changeOpen(e);\n  },\n\n  /**\n   * Attached lifecyce\n   */\n  _changeOpen: function(e) {\n    e.stopPropagation();\n    // test if this is an IDENTICAL item\n    if (e.srcElement === this.$.dialog) {\n      this.opened = e.type === \"iron-overlay-opened\";\n      this.fire(\"lrn-vocab-dialog-changed\", this);\n    }\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/paper-button/paper-button.js\";\nimport \"@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js\";\nimport \"@lrnwebcomponents/schema-behaviors/schema-behaviors.js\";\nimport \"./lib/lrn-vocab-dialog.js\";\n/**\n`lrn-vocab`\nVocabulary term with visual treatment and semantic meaning.\n\n@demo demo/index.html\n*/\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-flex;\n        --lrn-vocab-border: 1px dashed gray;\n      }\n      paper-button {\n        text-transform: none;\n        padding: 0;\n        margin: 0;\n        border-bottom: var(--lrn-vocab-border);\n        position: relative;\n        top: 3px;\n      }\n    </style>\n\n    <div>\n      <paper-button id=\"button\" noink=\"\">[[term]]</paper-button>\n    </div>\n    <lrn-vocab-dialog id=\"dialog\" opened=\"{{opened}}\">\n      <slot></slot>\n    </lrn-vocab-dialog>\n`,\n\n  is: \"lrn-vocab\",\n\n  behaviors: [HAXBehaviors.PropertiesBehaviors, SchemaBehaviors.Schema],\n\n  properties: {\n    /**\n     * Term to highlight / display\n     */\n    term: {\n      type: String,\n      reflectToAttribute: true\n    },\n    /**\n     * Tracking the state of the dialog\n     */\n    opened: {\n      type: Boolean,\n      value: false\n    }\n  },\n\n  /**\n   * Ready life cycle\n   */\n  ready: function() {\n    this.$.button.addEventListener(\"click\", e => {\n      this.opened = !this.opened;\n    });\n    // track this specific element to later match\n    this.__modal = this.$.dialog;\n  },\n\n  /**\n   * Attached life cycle\n   */\n  attached: function() {\n    document.body.addEventListener(\n      \"lrn-vocab-dialog-closed\",\n      this._accessibleFocus.bind(this)\n    );\n    // Establish hax properties if they exist\n    let props = {\n      canScale: false,\n      canPosition: false,\n      canEditSource: false,\n      gizmo: {\n        title: \"Vocab\",\n        description: \"Vocabulary term\",\n        icon: \"image:details\",\n        color: \"red\",\n        groups: [\"Vocab\"],\n        handles: [\n          {\n            type: \"inline\",\n            text: \"term\"\n          }\n        ],\n        meta: {\n          author: \"LRNWebComponents\"\n        }\n      },\n      settings: {\n        quick: [\n          {\n            property: \"term\",\n            title: \"Term\",\n            description: \"The word or words to make clickable for more detail.\",\n            inputMethod: \"textfield\",\n            icon: \"editor:title\",\n            required: true\n          }\n        ],\n        configure: [\n          {\n            property: \"term\",\n            title: \"Term\",\n            description: \"The word or words to make clickable for more detail.\",\n            inputMethod: \"textfield\",\n            icon: \"editor:title\",\n            required: true\n          },\n          {\n            slot: \"\",\n            title: \"Contents\",\n            description: \"Contents to display in the pop up.\",\n            inputMethod: \"code-editor\",\n            required: true\n          }\n        ],\n        advanced: []\n      }\n    };\n    this.setHaxProperties(props);\n  },\n\n  /**\n   * Set ourselves as having focus after the modal closes.\n   */\n  _accessibleFocus: function(e) {\n    // this is OUR modal, we found her, oh modal, We've missed\n    // you so much. thank you for coming home. We're so, so, so\n    // sorry that we appended you to the body. We'll never do it\n    // again (until the next time you open).\n    if (e.detail === this.__modal) {\n      // focus on our dialog triggering button\n      this.$.button.focus();\n    }\n  }\n});\n"],"names":["Polymer","_template","html","is","listeners","properties","opened","type","Boolean","value","notify","attached","this","bodyAppend","_bodyAppended","document","body","appendChild","_modalClosed","e","_changeOpen","fire","_resizeContent","evt","createEvent","initUIEvent","window","dispatchEvent","stopPropagation","srcElement","$","dialog","behaviors","HAXBehaviors","PropertiesBehaviors","SchemaBehaviors","Schema","term","String","reflectToAttribute","ready","button","addEventListener","_this","__modal","_accessibleFocus","bind","setHaxProperties","canScale","canPosition","canEditSource","gizmo","title","description","icon","color","groups","handles","text","meta","author","settings","quick","property","inputMethod","required","configure","slot","advanced","detail","focus"],"mappings":"+gFAGAA,QAAQ,CACNC,UAAWC,UAgCXC,GAAI,mBAEJC,UAAW,uBACc,qCACA,yCACE,eAG3BC,WAAY,CAIVC,OAAQ,CACNC,KAAMC,QACNC,OAAO,EACPC,QAAQ,IAOZC,SAAU,WAGJC,KAAKC,aAAeD,KAAKE,qBACtBA,eAAgB,EACrBC,SAASC,KAAKC,YAAYL,QAO9BM,aAAc,SAASC,QAGhBC,YAAYD,QACZE,KAAK,0BAA2BT,OAMvCU,eAAgB,SAASH,OAEnBI,EAAMR,SAASS,YAAY,YAC/BD,EAAIE,YAAY,UAAU,GAAM,EAAOC,OAAQ,GAC/CA,OAAOC,cAAcJ,QAChBH,YAAYD,IAMnBC,YAAa,SAASD,GACpBA,EAAES,kBAEET,EAAEU,aAAejB,KAAKkB,EAAEC,cACrBzB,OAAoB,wBAAXa,EAAEZ,UACXc,KAAK,2BAA4BT,oBCrFpC,CACNX,UAAWC,YAwBXC,GAAI,YAEJ6B,UAAW,CAACC,aAAaC,oBAAqBC,gBAAgBC,QAE9D/B,WAAY,CAIVgC,KAAM,CACJ9B,KAAM+B,OACNC,oBAAoB,GAKtBjC,OAAQ,CACNC,KAAMC,QACNC,OAAO,IAOX+B,MAAO,2BACAV,EAAEW,OAAOC,iBAAiB,QAAS,SAAAvB,GACtCwB,EAAKrC,QAAUqC,EAAKrC,cAGjBsC,QAAUhC,KAAKkB,EAAEC,QAMxBpB,SAAU,WACRI,SAASC,KAAK0B,iBACZ,0BACA9B,KAAKiC,iBAAiBC,KAAKlC,YAsDxBmC,iBAnDO,CACVC,UAAU,EACVC,aAAa,EACbC,eAAe,EACfC,MAAO,CACLC,MAAO,QACPC,YAAa,kBACbC,KAAM,gBACNC,MAAO,MACPC,OAAQ,CAAC,SACTC,QAAS,CACP,CACElD,KAAM,SACNmD,KAAM,SAGVC,KAAM,CACJC,OAAQ,qBAGZC,SAAU,CACRC,MAAO,CACL,CACEC,SAAU,OACVX,MAAO,OACPC,YAAa,uDACbW,YAAa,YACbV,KAAM,eACNW,UAAU,IAGdC,UAAW,CACT,CACEH,SAAU,OACVX,MAAO,OACPC,YAAa,uDACbW,YAAa,YACbV,KAAM,eACNW,UAAU,GAEZ,CACEE,KAAM,GACNf,MAAO,WACPC,YAAa,qCACbW,YAAa,cACbC,UAAU,IAGdG,SAAU,OAShBvB,iBAAkB,SAAS1B,GAKrBA,EAAEkD,SAAWzD,KAAKgC,cAEfd,EAAEW,OAAO6B"}