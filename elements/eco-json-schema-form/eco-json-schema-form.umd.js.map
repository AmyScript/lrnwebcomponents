{"version":3,"file":"eco-json-schema-form.umd.js","sources":["lib/eco-json-schema-boolean.js","lib/eco-json-schema-enum.js","lib/eco-json-schema-input.js","lib/eco-json-schema-file.js","lib/eco-json-schema-array.js","lib/eco-json-schema-object.js","lib/eco-json-schema-wizard.js"],"sourcesContent":["import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"@polymer/paper-checkbox/paper-checkbox.js\";\nvar $_documentContainer = document.createElement(\"div\");\n$_documentContainer.setAttribute(\"style\", \"display: none;\");\n\n$_documentContainer.innerHTML = `<dom-module id=\"eco-json-schema-boolean\">\n\n  \n\n  <template>\n    <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n      paper-checkbox {\n        color: #737373;\n        padding: 2px;\n        display: block;\n        font-size: 16px;\n        white-space: normal;\n    }\n    </style>\n\n    <paper-checkbox id=\"checkbox\" class=\"flex\" checked=\"{{value}}\" invalid=\"[[error]]\">[[_label]]</paper-checkbox>\n\n  </template>\n\n  \n\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer);\nPolymer({\n  is: \"eco-json-schema-boolean\",\n  properties: {\n    schema: {\n      type: Object,\n      observer: \"_schemaChanged\"\n    },\n    value: {\n      type: Boolean,\n      notify: true,\n      value: false\n    },\n    error: {\n      type: Boolean,\n      value: false\n    },\n    _label: {\n      type: String,\n      notify: true,\n      value: \"\"\n    }\n  },\n  ready: function() {},\n  detached: function() {},\n  _schemaChanged: function() {\n    var schema = this.schema;\n    var inputEl = this.$.checkbox;\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n\n    if (schema.title) {\n      this._label = schema.title;\n    }\n  },\n  _isSchemaValue: function(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type)\n    );\n  },\n  _isSchemaBoolean: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  },\n  _isSchemaNumber: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  },\n  _isSchemaString: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  },\n  _isSchemaObject: function(type) {\n    return type === \"object\";\n  },\n  _isSchemaArray: function(type) {\n    return type === \"array\";\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu.js\";\nimport \"@polymer/paper-item/paper-item.js\";\nimport \"@polymer/paper-listbox/paper-listbox.js\";\nimport { IronValidatableBehavior } from \"@polymer/iron-validatable-behavior/iron-validatable-behavior.js\";\nvar $_documentContainer = document.createElement(\"div\");\n$_documentContainer.setAttribute(\"style\", \"display: none;\");\n\n$_documentContainer.innerHTML = `<dom-module id=\"eco-json-schema-enum\">\n\n  \n  \n  \n  \n\n  <template>\n    <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n      paper-input {\n        --paper-input-container-label: {\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #212121;\n        }\n      };\n\n      paper-dropdown-menu {\n        --paper-input-container-label: {\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #212121;\n        }\n        --paper-dropdown-menu-button: {\n          padding: 2px;\n        }\n      }\n    </style>\n\n    <paper-dropdown-menu id=\"dropdown\" class=\"layout horizontal vertical\" value=\"{{value}}\" required=\"\">\n      <paper-dropdown-menu class=\"dropdown-content\">\n        <paper-listbox slot=\"dropdown-content\" selected=\"0\">\n        <template is=\"dom-repeat\" items=\"[[_items]]\">\n          <paper-item class=\"flex\" label=\"[[item]]\">[[item]]</paper-item>\n        </template>\n        </paper-listbox>\n      </paper-dropdown-menu>\n    </paper-dropdown-menu>\n\n  </template>\n\n  \n\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer);\nPolymer({\n  is: \"eco-json-schema-enum\",\n  behaviors: [IronValidatableBehavior],\n  properties: {\n    schema: {\n      type: Object,\n      observer: \"_schemaChanged\"\n    },\n    value: {\n      type: String,\n      notify: true,\n      value: null\n    },\n    error: {\n      type: String,\n      observer: \"_errorChanged\",\n      value: null\n    },\n    _items: {\n      type: Object,\n      value: function() {\n        return {};\n      }\n    }\n  },\n  ready: function() {},\n  detached: function() {},\n  _schemaChanged: function() {\n    var schema = this.schema;\n    var inputEl = this.$.dropdown;\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n\n    this._items = schema.enum.filter(function(item) {\n      return item !== null;\n    });\n\n    if (schema.title) {\n      inputEl.label = schema.title;\n    }\n  },\n  _errorChanged: function() {\n    if (this.error) {\n      this.$.dropdown.invalid = true;\n    } else {\n      this.$.dropdown.invalid = false;\n    }\n  },\n  _isSchemaValue: function(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type)\n    );\n  },\n  _isSchemaBoolean: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  },\n  _isSchemaNumber: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  },\n  _isSchemaString: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  },\n  _isSchemaObject: function(type) {\n    return type === \"object\";\n  },\n  _isSchemaArray: function(type) {\n    return type === \"array\";\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport \"@polymer/paper-input/paper-input.js\";\nimport \"@polymer/paper-styles/typography.js\";\nvar $_documentContainer = document.createElement(\"div\");\n$_documentContainer.setAttribute(\"style\", \"display: none;\");\n\n$_documentContainer.innerHTML = `<dom-module id=\"eco-json-schema-input\">\n\n  \n  \n\n  <template>\n    <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n      paper-input {\n        padding: 2px;\n\n        --paper-input-container-label: {\n          white-space: normal;\n          position: static;\n          font-size: 16px;\n          color: #212121;\n        }\n      }\n    </style>\n\n    <paper-input id=\"input\" class=\"flex\" value=\"{{value}}\" auto-validate=\"\">\n\n    </paper-input>\n\n  </template>\n\n  \n\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer);\n/**\n`eco-json-schema-input` takes in a JSON schema of type number and string and\ncontains a `paper-input`, exposing a `value` property that represents the schema.\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-input\n@demo demo/index.html\n*/\nPolymer({\n  is: \"eco-json-schema-input\",\n  behaviors: [AppLocalizeBehavior],\n\n  properties: {\n    language: {\n      value: \"en\"\n    },\n    resources: {\n      value: function() {\n        return {};\n      }\n    },\n    schema: {\n      type: Object,\n      observer: \"_schemaChanged\"\n    },\n    value: {\n      type: String,\n      notify: true,\n      value: function() {\n        return \"\";\n      }\n    },\n    error: {\n      type: String,\n      observer: \"_errorChanged\",\n      value: null\n    }\n  },\n  ready: function() {},\n  detached: function() {},\n  _schemaChanged: function() {\n    var schema = this.schema;\n    var inputEl = this.$.input;\n    if (schema.required) {\n      inputEl.required = true;\n    }\n    if (this._isSchemaNumber(schema.type)) {\n      inputEl.type = \"number\";\n\n      if (schema.multipleOf) {\n        inputEl.step = schema.multipleOf;\n      }\n\n      if (!isNaN(schema.maximum)) {\n        if (schema.exclusiveMaximum) {\n          inputEl.max = schema.maximum - (schema.multipleOf || 1);\n        } else {\n          inputEl.max = schema.maximum;\n        }\n      }\n\n      if (!isNaN(schema.minimum)) {\n        if (schema.exclusiveMinimum) {\n          inputEl.min = schema.minimum + (schema.multipleOf || 1);\n        } else {\n          inputEl.min = schema.minimum;\n        }\n      }\n    }\n\n    if (this._isSchemaString(schema.type)) {\n      if (schema.format === \"date-time\") {\n        inputEl.type = \"datetime-local\";\n        inputEl.alwaysFloatLabel = true; // label doesn't float when value not set\n      } else if (schema.format === \"date\") {\n        inputEl.type = \"date\";\n      } else if (schema.format === \"email\") {\n        inputEl.type = \"email\";\n      } else if (schema.format === \"hostname\") {\n        inputEl.type = \"text\";\n      } else if (schema.format === \"ipv4\") {\n        inputEl.type = \"text\";\n      } else if (schema.format === \"ipv6\") {\n        inputEl.type = \"text\";\n      } else if (schema.format === \"uri\") {\n        inputEl.type = \"url\";\n      } else {\n        inputEl.type = \"text\";\n      }\n\n      /*\n        if (schema.maxLength || schema.minLength) {\n          inputEl.charCounter = true;\n        }\n       */\n\n      if (schema.maxLength) {\n        inputEl.maxlength = schema.maxLength;\n      }\n\n      if (schema.minLength) {\n        inputEl.minlength = schema.minLength;\n      }\n\n      if (schema.pattern) {\n        inputEl.pattern = schema.pattern;\n      }\n    }\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n\n    inputEl.alwaysFloatLabel = true; // label doesn't float when value not set\n\n    if (schema.title) {\n      inputEl.label = schema.title;\n    }\n  },\n  _errorChanged: function() {\n    if (this.error) {\n      this.$.input.errorMessage = this.error;\n      this.$.input.invalid = true;\n    } else {\n      this.$.input.invalid = false;\n      this.$.input.errorMessage = null;\n    }\n  },\n  _isSchemaValue: function(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type)\n    );\n  },\n  _isSchemaBoolean: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  },\n  _isSchemaNumber: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  },\n  _isSchemaString: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  },\n  _isSchemaObject: function(type) {\n    return type === \"object\";\n  },\n  _isSchemaArray: function(type) {\n    return type === \"array\";\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport * as async from \"@polymer/polymer/lib/utils/async.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport \"@polymer/paper-button/paper-button.js\";\nimport \"@polymer/paper-input/paper-input.js\";\nimport \"@polymer/iron-icon/iron-icon.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nvar $_documentContainer = document.createElement(\"div\");\n$_documentContainer.setAttribute(\"style\", \"display: none;\");\n\n$_documentContainer.innerHTML = `<dom-module id=\"eco-json-schema-file\">\n\t\n\t\n\t\n\t\n\n\t<template>\n\t\t<style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n\t\t\tpaper-input {\n\t\t\t\tpadding: 2px;\n\t\t\t\t--paper-input-container-label: {\n\t\t\t\t\twhite-space: normal;\n\t\t\t\t\tposition: static;\n\t\t\t\t\tfont-size: 22px;\n\t\t\t\t\tcolor: #212121;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t:host {\n\t\t\t\tdisplay: inline-block;\n\t\t\t}\n\n\t\t\t.enabled {\n\t\t\t\tborder: 1px dashed #555;\n\t\t\t\t@apply(--file-upload-upload-border-enabled);\n\t\t\t}\n\n\t\t\t.hover {\n\t\t\t\topacity: .7;\n\t\t\t\tborder: 1px dashed #111;\n\t\t\t\t@apply(--file-upload-upload-border-hover);\n\t\t\t}\n\n\t\t\t#UploadBorder {\n\t\t\t\tvertical-align: middle;\n\t\t\t\tcolor: #555;\n\t\t\t\tpadding: 20px;\n\t\t\t\tmax-height: 300px;\n\t\t\t\toverflow-y: auto;\n\t\t\t\tdisplay: inline-block;\n\t\t\t\t@apply(--file-upload-upload-border);\n\t\t\t}\n\n\t\t\t#dropArea {\n\t\t\t\ttext-align: center;\n\t\t\t\t@apply(--file-upload-drop-area);\n\t\t\t}\n\n\t\t\tpaper-button#button {\n\t\t\t\tmargin-bottom: 20px;\n\t\t\t\t@apply(--file-upload-button);\n\t\t\t}\n\n\t\t\t.file {\n\t\t\t\tpadding: 10px 0px;\n\t\t\t\t@apply(--file-upload-file);\n\t\t\t}\n\n\t\t\t.commands {\n\t\t\t\tfloat: right;\n\t\t\t\t@apply(--file-upload-commands);\n\t\t\t}\n\n\t\t\t.commands iron-icon:not([icon=\"check-circle\"]) {\n\t\t\t\tcursor: pointer;\n\t\t\t\topacity: .9;\n\t\t\t\t@apply(--file-upload-commands-faded);\n\t\t\t}\n\n\t\t\t.commands iron-icon:hover {\n\t\t\t\topacity: 1;\n\t\t\t\t@apply(--file-upload-commands-hovered);\n\t\t\t}\n\n\t\t\t[hidden] {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\n\t\t\t.error {\n\t\t\t\tcolor: #f40303;\n\t\t\t\tfont-size: 11px;\n\t\t\t\tmargin-top: 2px;\n\t\t\t\t@apply(--file-upload-error);\n\t\t\t}\n\n\t\t\t.progress-bar {\n\t\t\t\tmargin-top: 2px;\n\t\t\t}\n\n\t\t\tpaper-progress {\n\t\t\t\t--paper-progress-active-color: #03a9f4;\n\t\t\t}\n\n\t\t\tpaper-progress[error] {\n\t\t\t\t--paper-progress-active-color: #f40303;\n\t\t\t}\n\t\t</style>\n\n\t\t<div class=\"layout horizontal nowrap\">\n\t\t\t<div>\n\t\t\t\t<paper-button id=\"button\" on-click=\"_fileClick\" alt=\"{{paperButtonAlt}}\" raised=\"\">\n\t\t\t\t\t<iron-icon icon=\"editor:attach-file\"></iron-icon>{{paperButtonTitle}}</paper-button>\n\t\t\t\t<div id=\"UploadBorder\">\n\t\t\t\t\t<div id=\"dropArea\" hidden\\$=\"{{!_shownDropText}}\">{{dropText}}</div>\n\t\t\t\t\t<template is=\"dom-repeat\" items=\"{{files}}\">\n\t\t\t\t\t\t<div class=\"file\">\n\t\t\t\t\t\t\t<div class=\"name\"><span>{{item.name}}</span>\n\t\t\t\t\t\t\t\t<div class=\"commands\">\n\t\t\t\t\t\t\t\t\t<iron-icon icon=\"autorenew\" title=\"{{retryText}}\" on-click=\"_retryUpload\" hidden\\$=\"{{!item.error}}\"></iron-icon>\n\t\t\t\t\t\t\t\t\t<iron-icon icon=\"cancel\" title=\"{{removeText}}\" on-click=\"_cancelUpload\" hidden\\$=\"{{item.complete}}\"></iron-icon>\n\t\t\t\t\t\t\t\t\t<iron-icon icon=\"check-circle\" title=\"{{successText}}\" hidden\\$=\"{{!item.complete}}\"></iron-icon>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"error\" hidden\\$=\"{{!item.error}}\">{{errorText}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<input type=\"file\" id=\"fileInput\" on-change=\"_fileChange\" hidden=\"\" multiple=\"{{multi}}\" accept=\"{{accept}}\">\n\t\t</div>\n\n\n\t</template>\n\n\t\n\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer);\n/**\n`eco-json-schema-file` takes in a JSON schema of type number and string and\ncontains a `paper-input`, exposing a `value` property that represents the schema.\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-file\n@demo demo/index.html\n*/\nPolymer({\n  is: \"eco-json-schema-file\",\n  behaviors: [AppLocalizeBehavior],\n\n  properties: {\n    language: {\n      value: \"en\",\n      notify: true\n    },\n    resources: {\n      value: function() {\n        return {};\n      },\n      notify: true\n    },\n    schema: {\n      type: Object,\n      observer: \"_schemaChanged\"\n    },\n    value: {\n      type: Object,\n      notify: true,\n      value: function() {\n        return {};\n      },\n      observer: \"_valueChanged\"\n    },\n    /**\n    error: {\n      type: String,\n      observer: '_errorChanged',\n      value: null\n    },\n    */\n\n    /**\n     * `target` is the target url to upload the files to.\n     * Additionally by adding '<name>' in your url, it will be replaced by\n     * the file name.\n     */\n    target: {\n      type: String,\n      value: \"\"\n    },\n\n    /**\n     * `accept` is the set of comma separated file extensions or mime types\n     * to filter as accepted.\n     */\n    accept: {\n      type: String,\n      value: \"\"\n    },\n\n    /**\n     * `droppable` indicates whether or not to allow file drop.\n     */\n    droppable: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * `dropText` is the  text to display in the file drop area.\n     */\n    dropText: {\n      type: String,\n      value: \"Drop Files Here\"\n    },\n\n    /**\n     * `multi` indicates whether or not to allow multiple files to be uploaded.\n     */\n    multi: {\n      type: Boolean,\n      value: true\n    },\n\n    /**\n     * `files` is the list of files to be uploaded\n     */\n    files: {\n      type: Array,\n      notify: true,\n      value: function() {\n        return [];\n      }\n    },\n\n    /**\n     * `raised` indicates whether or not the button should be raised\n     */\n    raised: {\n      type: Boolean,\n      value: true\n    },\n\n    /**\n     * `noink` indicates that the button should not have an ink effect\n     */\n    noink: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * `headers` is a key value map of header names and values\n     */\n    headers: {\n      type: Object,\n      value: {}\n    },\n\n    /**\n     * `retryText` is the text for the tooltip to retry an upload\n     */\n    retryText: {\n      type: String,\n      value: \"Retry Upload\"\n    },\n\n    /**\n     * `removeText` is the text for the tooltip to remove an upload\n     */\n    removeText: {\n      type: String,\n      value: \"Remove\"\n    },\n\n    /**\n     * `successText` is the text for the tooltip of a successful upload\n     */\n    successText: {\n      type: String,\n      value: \"Success\"\n    },\n\n    /**\n     * `errorText` is the text to display for a failed upload\n     */\n    errorText: {\n      type: String,\n      value: \"Error uploading file...\"\n    },\n\n    /**\n     * `_shownDropText` indicates whether or not the drop text should be shown\n     */\n    _shownDropText: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * `additional` object of key-pair values to send additional values along with file.\n     */\n    additional: {\n      type: Object,\n      value: {}\n    },\n\n    /**\n     * `fileDataName` is the name for the file data in the `formData` object.\n     */\n    fileDataName: {\n      type: String,\n      value: \"file\"\n    },\n\n    /**\n     * `paperButtonAlt` allows changing the alt property on the paper button\n     */\n    paperButtonAlt: {\n      type: String,\n      value: \"\"\n    },\n\n    /**\n     * `paperButtonTitle` allows changing the title property on the paper button\n     */\n    paperButtonTitle: {\n      type: String,\n      value: \"\"\n    }\n  },\n  /**\n   * Clears the list of files\n   */\n  clear: function() {\n    this.set(\"files\", []);\n    this.$.fileInput.value = \"\";\n    this._showDropText();\n  },\n\n  ready: function() {\n    if (this.raised) {\n      this.toggleAttribute(\"raised\", true, this.$.button);\n    }\n    if (this.noink) {\n      this.toggleAttribute(\"noink\", true, this.$.button);\n    }\n    if (this.droppable) {\n      this._showDropText();\n      this.setupDrop();\n    }\n  },\n\n  /**\n   * A function to set up a drop area for drag-and-drop file uploads\n   */\n  setupDrop: function() {\n    var uploadBorder = this.$.UploadBorder;\n    this.toggleClass(\"enabled\", true, uploadBorder);\n\n    this.ondragover = function(e) {\n      e.stopPropagation();\n      this.toggleClass(\"hover\", true, uploadBorder);\n\n      // Workaround for allowgin drop from Chome's download footer on OSX\n      // See https://bugs.chromium.org/p/chromium/issues/detail?id=234931\n      var effect = e.dataTransfer && e.dataTransfer.dropEffect;\n      var effectAllowed = e.dataTransfer && e.dataTransfer.effectAllowed;\n      if (effect === \"none\" && effectAllowed !== \"none\") {\n        e.dataTransfer.dropEffect = effectAllowed === \"move\" ? \"move\" : \"copy\";\n      }\n      // end of workaround\n\n      return false;\n    };\n\n    this.ondragleave = function() {\n      this.toggleClass(\"hover\", false, uploadBorder);\n      return false;\n    };\n\n    this.ondrop = function(event) {\n      this.toggleClass(\"hover\", false, uploadBorder);\n      event.preventDefault();\n\n      // Check if multiple upload is allowed\n      if (!this.multi && this.files.length !== 0) {\n        return;\n      }\n\n      var length = event.dataTransfer.files.length;\n      for (var i = 0; i < length; i++) {\n        var file = event.dataTransfer.files[i];\n        //if (this.value.indexOf(window.btoa(unescape(encodeURIComponent(file.name)))) >= 0 ) {\n        //  continue;\n        //}\n        // Check if filetype is accepted\n        var mimeType =\n          file.type !== \"\" ? file.type.match(/^[^\\/]*\\//)[0] : null;\n        var fileType = file.name.match(/\\.[^\\.]*$/)[0];\n        if (\n          this.accept !== \"\" &&\n          !(\n            this.accept.indexOf(mimeType) > -1 ||\n            this.accept.indexOf(fileType) > -1\n          )\n        ) {\n          continue;\n        }\n\n        file.progress = 0;\n        file.error = false;\n        file.complete = false;\n        this.push(\"files\", file);\n        this.uploadFile(file);\n      }\n    };\n  },\n\n  /**\n   * Clicks the invisible file input\n   */\n  _fileClick: function() {\n    var elem = this.$.fileInput;\n    if (elem && document.createEvent) {\n      // sanity check\n      var evt = document.createEvent(\"MouseEvents\");\n      evt.initEvent(\"click\", true, false);\n      elem.dispatchEvent(evt);\n    }\n  },\n\n  /**\n   * Called whenever the list of selected files changes\n   *\n   * @param {object} e An event object\n   */\n  _fileChange: function(e) {\n    var length = e.target.files.length;\n    for (var i = 0; i < length; i++) {\n      var file = e.target.files[i];\n      file.progress = 0;\n      file.error = false;\n      file.complete = false;\n      this.push(\"files\", file);\n      if (!this.multi && this.files.length !== 0) {\n        this.set(\"files\", []);\n        this.set(\"value\", {});\n      }\n      this.uploadFile(file);\n    }\n  },\n\n  /**\n   * Cancels the file upload for a specific file\n   *\n   * @param {object} file An element of the files array\n   */\n  cancel: function(file) {\n    if (file) {\n      if (file.xhr) {\n        file.xhr.abort();\n      }\n      this.splice(\"files\", this.files.indexOf(file), 1);\n      this._showDropText();\n    }\n  },\n\n  /**\n   * Cancels the file upload\n   *\n   * @param {object} e An event object\n   */\n  _cancelUpload: function(e) {\n    this.cancel(e.model.__data__.item);\n  },\n\n  /**\n   * Retries to upload the file\n   *\n   * @param {object} e An event object\n   */\n  _retryUpload: function(e) {\n    e.model.set(\"item.error\", false);\n    e.model.set(\"item.progress\", 0);\n    // The async helps give visual feedback of a retry occurring, even though it's less efficient.\n    var self = this;\n    async.microTask.run(() => {\n      self.uploadFile(e.model.__data__.item);\n    });\n  },\n\n  /**\n   * Whether or not to display the drop text\n   */\n  _showDropText: function() {\n    this.set(\"_shownDropText\", !this.files.length && this.droppable);\n  },\n\n  /**\n   * Uploads a file\n   *\n   * @param {object} file An element of the files array\n   */\n  uploadFile: function(file) {\n    if (!file) {\n      return;\n    }\n    this.fire(\"before-upload\");\n    this._showDropText();\n    var prefix = \"files.\" + this.files.indexOf(file);\n    var self = this;\n\n    var reader = new FileReader();\n\n    reader.addEventListener(\n      \"load\",\n      function() {\n        var r = reader.result;\n        //self.push('value', {\"name\": unescape(encodeURIComponent( file.name )),\"content\":r});\n        //self.value.push({\"name\": unescape(encodeURIComponent( file.name )),\"content\":r});\n        //console.log('value.'+self.files.indexOf(file));\n        self.set(\n          \"value.\" +\n            self.attributes.name.value +\n            \".\" +\n            self.files.indexOf(file),\n          r\n        );\n        //self.notifyPath('value');\n      },\n      false\n    );\n\n    if (!self.value.hasOwnProperty(self.attributes.name.value)) {\n      this.set(\"value.\" + self.attributes.name.value, {});\n    }\n    reader.readAsDataURL(file);\n  },\n  _valueChanged: function() {\n    console.log(\"this.value: \" + JSON.stringify(this.value));\n  },\n  _schemaChanged: function() {\n    var schema = this.schema;\n    /*\n    var inputEl = this.$.fileInput;\n    if (schema.required) {\n      inputEl.required = true;\n    }\n    //inputEl.type = 'file';\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n    */\n\n    /*\n    inputEl.alwaysFloatLabel = true; // label doesn't float when value not set\n\n    if (schema.title) {\n      inputEl.label = schema.title;\n    }\n    */\n  },\n  /*\n  _errorChanged: function() {\n    if (this.error) {\n      this.$.fileInput.errorMessage = this.error;\n      this.$.fileInput.invalid = true;\n    } else {\n      this.$.fileInput.invalid = false;\n      this.$.fileInput.errorMessage = null;\n    }\n  },\n  */\n  _isSchemaValue: function(type) {\n    return this._isSchemaFile(type);\n  },\n  _isSchemaFile: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"file\") !== -1;\n    } else {\n      return type === \"file\";\n    }\n  },\n  _isSchemaBoolean: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  },\n  _isSchemaNumber: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  },\n  _isSchemaString: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  },\n  _isSchemaObject: function(type) {\n    return type === \"object\";\n  },\n  _isSchemaArray: function(type) {\n    return type === \"array\";\n  },\n  stringify: function(s) {\n    return JSON.stringify(s);\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@polymer/iron-icons/editor-icons.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"paper-collapse-item/paper-collapse-item.js\";\nimport \"paper-collapse-item/paper-collapse-group.js\";\nimport \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport \"./eco-json-schema-boolean.js\";\nimport \"./eco-json-schema-enum.js\";\nimport \"./eco-json-schema-input.js\";\nimport \"./eco-json-schema-object.js\";\nimport \"./eco-json-schema-file.js\";\nvar $_documentContainer = document.createElement(\"div\");\n$_documentContainer.setAttribute(\"style\", \"display: none;\");\n\n$_documentContainer.innerHTML = `<dom-module id=\"eco-json-schema-array\">\n\n  \n  \n  \n  \n  \n  \n\n  \n  \n  \n  \n  \n\n  <template>\n    <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n      paper-input {\n        padding: 2px;\n\n        --paper-input-container-label: {\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #212121;\n        }\n      }\n\n      paper-collapse-item {\n        --paper-collapse-item-header: {\n          font-weight: bold;\n          padding: 8px 0 0 8px;\n        }\n\n        ;\n      }\n\n      #form {\n        border: 1px solid #AAAAAA;\n      }\n\n      #form div:nth-child(odd) {\n        background-color: #F2F2F2;\n        padding: 4px;\n      }\n\n      #form div:nth-child(even) {\n        background-color: #E2E2E2;\n        border-top: 1px solid #AAAAAA;\n        border-bottom: 1px solid #AAAAAA;\n        padding: 4px;\n      }\n\n      #form div:focus,\n      #form div:hover,\n      #form div:active {\n        background-color: #FFFFFF !important;\n      }\n\n      paper-icon-button {\n        float: right;\n        border-radius: 50%;\n      }\n\n      .array-add {\n        color: #34e79a;\n        background-color: #f8f8f8;\n      }\n\n      .array-remove-element {\n        color: #f44336;\n        background-color: #f8f8f8;\n      }\n\n      .label {\n        @apply(--paper-input-container-label);\n        white-space: normal;\n        position: static;\n        font-size: 22px;\n        color: #212121;\n      }\n\n      :host {\n        display: block;\n\n        .label {\n          @apply(--paper-input-container-label);\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #212121;\n        }\n      }\n    </style>\n\n    <div class=\"horizontal layout\">\n      <div class=\"flex\" hidden\\$=\"[[!label]]\">[[label]]</div>\n      <paper-icon-button id=\"addarray\" title=\"Add another item\" class=\"array-add\" icon=\"add\" on-click=\"_onAddItem\" role=\"button\" aria-label=\"Add another item\"></paper-icon-button>\n    </div>\n\n    <paper-collapse-group id=\"form\" class=\"vertical flex layout\"></paper-collapse-group>\n\n  </template>\n\n  \n\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer);\n/**\n`eco-json-schema-array` takes in a JSON schema of type array and builds a form,\nexposing a `value` property that represents an array described by the schema.\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-array\n@demo demo/index.html\n*/\nPolymer({\n  is: \"eco-json-schema-array\",\n  properties: {\n    schema: {\n      type: Object,\n      observer: \"_schemaChanged\"\n    },\n    label: {\n      type: String\n    },\n    value: {\n      type: Array,\n      notify: true,\n      value: function() {\n        return [];\n      },\n      observer: \"_valueChanged\"\n    },\n    error: {\n      type: Object,\n      observer: \"_errorChanged\"\n    },\n    _schemaArrayItems: {\n      type: Array,\n      notify: true,\n      value: function() {\n        return [];\n      }\n    }\n  },\n  observers: [\"_schemaArraySplicesChanged(_schemaArrayItems.splices)\"],\n  /**\n   * Notice values have changed and rebuild the form\n   * to match (potentially).\n   */\n  _valueChanged: function(newValue, oldValue) {\n    if (\n      newValue !== oldValue &&\n      typeof newValue !== typeof undefined &&\n      typeof this.schema !== typeof undefined\n    ) {\n      setTimeout(() => {\n        this._buildSchemaArrayItems();\n        // wipe schema array and go from there\n        // this only fires when the element initially builds\n        for (var i in newValue) {\n          this._onAddItemWithValue(newValue[i], parseInt(i));\n        }\n      }, 100);\n    }\n  },\n  ready: function() {},\n  detached: function() {\n    this._clearForm();\n  },\n  _buildSchemaArrayItems: function() {\n    this._schemaArrayItems = [];\n  },\n  _setValue: function() {\n    this.value = [];\n    this.value = this._schemaArrayItems.map(function(item) {\n      return item.value;\n    });\n  },\n  _schemaArraySplicesChanged: function(detail) {\n    if (!detail) {\n      return console.warn(\"detail is undefined\");\n    }\n\n    var ctx = this;\n\n    if (detail.keySplices) {\n      console.warn(\"Got keySplices, don't know what to do with them!\");\n    }\n\n    detail.indexSplices.forEach(function(splice) {\n      var args = [\"value\", splice.index, splice.removed.length];\n\n      if (splice.removed && splice.removed.length) {\n        for (\n          var i = splice.index, ii = splice.index + splice.removed.length;\n          i < ii;\n          i++\n        ) {\n          ctx._removeArrayEl(ctx.$.form.children[i]);\n        }\n      }\n\n      if (splice.addedCount) {\n        for (\n          var i = splice.index, ii = splice.index + splice.addedCount;\n          i < ii;\n          i++\n        ) {\n          var item = splice.object[i];\n\n          var componentEl = ctx.create(item.component.name, {\n            label: item.label,\n            schema: item.schema,\n            schemaArrayItem: item\n          });\n          var containerEl = ctx.create(\"paper-collapse-item\", {\n            header: \"Item \" + (i + 1)\n          });\n          var buttonEl = ctx.create(\"paper-icon-button\", {\n            icon: \"remove\",\n            title: \"Remove item\"\n          });\n          ctx.listen(buttonEl, \"tap\", \"_onRemoveItem\");\n          buttonEl.classList.add(\"array-remove-element\");\n          componentEl.classList.add(\"flex\", \"horizontal\", \"layout\");\n\n          dom(containerEl).appendChild(componentEl);\n          dom(containerEl).appendChild(buttonEl);\n\n          var beforeEl = ctx.$.form.children[i];\n\n          if (beforeEl) {\n            dom(ctx.$.form).insertBefore(containerEl, beforeEl);\n          } else {\n            dom(ctx.$.form).appendChild(containerEl);\n          }\n\n          ctx.listen(\n            componentEl,\n            item.component.valueProperty\n              .replace(/([A-Z])/g, \"-$1\")\n              .toLowerCase() + \"-changed\",\n            \"_schemaArrayItemChanged\"\n          );\n          args.push(ctx._deepClone(componentEl[item.component.valueProperty]));\n        }\n      }\n      ctx.splice.apply(ctx, args);\n    });\n  },\n  _schemaArrayItemChanged: function(event, detail) {\n    if (detail.path && /\\.length$/.test(detail.path)) {\n      return;\n    }\n\n    var ctx = this;\n    var item = event.target.schemaArrayItem;\n    var index = this._schemaArrayItems.indexOf(item);\n    var path = [\"value\", index];\n\n    if (detail.path && /\\.splices$/.test(detail.path)) {\n      path = path.concat(detail.path.split(\".\").slice(1, -1));\n\n      if (detail.value.keySplices) {\n        console.warn(\"Got keySplices, don't know what to do with them!\");\n      }\n\n      detail.value.indexSplices.forEach(function(splice) {\n        var args = [path.join(\".\"), splice.index, splice.removed.length];\n        if (splice.addedCount) {\n          for (\n            var i = splice.index, ii = splice.index + splice.addedCount;\n            i < ii;\n            i++\n          ) {\n            args.push(ctx._deepClone(splice.object[i]));\n          }\n        }\n        ctx.splice.apply(ctx, args);\n      });\n    } else if (detail.path) {\n      path = path.concat(detail.path.split(\".\").slice(1));\n      this.set(path, this._deepClone(detail.value));\n    } else {\n      this.splice(\"value\", index, 1, this._deepClone(detail.value));\n    }\n  },\n  _removeArrayEl: function(el) {\n    var polyEl = dom(el);\n    if (typeof polyEl.childNodes[0] !== typeof undefined) {\n      this.unlisten(\n        polyEl.childNodes[0],\n        polyEl.firstChild.schemaArrayItem.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaArrayItemChanged\"\n      );\n      if (typeof polyEl.childNodes[1] !== typeof undefined) {\n        this.unlisten(polyEl.childNodes[1], \"tap\", \"_onRemoveItem\");\n      }\n    }\n    el.schemaArrayItem = null;\n    dom(this.$.form).removeChild(el);\n  },\n  _clearForm: function() {\n    var formEl = dom(this.$.form);\n    while (formEl.firstChild) {\n      this._removeArrayEl(formEl.firstChild);\n    }\n  },\n  _schemaChanged: function() {\n    this._clearForm();\n    this._buildSchemaArrayItems();\n    this._setValue();\n  },\n  _errorChanged: function() {\n    var ctx = this;\n    dom(this.$.form).childNodes.forEach(function(rowEl, idx) {\n      if (ctx.error && ctx.error[idx]) {\n        dom(rowEl).childNodes[0].error = ctx.error[idx];\n      } else {\n        dom(rowEl).childNodes[0].error = null;\n      }\n    });\n  },\n  _onAddItemWithValue: function(values, pointer) {\n    var schema = this.schema.items;\n    // try to set values if we have them\n    if (typeof values !== typeof undefined) {\n      for (var i in values) {\n        if (typeof schema.properties[i] !== typeof undefined) {\n          schema.properties[i].value = values[i];\n        }\n      }\n    }\n    var item = {\n      label: schema.title,\n      schema: schema,\n      component: schema.component || {}\n    };\n\n    if (!item.component.valueProperty) {\n      item.component.valueProperty = \"value\";\n    }\n\n    if (!item.component.name) {\n      if (this._isSchemaEnum(schema)) {\n        item.component.name = \"eco-json-schema-enum\";\n      } else if (this._isSchemaBoolean(schema.type)) {\n        item.component.name = \"eco-json-schema-boolean\";\n      } else if (this._isSchemaFile(schema.type)) {\n        item.component.name = \"eco-json-schema-file\";\n      } else if (this._isSchemaValue(schema.type)) {\n        item.component.name = \"eco-json-schema-input\";\n      } else if (this._isSchemaObject(schema.type)) {\n        item.component.name = \"eco-json-schema-object\";\n      } else if (this._isSchemaArray(schema.type)) {\n        item.component.name = \"eco-json-schema-array\";\n      } else {\n        return console.error(\"Unknown item type %s\", schema.type);\n      }\n    }\n    var ctx = this;\n    var componentEl = ctx.create(item.component.name, {\n      label: item.label,\n      schema: item.schema,\n      schemaArrayItem: item\n    });\n    var containerEl = ctx.create(\"paper-collapse-item\", {\n      header: \"Item \" + (i + 1)\n    });\n    var buttonEl = ctx.create(\"paper-icon-button\", {\n      icon: \"remove\",\n      title: \"Remove item\"\n    });\n    ctx.listen(buttonEl, \"tap\", \"_onRemoveItem\");\n    buttonEl.classList.add(\"array-remove-element\");\n    componentEl.classList.add(\"flex\", \"horizontal\", \"layout\");\n\n    dom(containerEl).appendChild(componentEl);\n    dom(containerEl).appendChild(buttonEl);\n\n    var beforeEl = ctx.$.form.children[i];\n\n    if (beforeEl) {\n      dom(ctx.$.form).insertBefore(containerEl, beforeEl);\n    } else {\n      dom(ctx.$.form).appendChild(containerEl);\n    }\n    ctx.listen(\n      componentEl,\n      item.component.valueProperty.replace(/([A-Z])/g, \"-$1\").toLowerCase() +\n        \"-changed\",\n      \"_schemaArrayItemChanged\"\n    );\n    // this will add it to the array but not force a splice mutation\n    this._schemaArrayItems.push(item);\n  },\n  _onAddItem: function() {\n    var schema = this.schema.items;\n    var item = {\n      label: schema.title,\n      schema: schema,\n      component: schema.component || {}\n    };\n\n    if (!item.component.valueProperty) {\n      item.component.valueProperty = \"value\";\n    }\n\n    if (!item.component.name) {\n      if (this._isSchemaEnum(schema)) {\n        item.component.name = \"eco-json-schema-enum\";\n      } else if (this._isSchemaBoolean(schema.type)) {\n        item.component.name = \"eco-json-schema-boolean\";\n      } else if (this._isSchemaFile(schema.type)) {\n        item.component.name = \"eco-json-schema-file\";\n      } else if (this._isSchemaValue(schema.type)) {\n        item.component.name = \"eco-json-schema-input\";\n      } else if (this._isSchemaObject(schema.type)) {\n        item.component.name = \"eco-json-schema-object\";\n      } else if (this._isSchemaArray(schema.type)) {\n        item.component.name = \"eco-json-schema-array\";\n      } else {\n        return console.error(\"Unknown item type %s\", schema.type);\n      }\n    }\n    this.push(\"_schemaArrayItems\", item);\n  },\n  _onRemoveItem: function(e) {\n    var item = dom(e).localTarget.previousSibling.schemaArrayItem;\n    var index = this._schemaArrayItems.indexOf(item);\n    this.splice(\"_schemaArrayItems\", index, 1);\n  },\n  _deepClone: function(o) {\n    return JSON.parse(JSON.stringify(o));\n  },\n  _isSchemaValue: function(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type) ||\n      this._isSchemaFile(type)\n    );\n  },\n  _isSchemaFile: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"file\") !== -1;\n    } else {\n      return type === \"file\";\n    }\n  },\n  _isSchemaBoolean: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  },\n  _isSchemaEnum: function(schema) {\n    return !!schema.enum;\n  },\n  _isSchemaNumber: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  },\n  _isSchemaString: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  },\n  _isSchemaObject: function(type) {\n    return type === \"object\";\n  },\n  _isSchemaArray: function(type) {\n    return type === \"array\";\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport \"./eco-json-schema-array.js\";\nimport \"./eco-json-schema-boolean.js\";\nimport \"./eco-json-schema-enum.js\";\nimport \"./eco-json-schema-file.js\";\nimport \"./eco-json-schema-input.js\";\nvar $_documentContainer = document.createElement(\"div\");\n$_documentContainer.setAttribute(\"style\", \"display: none;\");\n\n$_documentContainer.innerHTML = `<dom-module id=\"eco-json-schema-object\">\n\n  \n  \n  \n  \n  \n  \n\n  <template>\n\n    <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n      div.layout {\n        height: auto;\n      }\n      #form {\n        display: block;\n        @apply(--eco-json-schema-object-form);\n        @apply(--layout-vertical);\n        @apply(--layout-wrap);\n      }\n    </style>\n\n    <template is=\"dom-if\" if=\"{{!wizard}}\">\n      <div class=\"header\" hidden\\$=\"[[!label]]\">[[label]]</div>\n    </template>\n    <div class=\"layout vertical flex start-justified\">\n      <div id=\"form\" class=\"layout horizontal flex start-justified\"></div>\n    </div>\n\n\n  </template>\n\n  \n\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer);\n/**\n`eco-json-schema-object` takes in a JSON schema of type object and builds a form,\nexposing a `value` property that represents an object described by the schema.\n\nGiven the element:\n\n```\n<eco-json-schema-object schema=\"[[schema]]\" value=\"{{value}}\"></eco-json-schema-object>\n```\n\nAnd a JSON schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\"\n    }\n  }\n}\n```\n\nA form will be generated, with the elements `value` looking something like this:\n\n```\n> this.value\n{\n  \"name\": \"Eric\"\n}\n```\n\nDeep / nested schemas are supported for type array and object:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\"\n    },\n    \"email\": {\n      \"title\": \"email\",\n      \"type\": \"string\",\n      \"format\": \"email\"\n    }\n  }\n}\n```\n\nCustomizing components for schema properties is supported by extending your JSON\nschema. For any schema sub-property (`properties` for `\"type\": \"object\"` and\n`items` for `\"type\": \"array\"`) a `component` property may be specified, with\nthe following options:\n\n- `component.name` - specifies the name of the custom component to use\n- `component.valueProperty` - specifies which property of the custom element\n  represents its value\n- `component.properties` - properties that will be set on the element\n\nExample schema using custom components (note that `\"valueProperty\": \"value\"` is\nredundant in this case, `\"valueProperty\": \"value\"` will be the default if not specified):\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"phoneNumber\": {\n      \"title\": \"Phone Number\",\n      \"type\": \"string\",\n      \"component\": {\n        \"name\": \"gold-phone-input\",\n        \"valueProperty\": \"value\",\n        \"properties\": {\n          \"countryCode\": \"1\"\n        }\n      }\n    }\n  }\n}\n```\n\nItems set in `component.properties` will override any attributes / properties set\nby `eco-json-schema-form` elements, making it possible to override JSON schema\nvalidation properties mapped to `paper-input` attributes:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    }\n  }\n}\n```\n\nPutting it all together, this schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    },\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\",\n            \"component\": {\n              \"name\": \"gold-phone-input\",\n              \"valueProperty\": \"value\",\n              \"properties\": {\n                \"countryCode\": \"1\"\n              }\n            }\n          }\n        }\n      }\n    },\n    \"emailAddresses\": {\n      \"title\": \"Emails\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"email\": {\n            \"title\": \"email\",\n            \"type\": \"string\",\n            \"format\": \"email\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nWill build a form describing an object:\n\n```\n> this.value\n{\n  \"name\": \"Eric\",\n  \"age\": 28,\n  \"postalCode\": \"H1W 2C5\",\n  \"phoneNumbers\": [\n    {\n      \"type\": \"Mobile\",\n      \"phoneNumber\": \"123-456-7890\"\n    }\n  ]\n  \"emailAddresses\": [\n    {\n      \"type\": \"Personal\",\n      \"email\": \"eric@wat.com\"\n    }\n  ]\n}\n```\n\nExternal validation is supported via the `error` property. By providing an\nobject tree with each leaf representing an error message for properties, the\nmessage will be attached to the appropriate element.\n\nExample, for the Contact schema:\n\n```\nel.error = {\n  \"name\": \"String is too short (0 chars) minimum 2\",\n  \"phoneNumbers\": [\n    {\n      \"phoneNumber\": \"String does not match required format\"\n    }\n  ]\n}\n```\n\n@group eco Elements\n@element eco-json-schema-object\n@demo demo/index.html\n*/\nPolymer({\n  is: \"eco-json-schema-object\",\n  behaviors: [AppLocalizeBehavior],\n  properties: {\n    language: {\n      value: \"en\"\n    },\n    resources: {\n      value: function() {\n        return {};\n      }\n    },\n    schema: {\n      type: Object,\n      observer: \"_schemaChanged\"\n    },\n    label: {\n      type: String\n    },\n    value: {\n      type: Object,\n      notify: true,\n      value: function() {\n        return {};\n      }\n    },\n    error: {\n      type: Object,\n      observer: \"_errorChanged\"\n    },\n    wizard: {\n      type: Boolean,\n      notify: true\n    }\n  },\n  detached: function() {\n    this._clearForm();\n  },\n  _buildSchemaProperties: function() {\n    var ctx = this;\n\n    this._schemaProperties = Object.keys(this.schema.properties || []).map(\n      function(key) {\n        var schema = ctx.schema.properties[key];\n        var property = {\n          property: key,\n          label: schema.title || key,\n          schema: schema,\n          component: schema.component || {}\n        };\n\n        if (!property.component.valueProperty) {\n          property.component.valueProperty = \"value\";\n        }\n        if (!property.component.slot) {\n          property.component.slot = \"\";\n        }\n\n        if (ctx._isSchemaEnum(schema)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-enum\";\n          if (typeof schema.value === typeof undefined) {\n            schema.value = \"\";\n          }\n          property.value = schema.value;\n        } else if (ctx._isSchemaBoolean(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-boolean\";\n          if (typeof schema.value === typeof undefined) {\n            schema.value = false;\n          }\n          property.value = schema.value;\n        } else if (ctx._isSchemaFile(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-file\";\n          if (typeof schema.value === typeof undefined) {\n            schema.value = {};\n          }\n          property.value = schema.value;\n        } else if (ctx._isSchemaValue(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-input\";\n          if (typeof schema.value === typeof undefined) {\n            schema.value = \"\";\n          }\n          property.value = schema.value;\n        } else if (ctx._isSchemaObject(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-object\";\n          if (typeof schema.value === typeof undefined) {\n            schema.value = {};\n          }\n          property.value = schema.value;\n        } else if (ctx._isSchemaArray(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-array\";\n          if (typeof schema.value === typeof undefined) {\n            schema.value = [];\n          }\n          property.value = schema.value;\n        } else {\n          return console.error(\"Unknown property type %s\", schema.type);\n        }\n\n        return property;\n      }\n    );\n  },\n  _schemaPropertyChanged: function(event, detail) {\n    if (detail.path && /\\.length$/.test(detail.path)) {\n      return;\n    }\n\n    var ctx = this;\n    var property = event.target.schemaProperty;\n    var path = [\"value\", property.property];\n\n    if (detail.path && /\\.splices$/.test(detail.path)) {\n      var parts = detail.path.split(\".\").slice(1, -1);\n      while (parts.length) {\n        path.push(parts.shift());\n        if (property.keyMap && property.keyMap[path.join(\".\")]) {\n          path = property.keyMap[path.join(\".\")].split(\".\");\n        }\n      }\n\n      if (detail.value.keySplices) {\n        if (property.keyMap) {\n          detail.value.keySplices.forEach(function(splice) {\n            splice.removed.forEach(function(k) {\n              delete property.keyMap[path.concat([k]).join(\".\")];\n            });\n          });\n        }\n      }\n\n      if (detail.value) {\n        detail.value.indexSplices.forEach(function(splice) {\n          var args = [path.join(\".\"), splice.index, splice.removed.length];\n          if (splice.addedCount) {\n            for (var i = 0, ii = splice.addedCount; i < ii; i++) {\n              if (splice.addedKeys && splice.addedKeys[i]) {\n                property.keyMap = property.keyMap || {};\n                property.keyMap[\n                  path.concat([splice.addedKeys[i]]).join(\".\")\n                ] = path.concat([i + splice.index]).join(\".\");\n              }\n              args.push(ctx._deepClone(splice.object[i + splice.index]));\n            }\n          }\n          ctx.splice.apply(ctx, args);\n        });\n      }\n    } else if (detail.path) {\n      var parts = detail.path.split(\".\").slice(1);\n      var v = this.value;\n      if (!v.hasOwnProperty(property.property)) {\n        this.set(\"value.\" + property.property, {});\n      }\n      while (parts.length) {\n        var k = parts.shift();\n        path.push(k);\n        if (property.keyMap && property.keyMap[path.join(\".\")]) {\n          path = property.keyMap[path.join(\".\")].split(\".\");\n        }\n      }\n      this.set(path.join(\".\"), this._deepClone(detail.value));\n    } else {\n      property.value = detail.value;\n      this.set(path, this._deepClone(detail.value));\n    }\n  },\n  _setValue: function() {\n    var ctx = this;\n    var value = {};\n    this._schemaProperties.forEach(function(property) {\n      if (typeof property.value !== typeof undefined) {\n        value[property.property] = ctx._deepClone(property.value);\n      }\n    });\n    this.value = value;\n  },\n  _buildForm: function() {\n    var ctx = this;\n    this._schemaProperties.forEach(property => {\n      var el = ctx.create(property.component.name, {\n        label: property.label,\n        schema: property.schema,\n        schemaProperty: property,\n        language: this.language,\n        resources: this.resources\n      });\n      el.setAttribute(\"name\", property.property);\n      el.className = \"flex start-justified\";\n      // set the element's default value to be what was passed into the schema\n      el[property.component.valueProperty] = property.value;\n      // support component attribute overrides\n      for (var attr in property.component.attributes) {\n        el.setAttribute(attr, property.component.attributes[attr]);\n      }\n      // support component property overrides\n      for (var prop in property.component.properties) {\n        el[prop] = property.component.properties[prop];\n      }\n      ctx.listen(\n        el,\n        property.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n      dom(ctx.$.form).appendChild(el);\n      // support for slot injection too!\n      if (property.component.slot != \"\") {\n        var temp = document.createElement(\"template\");\n        temp.innerHTML = property.component.slot;\n        dom(el).appendChild(temp.content);\n      }\n    });\n  },\n  _removePropertyEl: function(el) {\n    if (typeof el.schemaProperty !== typeof undefined) {\n      this.unlisten(\n        el,\n        el.schemaProperty.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n    }\n    el.schemaProperty = null;\n    dom(this.$.form).removeChild(el);\n  },\n  _clearForm: function() {\n    var formEl = dom(this.$.form);\n    while (formEl.firstChild) {\n      this._removePropertyEl(formEl.firstChild);\n    }\n  },\n  _schemaChanged: function() {\n    this._clearForm();\n    this._buildSchemaProperties();\n    this._buildForm();\n    this._setValue();\n  },\n  _errorChanged: function() {\n    var ctx = this;\n    dom(this.$.form).childNodes.forEach(function(el) {\n      var name = el.getAttribute(\"name\");\n      if (ctx.error && ctx.error[name]) {\n        el.error = ctx.error[name];\n      } else {\n        el.error = null;\n      }\n    });\n  },\n  _deepClone: function(o) {\n    return JSON.parse(JSON.stringify(o));\n  },\n  _isSchemaValue: function(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type) ||\n      this._isSchemaFile(type)\n    );\n  },\n  _isSchemaFile: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"file\") !== -1;\n    } else {\n      return type === \"file\";\n    }\n  },\n  _isSchemaBoolean: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  },\n  _isSchemaEnum: function(schema) {\n    return !!schema.enum;\n  },\n  _isSchemaNumber: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  },\n  _isSchemaString: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  },\n  _isSchemaObject: function(type) {\n    return type === \"object\";\n  },\n  _isSchemaArray: function(type) {\n    return type === \"array\";\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"@polymer/iron-icons/image-icons.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@polymer/iron-icons/editor-icons.js\";\nimport \"@polymer/iron-pages/iron-pages.js\";\nimport \"@polymer/paper-toolbar/paper-toolbar.js\";\nimport \"@polymer/paper-menu-button/paper-menu-button.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"@polymer/paper-ripple/paper-ripple.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport \"./eco-json-schema-object.js\";\nimport \"./eco-json-schema-array.js\";\nimport \"./eco-json-schema-boolean.js\";\nimport \"./eco-json-schema-enum.js\";\nimport \"./eco-json-schema-file.js\";\nimport \"./eco-json-schema-input.js\";\nvar $_documentContainer = document.createElement(\"div\");\n$_documentContainer.setAttribute(\"style\", \"display: none;\");\n\n$_documentContainer.innerHTML = `<dom-module id=\"eco-json-schema-wizard\">\n  <template>\n    <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n       :host {\n        display: block;\n        @apply(--layout-vertical);\n      }\n\n      paper-input {\n        padding: 2px;\n        --paper-input-container-label: {\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #fff;\n        }\n      }\n\n      .box,\n      #form {\n        display: -webkit-box;\n        display: -webkit-flex;\n        display: -moz-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-flex-align: center;\n        -ms-flex-align: center;\n        -webkit-align-items: center;\n        align-items: center;\n      }\n\n      .fullbleed {\n        z-index: 1;\n      }\n\n      paper-toolbar.bottom {\n        --paper-toolbar-color: var(--app-primary-color);\n        --paper-toolbar-background: var(--dark-theme-text-color);\n      }\n\n      paper-toolbar.bottom paper-icon-button {\n        --paper-toolbar-color: var(--dark-theme-text-color);\n        --paper-toolbar-background: var(--app-primary-color);\n      }\n\n    </style>\n    <div class=\"vertical flex layout fullbleed\">\n      <!--paper-icon-button id=\"camButton\" icon=\"editor:insert-photo\" raised>add photo</paper-icon-button-->\n      <paper-toolbar>\n        <paper-icon-button id=\"prevButton\" icon=\"arrow-back\" hidden\\$=\"{{!hasPrev}}\" on-tap=\"prev\" raised=\"\">{{localize('prev')}}</paper-icon-button><span class=\"title layout horizontal flex\" style=\"white-space: normal\">[[title]]</span>\n        <paper-icon-button id=\"nextButton\" icon=\"arrow-forward\" hidden\\$=\"{{!hasNext}}\" on-tap=\"next\" raised=\"\">{{localize('next')}}</paper-icon-button>\n        <paper-icon-button id=\"submitButton\" icon=\"cloud-upload\" on-tap=\"submit\" raised=\"\">{{localize('submit')}}</paper-icon-button>\n      </paper-toolbar>\n      <iron-pages id=\"form\" class=\"layout horizontal flex start-justified\" role=\"main\" selected=\"[[page]]\" attr-for-selected=\"name\"></iron-pages>\n      <paper-toolbar class=\"bottom\">\n        <div hidden\\$=\"{{!hasPrev}}\" on-tap=\"prev\">\n          <paper-icon-button id=\"prevButton\" icon=\"arrow-back\" raised=\"\">{{localize('prev')}}</paper-icon-button>\n          <span class=\"title layout\" style=\"white-space: normal\">{{localize('prev')}}</span>\n        </div>\n        <span class=\"title layout horizontal flex\" style=\"white-space: normal\"></span>\n        <div hidden\\$=\"{{!hasNext}}\" on-tap=\"next\">\n          <span class=\"title layout\" style=\"white-space: normal\">{{localize('next')}}</span>\n          <paper-icon-button id=\"nextButton\" icon=\"arrow-forward\" raised=\"\">{{localize('next')}}</paper-icon-button>\n        </div>\n      </paper-toolbar>\n    </div>\n  </template>\n  \n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer);\n/**\n`eco-json-schema-wizard` takes in a JSON schema of type object and builds a form,\nexposing a `value` property that represents an object described by the schema.\n\nGiven the element:\n\n```\n<eco-json-schema-wizard schema=\"[[schema]]\" value=\"{{value}}\"></eco-json-schema-wizard>\n```\n\nAnd a JSON schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\"\n    }\n  }\n}\n```\n\nA form will be generated, with the elements `value` looking something like this:\n\n```\n> this.value\n{\n  \"name\": \"Eric\"\n}\n```\n\nDeep / nested schemas are supported for type array and object:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\"\n    },\n    \"email\": {\n      \"title\": \"email\",\n      \"type\": \"string\",\n      \"format\": \"email\"\n    }\n  }\n}\n```\n\nCustomizing components for schema properties is supported by extending your JSON\nschema. For any schema sub-property (`properties` for `\"type\": \"object\"` and\n`items` for `\"type\": \"array\"`) a `component` property may be specified, with\nthe following options:\n\n- `component.name` - specifies the name of the custom component to use\n- `component.valueProperty` - specifies which property of the custom element\n  represents its value\n- `component.properties` - properties that will be set on the element\n\nExample schema using custom components (note that `\"valueProperty\": \"value\"` is\nredundant in this case, `\"valueProperty\": \"value\"` will be the default if not specified):\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"phoneNumber\": {\n      \"title\": \"Phone Number\",\n      \"type\": \"string\",\n      \"component\": {\n        \"name\": \"gold-phone-input\",\n        \"valueProperty\": \"value\",\n        \"properties\": {\n          \"countryCode\": \"1\"\n        }\n      }\n    }\n  }\n}\n```\n\nItems set in `component.properties` will override any attributes / properties set\nby `eco-json-schema-form` elements, making it possible to override JSON schema\nvalidation properties mapped to `paper-input` attributes:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    }\n  }\n}\n```\n\nPutting it all together, this schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    },\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\",\n            \"component\": {\n              \"name\": \"gold-phone-input\",\n              \"valueProperty\": \"value\",\n              \"properties\": {\n                \"countryCode\": \"1\"\n              }\n            }\n          }\n        }\n      }\n    },\n    \"emailAddresses\": {\n      \"title\": \"Emails\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"email\": {\n            \"title\": \"email\",\n            \"type\": \"string\",\n            \"format\": \"email\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nWill build a form describing an object:\n\n```\n> this.value\n{\n  \"name\": \"Eric\",\n  \"age\": 28,\n  \"postalCode\": \"H1W 2C5\",\n  \"phoneNumbers\": [\n    {\n      \"type\": \"Mobile\",\n      \"phoneNumber\": \"123-456-7890\"\n    }\n  ]\n  \"emailAddresses\": [\n    {\n      \"type\": \"Personal\",\n      \"email\": \"eric@wat.com\"\n    }\n  ]\n}\n```\n\nExternal validation is supported via the `error` property. By providing an\nobject tree with each leaf representing an error message for properties, the\nmessage will be attached to the appropriate element.\n\nExample, for the Contact schema:\n\n```\nel.error = {\n  \"name\": \"String is too short (0 chars) minimum 2\",\n  \"phoneNumbers\": [\n    {\n      \"phoneNumber\": \"String does not match required format\"\n    }\n  ]\n}\n```\n\n@group eco Elements\n@element eco-json-schema-wizard\n@demo demo/index.html\n*/\nPolymer({\n  is: \"eco-json-schema-wizard\",\n  behaviors: [AppLocalizeBehavior],\n\n  properties: {\n    language: {\n      type: String,\n      notify: true\n    },\n    resources: {\n      type: Object,\n      notify: true\n    },\n    schema: {\n      type: Object,\n      observer: \"_schemaChanged\"\n    },\n    label: {\n      type: String\n    },\n    value: {\n      type: Object,\n      notify: true,\n      value: function() {\n        return {};\n      }\n    },\n    page: {\n      type: String,\n      notify: true,\n      observer: \"_pageChanged\"\n    },\n    pages: {\n      type: Array,\n      notify: true,\n      value: []\n    },\n    error: {\n      type: Object,\n      observer: \"_errorChanged\"\n    },\n    isReview: {\n      type: Boolean,\n      value: false,\n      notify: true\n    },\n    canSubmit: {\n      type: Boolean,\n      notify: true\n    },\n    hasNext: {\n      type: Boolean,\n      notify: true\n    },\n    hasPrev: {\n      type: Boolean,\n      notify: true\n    },\n    titles: {\n      type: Array,\n      notify: true,\n      value: []\n    },\n    title: {\n      type: String,\n      value: \"\",\n      notify: true\n    }\n  },\n  detached: function() {\n    this._clearForm();\n  },\n  _buildSchemaProperties: function() {\n    var ctx = this;\n\n    this._schemaProperties = Object.keys(this.schema.properties || []).map(\n      function(key) {\n        var schema = ctx.schema.properties[key];\n        var property = {\n          property: key,\n          label: schema.title || key,\n          schema: schema,\n          component: schema.component || {}\n        };\n\n        if (!property.component.valueProperty) {\n          property.component.valueProperty = \"value\";\n        }\n\n        if (ctx._isSchemaEnum(schema)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-enum\";\n          property.value = \"\";\n        } else if (ctx._isSchemaBoolean(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-boolean\";\n          property.value = false;\n        } else if (ctx._isSchemaFile(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-file\";\n          property.value = \"\";\n        } else if (ctx._isSchemaValue(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-input\";\n          property.value = \"\";\n        } else if (ctx._isSchemaObject(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-object\";\n          property.component.wizard = true;\n          property.value = {};\n        } else if (ctx._isSchemaArray(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-array\";\n          property.value = [];\n        } else {\n          return console.error(\"Unknown property type %s\", schema.type);\n        }\n        ctx.push(\"pages\", key);\n        ctx.push(\"titles\", schema.title);\n\n        return property;\n      }\n    );\n  },\n  _schemaPropertyChanged: function(event, detail) {\n    if (detail.path && /\\.length$/.test(detail.path)) {\n      return;\n    }\n\n    var ctx = this;\n    var property = event.target.schemaProperty;\n    var path = [\"value\", property.property];\n\n    if (detail.path && /\\.splices$/.test(detail.path)) {\n      var parts = detail.path.split(\".\").slice(1, -1);\n      while (parts.length) {\n        path.push(parts.shift());\n        if (property.keyMap && property.keyMap[path.join(\".\")]) {\n          path = property.keyMap[path.join(\".\")].split(\".\");\n        }\n      }\n\n      if (detail.value.keySplices) {\n        if (property.keyMap) {\n          detail.value.keySplices.forEach(function(splice) {\n            splice.removed.forEach(function(k) {\n              delete property.keyMap[path.concat([k]).join(\".\")];\n            });\n          });\n        }\n      }\n\n      detail.value.indexSplices.forEach(function(splice) {\n        var args = [path.join(\".\"), splice.index, splice.removed.length];\n        if (splice.addedCount) {\n          for (var i = 0, ii = splice.addedCount; i < ii; i++) {\n            if (splice.addedKeys && splice.addedKeys[i]) {\n              property.keyMap = property.keyMap || {};\n              property.keyMap[\n                path.concat([splice.addedKeys[i]]).join(\".\")\n              ] = path.concat([i + splice.index]).join(\".\");\n            }\n            args.push(ctx._deepClone(splice.object[i + splice.index]));\n          }\n        }\n        ctx.splice.apply(ctx, args);\n      });\n    } else if (detail.path) {\n      var parts = detail.path.split(\".\").slice(1);\n      var v = this.value;\n      if (!v.hasOwnProperty(property.property)) {\n        this.set(\"value.\" + property.property, {});\n      }\n      while (parts.length) {\n        var k = parts.shift();\n        path.push(k);\n        if (property.keyMap && property.keyMap[path.join(\".\")]) {\n          path = property.keyMap[path.join(\".\")].split(\".\");\n        }\n      }\n      this.set(path.join(\".\"), this._deepClone(detail.value));\n\n      console.log(\"value: \" + JSON.stringify(this.value));\n    }\n  },\n  _setValue: function() {\n    var ctx = this;\n    var value = {};\n    this._schemaProperties.forEach(function(property) {\n      value[property.property] = ctx._deepClone(property.value);\n    });\n    this.value = value;\n  },\n  _buildForm: function() {\n    var ctx = this;\n    this._schemaProperties.forEach(property => {\n      var el = ctx.create(property.component.name, {\n        label: property.label,\n        schema: property.schema,\n        schemaProperty: property,\n        language: this.language,\n        resources: this.resources\n      });\n\n      el.setAttribute(\"name\", property.property);\n      el.className = \"flex start-justified\";\n\n      property.value = el[property.component.valueProperty];\n      ctx.listen(\n        el,\n        property.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n      dom(ctx.$.form).appendChild(el);\n    });\n  },\n  _removePropertyEl: function(el) {\n    if (typeof el.schemaProperty !== typeof undefined) {\n      this.unlisten(\n        el,\n        el.schemaProperty.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n    }\n    el.schemaProperty = null;\n    dom(this.$.form).removeChild(el);\n  },\n  _clearForm: function() {\n    var formEl = dom(this.$.form);\n    while (formEl.firstChild) {\n      this._removePropertyEl(formEl.firstChild);\n    }\n  },\n  _schemaChanged: function() {\n    this._clearForm();\n    this._buildSchemaProperties();\n    this._buildForm();\n    this._setValue();\n    if (this.pages.length > 0) {\n      this.set(\"page\", this.pages[0]);\n    }\n    this.set(\"title\", this.titles[0]);\n  },\n  next: function() {\n    var current = this.pages.indexOf(this.page);\n    var next = current;\n    if (current !== -1) {\n      if (current < this.pages.length - 1) {\n        next = current + 1;\n      }\n      this.set(\"page\", this.pages[next]);\n      this.set(\"title\", this.titles[next]);\n    } else {\n      console.log(\"Invalid current page in wizard\");\n    }\n  },\n  prev: function() {\n    var current = this.pages.indexOf(this.page);\n    var prev = current;\n    if (current !== -1) {\n      if (current > 0) {\n        prev = current - 1;\n      }\n      this.set(\"page\", this.pages[prev]);\n      this.set(\"title\", this.titles[prev]);\n    } else {\n      console.log(\"Invalid current page in wizard\");\n    }\n  },\n  submit: function() {\n    this.fire(\"submit\");\n  },\n  _pageChanged: function() {\n    var current = this.pages.indexOf(this.page);\n    if (current === 0) {\n      this.set(\"hasPrev\", false);\n    } else {\n      this.set(\"hasPrev\", true);\n    }\n    if (current === this.pages.length - 1) {\n      this.set(\"hasNext\", false);\n    } else {\n      this.set(\"hasNext\", true);\n    }\n  },\n  _errorChanged: function() {\n    var ctx = this;\n    dom(this.$.form).childNodes.forEach(function(el) {\n      var name = el.getAttribute(\"name\");\n      if (ctx.error && ctx.error[name]) {\n        el.error = ctx.error[name];\n      } else {\n        el.error = null;\n      }\n    });\n  },\n  _deepClone: function(o) {\n    return JSON.parse(JSON.stringify(o));\n  },\n  _isSchemaValue: function(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type) ||\n      this._isSchemaFile(type)\n    );\n  },\n  _isSchemaFile: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"file\") !== -1;\n    } else {\n      return type === \"file\";\n    }\n  },\n  _isSchemaBoolean: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  },\n  _isSchemaEnum: function(schema) {\n    return !!schema.enum;\n  },\n  _isSchemaNumber: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  },\n  _isSchemaString: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  },\n  _isSchemaObject: function(type) {\n    return type === \"object\";\n  },\n  _isSchemaArray: function(type) {\n    return type === \"array\";\n  }\n});\n"],"names":["$_documentContainer","document","createElement","setAttribute","innerHTML","head","appendChild","is","properties","schema","type","Object","observer","value","Boolean","notify","error","_label","String","ready","detached","_schemaChanged","this","inputEl","$","checkbox","component","keys","forEach","prop","title","_isSchemaValue","_isSchemaBoolean","_isSchemaNumber","_isSchemaString","Array","isArray","indexOf","_isSchemaObject","_isSchemaArray","behaviors","IronValidatableBehavior","_items","dropdown","enum","filter","item","label","_errorChanged","invalid","AppLocalizeBehavior","language","resources","input","required","multipleOf","step","isNaN","maximum","exclusiveMaximum","max","minimum","exclusiveMinimum","min","format","alwaysFloatLabel","maxLength","maxlength","minLength","minlength","pattern","errorMessage","target","accept","droppable","dropText","multi","files","raised","noink","headers","retryText","removeText","successText","errorText","_shownDropText","additional","fileDataName","paperButtonAlt","paperButtonTitle","clear","set","fileInput","_showDropText","toggleAttribute","button","setupDrop","uploadBorder","UploadBorder","toggleClass","ondragover","e","stopPropagation","effect","dataTransfer","dropEffect","effectAllowed","ondragleave","ondrop","event","preventDefault","length","i","file","mimeType","match","fileType","name","progress","complete","push","uploadFile","_fileClick","elem","createEvent","evt","initEvent","dispatchEvent","_fileChange","cancel","xhr","abort","splice","_cancelUpload","model","__data__","_retryUpload","self","async","run","fire","reader","FileReader","addEventListener","r","result","attributes","hasOwnProperty","readAsDataURL","_valueChanged","console","log","JSON","stringify","_isSchemaFile","s","_schemaArrayItems","observers","newValue","oldValue","_typeof","setTimeout","_this","_buildSchemaArrayItems","_onAddItemWithValue","parseInt","_clearForm","_setValue","map","_schemaArraySplicesChanged","detail","warn","ctx","keySplices","indexSplices","args","index","removed","ii","_removeArrayEl","form","children","addedCount","object","componentEl","create","schemaArrayItem","containerEl","header","buttonEl","icon","listen","classList","add","dom","beforeEl","insertBefore","valueProperty","replace","toLowerCase","_deepClone","apply","_schemaArrayItemChanged","path","test","concat","split","slice","join","el","polyEl","childNodes","unlisten","firstChild","removeChild","formEl","rowEl","idx","values","pointer","items","_isSchemaEnum","_onAddItem","_onRemoveItem","localTarget","previousSibling","o","parse","wizard","_buildSchemaProperties","_schemaProperties","key","property","slot","_schemaPropertyChanged","schemaProperty","parts","shift","keyMap","k","addedKeys","_buildForm","attr","className","temp","content","_removePropertyEl","getAttribute","page","pages","isReview","canSubmit","hasNext","hasPrev","titles","next","current","prev","submit","_pageChanged"],"mappings":"g1FAGA,IAAIA,EAAsBC,SAASC,cAAc,OACjDF,EAAoBG,aAAa,QAAS,kBAE1CH,EAAoBI,+dAuBpBH,SAASI,KAAKC,YAAYN,aAClB,CACNO,GAAI,0BACJC,WAAY,CACVC,OAAQ,CACNC,KAAMC,OACNC,SAAU,kBAEZC,MAAO,CACLH,KAAMI,QACNC,QAAQ,EACRF,OAAO,GAETG,MAAO,CACLN,KAAMI,QACND,OAAO,GAETI,OAAQ,CACNP,KAAMQ,OACNH,QAAQ,EACRF,MAAO,KAGXM,MAAO,aACPC,SAAU,aACVC,eAAgB,eACVZ,EAASa,KAAKb,OACdc,EAAUD,KAAKE,EAAEC,SAEjBhB,EAAOiB,WAAajB,EAAOiB,UAAUlB,YACvCG,OAAOgB,KAAKlB,EAAOiB,UAAUlB,YAAYoB,QAAQ,SAASC,GACxDN,EAAQM,GAAQpB,EAAOiB,UAAUlB,WAAWqB,KAI5CpB,EAAOqB,aACJb,OAASR,EAAOqB,QAGzBC,eAAgB,SAASrB,UAErBY,KAAKU,iBAAiBtB,IACtBY,KAAKW,gBAAgBvB,IACrBY,KAAKY,gBAAgBxB,IAGzBsB,iBAAkB,SAAStB,UACrByB,MAAMC,QAAQ1B,IACoB,IAA7BA,EAAK2B,QAAQ,WAEJ,YAAT3B,GAGXuB,gBAAiB,SAASvB,UACpByB,MAAMC,QAAQ1B,IACmB,IAA5BA,EAAK2B,QAAQ,YAAiD,IAA7B3B,EAAK2B,QAAQ,WAErC,WAAT3B,GAA8B,YAATA,GAGhCwB,gBAAiB,SAASxB,UACpByB,MAAMC,QAAQ1B,IACmB,IAA5BA,EAAK2B,QAAQ,UAEJ,WAAT3B,GAGX4B,gBAAiB,SAAS5B,SACR,WAATA,GAET6B,eAAgB,SAAS7B,SACP,UAATA,SC9FPV,EAAsBC,SAASC,cAAc,SAC7BC,aAAa,QAAS,oBAEtBC,moCA+CpBH,SAASI,KAAKC,YAAYN,aAClB,CACNO,GAAI,uBACJiC,UAAW,CAACC,2BACZjC,WAAY,CACVC,OAAQ,CACNC,KAAMC,OACNC,SAAU,kBAEZC,MAAO,CACLH,KAAMQ,OACNH,QAAQ,EACRF,MAAO,MAETG,MAAO,CACLN,KAAMQ,OACNN,SAAU,gBACVC,MAAO,MAET6B,OAAQ,CACNhC,KAAMC,OACNE,MAAO,iBACE,MAIbM,MAAO,aACPC,SAAU,aACVC,eAAgB,eACVZ,EAASa,KAAKb,OACdc,EAAUD,KAAKE,EAAEmB,SAEjBlC,EAAOiB,WAAajB,EAAOiB,UAAUlB,YACvCG,OAAOgB,KAAKlB,EAAOiB,UAAUlB,YAAYoB,QAAQ,SAASC,GACxDN,EAAQM,GAAQpB,EAAOiB,UAAUlB,WAAWqB,UAI3Ca,OAASjC,EAAOmC,KAAKC,OAAO,SAASC,UACxB,OAATA,IAGLrC,EAAOqB,QACTP,EAAQwB,MAAQtC,EAAOqB,QAG3BkB,cAAe,WACT1B,KAAKN,WACFQ,EAAEmB,SAASM,SAAU,OAErBzB,EAAEmB,SAASM,SAAU,GAG9BlB,eAAgB,SAASrB,UAErBY,KAAKU,iBAAiBtB,IACtBY,KAAKW,gBAAgBvB,IACrBY,KAAKY,gBAAgBxB,IAGzBsB,iBAAkB,SAAStB,UACrByB,MAAMC,QAAQ1B,IACoB,IAA7BA,EAAK2B,QAAQ,WAEJ,YAAT3B,GAGXuB,gBAAiB,SAASvB,UACpByB,MAAMC,QAAQ1B,IACmB,IAA5BA,EAAK2B,QAAQ,YAAiD,IAA7B3B,EAAK2B,QAAQ,WAErC,WAAT3B,GAA8B,YAATA,GAGhCwB,gBAAiB,SAASxB,UACpByB,MAAMC,QAAQ1B,IACmB,IAA5BA,EAAK2B,QAAQ,UAEJ,WAAT3B,GAGX4B,gBAAiB,SAAS5B,SACR,WAATA,GAET6B,eAAgB,SAAS7B,SACP,UAATA,SCxIPV,EAAsBC,SAASC,cAAc,SAC7BC,aAAa,QAAS,oBAEtBC,ihBA6BpBH,SAASI,KAAKC,YAAYN,aAelB,CACNO,GAAI,wBACJiC,UAAW,CAACU,uBAEZ1C,WAAY,CACV2C,SAAU,CACRtC,MAAO,MAETuC,UAAW,CACTvC,MAAO,iBACE,KAGXJ,OAAQ,CACNC,KAAMC,OACNC,SAAU,kBAEZC,MAAO,CACLH,KAAMQ,OACNH,QAAQ,EACRF,MAAO,iBACE,KAGXG,MAAO,CACLN,KAAMQ,OACNN,SAAU,gBACVC,MAAO,OAGXM,MAAO,aACPC,SAAU,aACVC,eAAgB,eACVZ,EAASa,KAAKb,OACdc,EAAUD,KAAKE,EAAE6B,MACjB5C,EAAO6C,WACT/B,EAAQ+B,UAAW,GAEjBhC,KAAKW,gBAAgBxB,EAAOC,QAC9Ba,EAAQb,KAAO,SAEXD,EAAO8C,aACThC,EAAQiC,KAAO/C,EAAO8C,YAGnBE,MAAMhD,EAAOiD,WACZjD,EAAOkD,iBACTpC,EAAQqC,IAAMnD,EAAOiD,SAAWjD,EAAO8C,YAAc,GAErDhC,EAAQqC,IAAMnD,EAAOiD,SAIpBD,MAAMhD,EAAOoD,WACZpD,EAAOqD,iBACTvC,EAAQwC,IAAMtD,EAAOoD,SAAWpD,EAAO8C,YAAc,GAErDhC,EAAQwC,IAAMtD,EAAOoD,UAKvBvC,KAAKY,gBAAgBzB,EAAOC,QACR,cAAlBD,EAAOuD,QACTzC,EAAQb,KAAO,iBACfa,EAAQ0C,kBAAmB,GACA,SAAlBxD,EAAOuD,OAChBzC,EAAQb,KAAO,OACY,UAAlBD,EAAOuD,OAChBzC,EAAQb,KAAO,QACY,aAAlBD,EAAOuD,OAChBzC,EAAQb,KAAO,OACY,SAAlBD,EAAOuD,OAChBzC,EAAQb,KAAO,OACY,SAAlBD,EAAOuD,OAChBzC,EAAQb,KAAO,OACY,QAAlBD,EAAOuD,OAChBzC,EAAQb,KAAO,MAEfa,EAAQb,KAAO,OASbD,EAAOyD,YACT3C,EAAQ4C,UAAY1D,EAAOyD,WAGzBzD,EAAO2D,YACT7C,EAAQ8C,UAAY5D,EAAO2D,WAGzB3D,EAAO6D,UACT/C,EAAQ+C,QAAU7D,EAAO6D,UAIzB7D,EAAOiB,WAAajB,EAAOiB,UAAUlB,YACvCG,OAAOgB,KAAKlB,EAAOiB,UAAUlB,YAAYoB,QAAQ,SAASC,GACxDN,EAAQM,GAAQpB,EAAOiB,UAAUlB,WAAWqB,KAIhDN,EAAQ0C,kBAAmB,EAEvBxD,EAAOqB,QACTP,EAAQwB,MAAQtC,EAAOqB,QAG3BkB,cAAe,WACT1B,KAAKN,YACFQ,EAAE6B,MAAMkB,aAAejD,KAAKN,WAC5BQ,EAAE6B,MAAMJ,SAAU,SAElBzB,EAAE6B,MAAMJ,SAAU,OAClBzB,EAAE6B,MAAMkB,aAAe,OAGhCxC,eAAgB,SAASrB,UAErBY,KAAKU,iBAAiBtB,IACtBY,KAAKW,gBAAgBvB,IACrBY,KAAKY,gBAAgBxB,IAGzBsB,iBAAkB,SAAStB,UACrByB,MAAMC,QAAQ1B,IACoB,IAA7BA,EAAK2B,QAAQ,WAEJ,YAAT3B,GAGXuB,gBAAiB,SAASvB,UACpByB,MAAMC,QAAQ1B,IACmB,IAA5BA,EAAK2B,QAAQ,YAAiD,IAA7B3B,EAAK2B,QAAQ,WAErC,WAAT3B,GAA8B,YAATA,GAGhCwB,gBAAiB,SAASxB,UACpByB,MAAMC,QAAQ1B,IACmB,IAA5BA,EAAK2B,QAAQ,UAEJ,WAAT3B,GAGX4B,gBAAiB,SAAS5B,SACR,WAATA,GAET6B,eAAgB,SAAS7B,SACP,UAATA,SCtMPV,EAAsBC,SAASC,cAAc,SAC7BC,aAAa,QAAS,oBAEtBC,oxGAgIpBH,SAASI,KAAKC,YAAYN,aAelB,CACNO,GAAI,uBACJiC,UAAW,CAACU,uBAEZ1C,WAAY,CACV2C,SAAU,CACRtC,MAAO,KACPE,QAAQ,GAEVqC,UAAW,CACTvC,MAAO,iBACE,IAETE,QAAQ,GAEVN,OAAQ,CACNC,KAAMC,OACNC,SAAU,kBAEZC,MAAO,CACLH,KAAMC,OACNI,QAAQ,EACRF,MAAO,iBACE,IAETD,SAAU,iBAeZ4D,OAAQ,CACN9D,KAAMQ,OACNL,MAAO,IAOT4D,OAAQ,CACN/D,KAAMQ,OACNL,MAAO,IAMT6D,UAAW,CACThE,KAAMI,QACND,OAAO,GAMT8D,SAAU,CACRjE,KAAMQ,OACNL,MAAO,mBAMT+D,MAAO,CACLlE,KAAMI,QACND,OAAO,GAMTgE,MAAO,CACLnE,KAAMyB,MACNpB,QAAQ,EACRF,MAAO,iBACE,KAOXiE,OAAQ,CACNpE,KAAMI,QACND,OAAO,GAMTkE,MAAO,CACLrE,KAAMI,QACND,OAAO,GAMTmE,QAAS,CACPtE,KAAMC,OACNE,MAAO,IAMToE,UAAW,CACTvE,KAAMQ,OACNL,MAAO,gBAMTqE,WAAY,CACVxE,KAAMQ,OACNL,MAAO,UAMTsE,YAAa,CACXzE,KAAMQ,OACNL,MAAO,WAMTuE,UAAW,CACT1E,KAAMQ,OACNL,MAAO,2BAMTwE,eAAgB,CACd3E,KAAMI,QACND,OAAO,GAMTyE,WAAY,CACV5E,KAAMC,OACNE,MAAO,IAMT0E,aAAc,CACZ7E,KAAMQ,OACNL,MAAO,QAMT2E,eAAgB,CACd9E,KAAMQ,OACNL,MAAO,IAMT4E,iBAAkB,CAChB/E,KAAMQ,OACNL,MAAO,KAMX6E,MAAO,gBACAC,IAAI,QAAS,SACbnE,EAAEoE,UAAU/E,MAAQ,QACpBgF,iBAGP1E,MAAO,WACDG,KAAKwD,aACFgB,gBAAgB,UAAU,EAAMxE,KAAKE,EAAEuE,QAE1CzE,KAAKyD,YACFe,gBAAgB,SAAS,EAAMxE,KAAKE,EAAEuE,QAEzCzE,KAAKoD,iBACFmB,qBACAG,cAOTA,UAAW,eACLC,EAAe3E,KAAKE,EAAE0E,kBACrBC,YAAY,WAAW,EAAMF,QAE7BG,WAAa,SAASC,GACzBA,EAAEC,uBACGH,YAAY,SAAS,EAAMF,OAI5BM,EAASF,EAAEG,cAAgBH,EAAEG,aAAaC,WAC1CC,EAAgBL,EAAEG,cAAgBH,EAAEG,aAAaE,oBACtC,SAAXH,GAAuC,SAAlBG,IACvBL,EAAEG,aAAaC,WAA+B,SAAlBC,EAA2B,OAAS,SAI3D,QAGJC,YAAc,uBACZR,YAAY,SAAS,EAAOF,IAC1B,QAGJW,OAAS,SAASC,WAChBV,YAAY,SAAS,EAAOF,GACjCY,EAAMC,iBAGDxF,KAAKsD,OAA+B,IAAtBtD,KAAKuD,MAAMkC,eAI1BA,EAASF,EAAML,aAAa3B,MAAMkC,OAC7BC,EAAI,EAAGA,EAAID,EAAQC,IAAK,KAC3BC,EAAOJ,EAAML,aAAa3B,MAAMmC,GAKhCE,EACY,KAAdD,EAAKvG,KAAcuG,EAAKvG,KAAKyG,MAAM,aAAa,GAAK,KACnDC,EAAWH,EAAKI,KAAKF,MAAM,aAAa,IAE1B,KAAhB7F,KAAKmD,QAEHnD,KAAKmD,OAAOpC,QAAQ6E,IAAa,GACjC5F,KAAKmD,OAAOpC,QAAQ+E,IAAa,KAMrCH,EAAKK,SAAW,EAChBL,EAAKjG,OAAQ,EACbiG,EAAKM,UAAW,OACXC,KAAK,QAASP,QACdQ,WAAWR,OAQtBS,WAAY,eACNC,EAAOrG,KAAKE,EAAEoE,aACd+B,GAAQ1H,SAAS2H,YAAa,KAE5BC,EAAM5H,SAAS2H,YAAY,eAC/BC,EAAIC,UAAU,SAAS,GAAM,GAC7BH,EAAKI,cAAcF,KASvBG,YAAa,SAAS3B,WAChBU,EAASV,EAAE7B,OAAOK,MAAMkC,OACnBC,EAAI,EAAGA,EAAID,EAAQC,IAAK,KAC3BC,EAAOZ,EAAE7B,OAAOK,MAAMmC,GAC1BC,EAAKK,SAAW,EAChBL,EAAKjG,OAAQ,EACbiG,EAAKM,UAAW,OACXC,KAAK,QAASP,GACd3F,KAAKsD,OAA+B,IAAtBtD,KAAKuD,MAAMkC,cACvBpB,IAAI,QAAS,SACbA,IAAI,QAAS,UAEf8B,WAAWR,KASpBgB,OAAQ,SAAShB,GACXA,IACEA,EAAKiB,KACPjB,EAAKiB,IAAIC,aAENC,OAAO,QAAS9G,KAAKuD,MAAMxC,QAAQ4E,GAAO,QAC1CpB,kBASTwC,cAAe,SAAShC,QACjB4B,OAAO5B,EAAEiC,MAAMC,SAASzF,OAQ/B0F,aAAc,SAASnC,GACrBA,EAAEiC,MAAM3C,IAAI,cAAc,GAC1BU,EAAEiC,MAAM3C,IAAI,gBAAiB,OAEzB8C,EAAOnH,KACXoH,YAAgBC,IAAI,WAClBF,EAAKhB,WAAWpB,EAAEiC,MAAMC,SAASzF,SAOrC+C,cAAe,gBACRF,IAAI,kBAAmBrE,KAAKuD,MAAMkC,QAAUzF,KAAKoD,YAQxD+C,WAAY,SAASR,MACdA,QAGA2B,KAAK,sBACL/C,gBACmBvE,KAAKuD,MAAMxC,QAAQ4E,OACvCwB,EAAOnH,KAEPuH,EAAS,IAAIC,WAEjBD,EAAOE,iBACL,OACA,eACMC,EAAIH,EAAOI,OAIfR,EAAK9C,IACH,SACE8C,EAAKS,WAAW7B,KAAKxG,MACrB,IACA4H,EAAK5D,MAAMxC,QAAQ4E,GACrB+B,KAIJ,GAGGP,EAAK5H,MAAMsI,eAAeV,EAAKS,WAAW7B,KAAKxG,aAC7C8E,IAAI,SAAW8C,EAAKS,WAAW7B,KAAKxG,MAAO,IAElDgI,EAAOO,cAAcnC,KAEvBoC,cAAe,WACbC,QAAQC,IAAI,eAAiBC,KAAKC,UAAUnI,KAAKT,SAEnDQ,eAAgB,WACDC,KAAKb,QAkCpBsB,eAAgB,SAASrB,UAChBY,KAAKoI,cAAchJ,IAE5BgJ,cAAe,SAAShJ,UAClByB,MAAMC,QAAQ1B,IACiB,IAA1BA,EAAK2B,QAAQ,QAEJ,SAAT3B,GAGXsB,iBAAkB,SAAStB,UACrByB,MAAMC,QAAQ1B,IACoB,IAA7BA,EAAK2B,QAAQ,WAEJ,YAAT3B,GAGXuB,gBAAiB,SAASvB,UACpByB,MAAMC,QAAQ1B,IACmB,IAA5BA,EAAK2B,QAAQ,YAAiD,IAA7B3B,EAAK2B,QAAQ,WAErC,WAAT3B,GAA8B,YAATA,GAGhCwB,gBAAiB,SAASxB,UACpByB,MAAMC,QAAQ1B,IACmB,IAA5BA,EAAK2B,QAAQ,UAEJ,WAAT3B,GAGX4B,gBAAiB,SAAS5B,SACR,WAATA,GAET6B,eAAgB,SAAS7B,SACP,UAATA,GAET+I,UAAW,SAASE,UACXH,KAAKC,UAAUE,UClmBtB3J,EAAsBC,SAASC,cAAc,SAC7BC,aAAa,QAAS,oBAEtBC,6qEA4GpBH,SAASI,KAAKC,YAAYN,aAWlB,CACNO,GAAI,wBACJC,WAAY,CACVC,OAAQ,CACNC,KAAMC,OACNC,SAAU,kBAEZmC,MAAO,CACLrC,KAAMQ,QAERL,MAAO,CACLH,KAAMyB,MACNpB,QAAQ,EACRF,MAAO,iBACE,IAETD,SAAU,iBAEZI,MAAO,CACLN,KAAMC,OACNC,SAAU,iBAEZgJ,kBAAmB,CACjBlJ,KAAMyB,MACNpB,QAAQ,EACRF,MAAO,iBACE,MAIbgJ,UAAW,CAAC,yDAKZR,cAAe,SAASS,EAAUC,cAE9BD,IAAaC,iBACbC,EAAOF,kBACPE,EAAO1I,KAAKb,SAEZwJ,WAAW,eAIJ,IAAIjD,KAHTkD,EAAKC,yBAGSL,EACZI,EAAKE,oBAAoBN,EAAS9C,GAAIqD,SAASrD,KAEhD,MAGP7F,MAAO,aACPC,SAAU,gBACHkJ,cAEPH,uBAAwB,gBACjBP,kBAAoB,IAE3BW,UAAW,gBACJ1J,MAAQ,QACRA,MAAQS,KAAKsI,kBAAkBY,IAAI,SAAS1H,UACxCA,EAAKjC,SAGhB4J,2BAA4B,SAASC,OAC9BA,SACIpB,QAAQqB,KAAK,2BAGlBC,EAAMtJ,KAENoJ,EAAOG,YACTvB,QAAQqB,KAAK,oDAGfD,EAAOI,aAAalJ,QAAQ,SAASwG,OAC/B2C,EAAO,CAAC,QAAS3C,EAAO4C,MAAO5C,EAAO6C,QAAQlE,WAE9CqB,EAAO6C,SAAW7C,EAAO6C,QAAQlE,WAEjC,IAAIC,EAAIoB,EAAO4C,MAAOE,EAAK9C,EAAO4C,MAAQ5C,EAAO6C,QAAQlE,OACzDC,EAAIkE,EACJlE,IAEA4D,EAAIO,eAAeP,EAAIpJ,EAAE4J,KAAKC,SAASrE,OAIvCoB,EAAOkD,eAEHtE,EAAIoB,EAAO4C,MAAOE,EAAK9C,EAAO4C,MAAQ5C,EAAOkD,WACjDtE,EAAIkE,EACJlE,IACA,KACIlE,EAAOsF,EAAOmD,OAAOvE,GAErBwE,EAAcZ,EAAIa,OAAO3I,EAAKpB,UAAU2F,KAAM,CAChDtE,MAAOD,EAAKC,MACZtC,OAAQqC,EAAKrC,OACbiL,gBAAiB5I,IAEf6I,EAAcf,EAAIa,OAAO,sBAAuB,CAClDG,OAAQ,SAAW5E,EAAI,KAErB6E,EAAWjB,EAAIa,OAAO,oBAAqB,CAC7CK,KAAM,SACNhK,MAAO,gBAET8I,EAAImB,OAAOF,EAAU,MAAO,iBAC5BA,EAASG,UAAUC,IAAI,wBACvBT,EAAYQ,UAAUC,IAAI,OAAQ,aAAc,UAEhDC,IAAIP,GAAarL,YAAYkL,GAC7BU,IAAIP,GAAarL,YAAYuL,OAEzBM,EAAWvB,EAAIpJ,EAAE4J,KAAKC,SAASrE,GAE/BmF,EACFD,IAAItB,EAAIpJ,EAAE4J,MAAMgB,aAAaT,EAAaQ,GAE1CD,IAAItB,EAAIpJ,EAAE4J,MAAM9K,YAAYqL,GAG9Bf,EAAImB,OACFP,EACA1I,EAAKpB,UAAU2K,cACZC,QAAQ,WAAY,OACpBC,cAAgB,WACnB,2BAEFxB,EAAKvD,KAAKoD,EAAI4B,WAAWhB,EAAY1I,EAAKpB,UAAU2K,iBAGxDzB,EAAIxC,OAAOqE,MAAM7B,EAAKG,MAG1B2B,wBAAyB,SAAS7F,EAAO6D,OACnCA,EAAOiC,OAAQ,YAAYC,KAAKlC,EAAOiC,WAIvC/B,EAAMtJ,KACNwB,EAAO+D,EAAMrC,OAAOkH,gBACpBV,EAAQ1J,KAAKsI,kBAAkBvH,QAAQS,GACvC6J,EAAO,CAAC,QAAS3B,GAEjBN,EAAOiC,MAAQ,aAAaC,KAAKlC,EAAOiC,OAC1CA,EAAOA,EAAKE,OAAOnC,EAAOiC,KAAKG,MAAM,KAAKC,MAAM,GAAI,IAEhDrC,EAAO7J,MAAMgK,YACfvB,QAAQqB,KAAK,oDAGfD,EAAO7J,MAAMiK,aAAalJ,QAAQ,SAASwG,OACrC2C,EAAO,CAAC4B,EAAKK,KAAK,KAAM5E,EAAO4C,MAAO5C,EAAO6C,QAAQlE,WACrDqB,EAAOkD,eAEP,IAAItE,EAAIoB,EAAO4C,MAAOE,EAAK9C,EAAO4C,MAAQ5C,EAAOkD,WACjDtE,EAAIkE,EACJlE,IAEA+D,EAAKvD,KAAKoD,EAAI4B,WAAWpE,EAAOmD,OAAOvE,KAG3C4D,EAAIxC,OAAOqE,MAAM7B,EAAKG,MAEfL,EAAOiC,MAChBA,EAAOA,EAAKE,OAAOnC,EAAOiC,KAAKG,MAAM,KAAKC,MAAM,SAC3CpH,IAAIgH,EAAMrL,KAAKkL,WAAW9B,EAAO7J,cAEjCuH,OAAO,QAAS4C,EAAO,EAAG1J,KAAKkL,WAAW9B,EAAO7J,UAG1DsK,eAAgB,SAAS8B,OACnBC,EAAShB,IAAIe,iBACbjD,EAAOkD,EAAOC,WAAW,WACtBC,SACHF,EAAOC,WAAW,GAClBD,EAAOG,WAAW3B,gBAAgBhK,UAAU2K,cACzCC,QAAQ,WAAY,OACpBC,cAAgB,WACnB,yCAEEvC,EAAOkD,EAAOC,WAAW,UACtBC,SAASF,EAAOC,WAAW,GAAI,MAAO,kBAG/CF,EAAGvB,gBAAkB,KACrBQ,IAAI5K,KAAKE,EAAE4J,MAAMkC,YAAYL,IAE/B3C,WAAY,mBACNiD,EAASrB,IAAI5K,KAAKE,EAAE4J,MACjBmC,EAAOF,iBACPlC,eAAeoC,EAAOF,aAG/BhM,eAAgB,gBACTiJ,kBACAH,8BACAI,aAEPvH,cAAe,eACT4H,EAAMtJ,KACV4K,IAAI5K,KAAKE,EAAE4J,MAAM+B,WAAWvL,QAAQ,SAAS4L,EAAOC,GAC9C7C,EAAI5J,OAAS4J,EAAI5J,MAAMyM,GACzBvB,IAAIsB,GAAOL,WAAW,GAAGnM,MAAQ4J,EAAI5J,MAAMyM,GAE3CvB,IAAIsB,GAAOL,WAAW,GAAGnM,MAAQ,QAIvCoJ,oBAAqB,SAASsD,EAAQC,OAChClN,EAASa,KAAKb,OAAOmN,uBAErB5D,EAAO0D,OACJ,IAAI1G,KAAK0G,gBACR1D,EAAOvJ,EAAOD,WAAWwG,MAC3BvG,EAAOD,WAAWwG,GAAGnG,MAAQ6M,EAAO1G,QAItClE,EAAO,CACTC,MAAOtC,EAAOqB,MACdrB,OAAQA,EACRiB,UAAWjB,EAAOiB,WAAa,OAG5BoB,EAAKpB,UAAU2K,gBAClBvJ,EAAKpB,UAAU2K,cAAgB,UAG5BvJ,EAAKpB,UAAU2F,QACd/F,KAAKuM,cAAcpN,GACrBqC,EAAKpB,UAAU2F,KAAO,4BACjB,GAAI/F,KAAKU,iBAAiBvB,EAAOC,MACtCoC,EAAKpB,UAAU2F,KAAO,+BACjB,GAAI/F,KAAKoI,cAAcjJ,EAAOC,MACnCoC,EAAKpB,UAAU2F,KAAO,4BACjB,GAAI/F,KAAKS,eAAetB,EAAOC,MACpCoC,EAAKpB,UAAU2F,KAAO,6BACjB,GAAI/F,KAAKgB,gBAAgB7B,EAAOC,MACrCoC,EAAKpB,UAAU2F,KAAO,6BACjB,CAAA,IAAI/F,KAAKiB,eAAe9B,EAAOC,aAG7B4I,QAAQtI,MAAM,uBAAwBP,EAAOC,MAFpDoC,EAAKpB,UAAU2F,KAAO,4BAMtBmE,EADMlK,KACYmK,OAAO3I,EAAKpB,UAAU2F,KAAM,CAChDtE,MAAOD,EAAKC,MACZtC,OAAQqC,EAAKrC,OACbiL,gBAAiB5I,IAEf6I,EANMrK,KAMYmK,OAAO,sBAAuB,CAClDG,OAAQ,SAAW5E,EAAI,KAErB6E,EATMvK,KASSmK,OAAO,oBAAqB,CAC7CK,KAAM,SACNhK,MAAO,gBAXCR,KAaNyK,OAAOF,EAAU,MAAO,iBAC5BA,EAASG,UAAUC,IAAI,wBACvBT,EAAYQ,UAAUC,IAAI,OAAQ,aAAc,UAEhDC,IAAIP,GAAarL,YAAYkL,GAC7BU,IAAIP,GAAarL,YAAYuL,OAEzBM,EApBM7K,KAoBSE,EAAE4J,KAAKC,SAASrE,GAE/BmF,EACFD,IAvBQ5K,KAuBAE,EAAE4J,MAAMgB,aAAaT,EAAaQ,GAE1CD,IAzBQ5K,KAyBAE,EAAE4J,MAAM9K,YAAYqL,GAzBpBrK,KA2BNyK,OACFP,EACA1I,EAAKpB,UAAU2K,cAAcC,QAAQ,WAAY,OAAOC,cACtD,WACF,gCAGG3C,kBAAkBpC,KAAK1E,IAE9BgL,WAAY,eACNrN,EAASa,KAAKb,OAAOmN,MACrB9K,EAAO,CACTC,MAAOtC,EAAOqB,MACdrB,OAAQA,EACRiB,UAAWjB,EAAOiB,WAAa,OAG5BoB,EAAKpB,UAAU2K,gBAClBvJ,EAAKpB,UAAU2K,cAAgB,UAG5BvJ,EAAKpB,UAAU2F,QACd/F,KAAKuM,cAAcpN,GACrBqC,EAAKpB,UAAU2F,KAAO,4BACjB,GAAI/F,KAAKU,iBAAiBvB,EAAOC,MACtCoC,EAAKpB,UAAU2F,KAAO,+BACjB,GAAI/F,KAAKoI,cAAcjJ,EAAOC,MACnCoC,EAAKpB,UAAU2F,KAAO,4BACjB,GAAI/F,KAAKS,eAAetB,EAAOC,MACpCoC,EAAKpB,UAAU2F,KAAO,6BACjB,GAAI/F,KAAKgB,gBAAgB7B,EAAOC,MACrCoC,EAAKpB,UAAU2F,KAAO,6BACjB,CAAA,IAAI/F,KAAKiB,eAAe9B,EAAOC,aAG7B4I,QAAQtI,MAAM,uBAAwBP,EAAOC,MAFpDoC,EAAKpB,UAAU2F,KAAO,6BAKrBG,KAAK,oBAAqB1E,IAEjCiL,cAAe,SAAS1H,OAClBvD,EAAOoJ,IAAI7F,GAAG2H,YAAYC,gBAAgBvC,gBAC1CV,EAAQ1J,KAAKsI,kBAAkBvH,QAAQS,QACtCsF,OAAO,oBAAqB4C,EAAO,IAE1CwB,WAAY,SAAS0B,UACZ1E,KAAK2E,MAAM3E,KAAKC,UAAUyE,KAEnCnM,eAAgB,SAASrB,UAErBY,KAAKU,iBAAiBtB,IACtBY,KAAKW,gBAAgBvB,IACrBY,KAAKY,gBAAgBxB,IACrBY,KAAKoI,cAAchJ,IAGvBgJ,cAAe,SAAShJ,UAClByB,MAAMC,QAAQ1B,IACiB,IAA1BA,EAAK2B,QAAQ,QAEJ,SAAT3B,GAGXsB,iBAAkB,SAAStB,UACrByB,MAAMC,QAAQ1B,IACoB,IAA7BA,EAAK2B,QAAQ,WAEJ,YAAT3B,GAGXmN,cAAe,SAASpN,WACbA,EAAOmC,MAElBX,gBAAiB,SAASvB,UACpByB,MAAMC,QAAQ1B,IACmB,IAA5BA,EAAK2B,QAAQ,YAAiD,IAA7B3B,EAAK2B,QAAQ,WAErC,WAAT3B,GAA8B,YAATA,GAGhCwB,gBAAiB,SAASxB,UACpByB,MAAMC,QAAQ1B,IACmB,IAA5BA,EAAK2B,QAAQ,UAEJ,WAAT3B,GAGX4B,gBAAiB,SAAS5B,SACR,WAATA,GAET6B,eAAgB,SAAS7B,SACP,UAATA,SC5ePV,EAAsBC,SAASC,cAAc,SAC7BC,aAAa,QAAS,oBAEtBC,ysBAqCpBH,SAASI,KAAKC,YAAYN,aAkRlB,CACNO,GAAI,yBACJiC,UAAW,CAACU,uBACZ1C,WAAY,CACV2C,SAAU,CACRtC,MAAO,MAETuC,UAAW,CACTvC,MAAO,iBACE,KAGXJ,OAAQ,CACNC,KAAMC,OACNC,SAAU,kBAEZmC,MAAO,CACLrC,KAAMQ,QAERL,MAAO,CACLH,KAAMC,OACNI,QAAQ,EACRF,MAAO,iBACE,KAGXG,MAAO,CACLN,KAAMC,OACNC,SAAU,iBAEZwN,OAAQ,CACN1N,KAAMI,QACNC,QAAQ,IAGZK,SAAU,gBACHkJ,cAEP+D,uBAAwB,eAClBzD,EAAMtJ,UAELgN,kBAAoB3N,OAAOgB,KAAKL,KAAKb,OAAOD,YAAc,IAAIgK,IACjE,SAAS+D,OACH9N,EAASmK,EAAInK,OAAOD,WAAW+N,GAC/BC,EAAW,CACbA,SAAUD,EACVxL,MAAOtC,EAAOqB,OAASyM,EACvB9N,OAAQA,EACRiB,UAAWjB,EAAOiB,WAAa,OAG5B8M,EAAS9M,UAAU2K,gBACtBmC,EAAS9M,UAAU2K,cAAgB,SAEhCmC,EAAS9M,UAAU+M,OACtBD,EAAS9M,UAAU+M,KAAO,IAGxB7D,EAAIiD,cAAcpN,GACpB+N,EAAS9M,UAAU2F,KACjBmH,EAAS9M,UAAU2F,MAAQ,qCACzB2C,EAAOvJ,EAAOI,SAChBJ,EAAOI,MAAQ,IAEjB2N,EAAS3N,MAAQJ,EAAOI,WACnB,GAAI+J,EAAI5I,iBAAiBvB,EAAOC,MACrC8N,EAAS9M,UAAU2F,KACjBmH,EAAS9M,UAAU2F,MAAQ,wCACzB2C,EAAOvJ,EAAOI,SAChBJ,EAAOI,OAAQ,GAEjB2N,EAAS3N,MAAQJ,EAAOI,WACnB,GAAI+J,EAAIlB,cAAcjJ,EAAOC,MAClC8N,EAAS9M,UAAU2F,KACjBmH,EAAS9M,UAAU2F,MAAQ,qCACzB2C,EAAOvJ,EAAOI,SAChBJ,EAAOI,MAAQ,IAEjB2N,EAAS3N,MAAQJ,EAAOI,WACnB,GAAI+J,EAAI7I,eAAetB,EAAOC,MACnC8N,EAAS9M,UAAU2F,KACjBmH,EAAS9M,UAAU2F,MAAQ,sCACzB2C,EAAOvJ,EAAOI,SAChBJ,EAAOI,MAAQ,IAEjB2N,EAAS3N,MAAQJ,EAAOI,WACnB,GAAI+J,EAAItI,gBAAgB7B,EAAOC,MACpC8N,EAAS9M,UAAU2F,KACjBmH,EAAS9M,UAAU2F,MAAQ,uCACzB2C,EAAOvJ,EAAOI,SAChBJ,EAAOI,MAAQ,IAEjB2N,EAAS3N,MAAQJ,EAAOI,UACnB,CAAA,IAAI+J,EAAIrI,eAAe9B,EAAOC,aAQ5B4I,QAAQtI,MAAM,2BAA4BP,EAAOC,MAPxD8N,EAAS9M,UAAU2F,KACjBmH,EAAS9M,UAAU2F,MAAQ,sCACzB2C,EAAOvJ,EAAOI,SAChBJ,EAAOI,MAAQ,IAEjB2N,EAAS3N,MAAQJ,EAAOI,aAKnB2N,KAIbE,uBAAwB,SAAS7H,EAAO6D,OAClCA,EAAOiC,OAAQ,YAAYC,KAAKlC,EAAOiC,WAIvC/B,EAAMtJ,KACNkN,EAAW3H,EAAMrC,OAAOmK,eACxBhC,EAAO,CAAC,QAAS6B,EAASA,aAE1B9D,EAAOiC,MAAQ,aAAaC,KAAKlC,EAAOiC,MAAO,SAC7CiC,EAAQlE,EAAOiC,KAAKG,MAAM,KAAKC,MAAM,GAAI,GACtC6B,EAAM7H,QACX4F,EAAKnF,KAAKoH,EAAMC,SACZL,EAASM,QAAUN,EAASM,OAAOnC,EAAKK,KAAK,QAC/CL,EAAO6B,EAASM,OAAOnC,EAAKK,KAAK,MAAMF,MAAM,MAI7CpC,EAAO7J,MAAMgK,YACX2D,EAASM,QACXpE,EAAO7J,MAAMgK,WAAWjJ,QAAQ,SAASwG,GACvCA,EAAO6C,QAAQrJ,QAAQ,SAASmN,UACvBP,EAASM,OAAOnC,EAAKE,OAAO,CAACkC,IAAI/B,KAAK,UAMjDtC,EAAO7J,OACT6J,EAAO7J,MAAMiK,aAAalJ,QAAQ,SAASwG,OACrC2C,EAAO,CAAC4B,EAAKK,KAAK,KAAM5E,EAAO4C,MAAO5C,EAAO6C,QAAQlE,WACrDqB,EAAOkD,eACJ,IAAItE,EAAI,EAAGkE,EAAK9C,EAAOkD,WAAYtE,EAAIkE,EAAIlE,IAC1CoB,EAAO4G,WAAa5G,EAAO4G,UAAUhI,KACvCwH,EAASM,OAASN,EAASM,QAAU,GACrCN,EAASM,OACPnC,EAAKE,OAAO,CAACzE,EAAO4G,UAAUhI,KAAKgG,KAAK,MACtCL,EAAKE,OAAO,CAAC7F,EAAIoB,EAAO4C,QAAQgC,KAAK,MAE3CjC,EAAKvD,KAAKoD,EAAI4B,WAAWpE,EAAOmD,OAAOvE,EAAIoB,EAAO4C,SAGtDJ,EAAIxC,OAAOqE,MAAM7B,EAAKG,UAGrB,GAAIL,EAAOiC,KAAM,CAClBiC,EAAQlE,EAAOiC,KAAKG,MAAM,KAAKC,MAAM,OACjCzL,KAAKT,MACNsI,eAAeqF,EAASA,gBACxB7I,IAAI,SAAW6I,EAASA,SAAU,IAElCI,EAAM7H,QAAQ,KACfgI,EAAIH,EAAMC,QACdlC,EAAKnF,KAAKuH,GACNP,EAASM,QAAUN,EAASM,OAAOnC,EAAKK,KAAK,QAC/CL,EAAO6B,EAASM,OAAOnC,EAAKK,KAAK,MAAMF,MAAM,WAG5CnH,IAAIgH,EAAKK,KAAK,KAAM1L,KAAKkL,WAAW9B,EAAO7J,aAEhD2N,EAAS3N,MAAQ6J,EAAO7J,WACnB8E,IAAIgH,EAAMrL,KAAKkL,WAAW9B,EAAO7J,UAG1C0J,UAAW,eACLK,EAAMtJ,KACNT,EAAQ,QACPyN,kBAAkB1M,QAAQ,SAAS4M,iBAClCxE,EAAOwE,EAAS3N,SAClBA,EAAM2N,EAASA,UAAY5D,EAAI4B,WAAWgC,EAAS3N,eAGlDA,MAAQA,GAEfoO,WAAY,sBACNrE,EAAMtJ,UACLgN,kBAAkB1M,QAAQ,SAAA4M,OACzBvB,EAAKrC,EAAIa,OAAO+C,EAAS9M,UAAU2F,KAAM,CAC3CtE,MAAOyL,EAASzL,MAChBtC,OAAQ+N,EAAS/N,OACjBkO,eAAgBH,EAChBrL,SAAU+G,EAAK/G,SACfC,UAAW8G,EAAK9G,gBAOb,IAAI8L,KALTjC,EAAG9M,aAAa,OAAQqO,EAASA,UACjCvB,EAAGkC,UAAY,uBAEflC,EAAGuB,EAAS9M,UAAU2K,eAAiBmC,EAAS3N,MAE/B2N,EAAS9M,UAAUwH,WAClC+D,EAAG9M,aAAa+O,EAAMV,EAAS9M,UAAUwH,WAAWgG,QAGjD,IAAIrN,KAAQ2M,EAAS9M,UAAUlB,WAClCyM,EAAGpL,GAAQ2M,EAAS9M,UAAUlB,WAAWqB,MAE3C+I,EAAImB,OACFkB,EACAuB,EAAS9M,UAAU2K,cAChBC,QAAQ,WAAY,OACpBC,cAAgB,WACnB,0BAEFL,MAAItB,EAAIpJ,EAAE4J,MAAM9K,YAAY2M,GAEG,IAA3BuB,EAAS9M,UAAU+M,KAAY,KAC7BW,EAAOnP,SAASC,cAAc,YAClCkP,EAAKhP,UAAYoO,EAAS9M,UAAU+M,KACpCvC,MAAIe,GAAI3M,YAAY8O,EAAKC,aAI/BC,kBAAmB,SAASrC,iBACtBjD,EAAOiD,EAAG0B,sBACPvB,SACHH,EACAA,EAAG0B,eAAejN,UAAU2K,cACzBC,QAAQ,WAAY,OACpBC,cAAgB,WACnB,0BAGJU,EAAG0B,eAAiB,KACpBzC,MAAI5K,KAAKE,EAAE4J,MAAMkC,YAAYL,IAE/B3C,WAAY,mBACNiD,EAASrB,MAAI5K,KAAKE,EAAE4J,MACjBmC,EAAOF,iBACPiC,kBAAkB/B,EAAOF,aAGlChM,eAAgB,gBACTiJ,kBACA+D,8BACAY,kBACA1E,aAEPvH,cAAe,eACT4H,EAAMtJ,KACV4K,MAAI5K,KAAKE,EAAE4J,MAAM+B,WAAWvL,QAAQ,SAASqL,OACvC5F,EAAO4F,EAAGsC,aAAa,QACvB3E,EAAI5J,OAAS4J,EAAI5J,MAAMqG,GACzB4F,EAAGjM,MAAQ4J,EAAI5J,MAAMqG,GAErB4F,EAAGjM,MAAQ,QAIjBwL,WAAY,SAAS0B,UACZ1E,KAAK2E,MAAM3E,KAAKC,UAAUyE,KAEnCnM,eAAgB,SAASrB,UAErBY,KAAKU,iBAAiBtB,IACtBY,KAAKW,gBAAgBvB,IACrBY,KAAKY,gBAAgBxB,IACrBY,KAAKoI,cAAchJ,IAGvBgJ,cAAe,SAAShJ,UAClByB,MAAMC,QAAQ1B,IACiB,IAA1BA,EAAK2B,QAAQ,QAEJ,SAAT3B,GAGXsB,iBAAkB,SAAStB,UACrByB,MAAMC,QAAQ1B,IACoB,IAA7BA,EAAK2B,QAAQ,WAEJ,YAAT3B,GAGXmN,cAAe,SAASpN,WACbA,EAAOmC,MAElBX,gBAAiB,SAASvB,UACpByB,MAAMC,QAAQ1B,IACmB,IAA5BA,EAAK2B,QAAQ,YAAiD,IAA7B3B,EAAK2B,QAAQ,WAErC,WAAT3B,GAA8B,YAATA,GAGhCwB,gBAAiB,SAASxB,UACpByB,MAAMC,QAAQ1B,IACmB,IAA5BA,EAAK2B,QAAQ,UAEJ,WAAT3B,GAGX4B,gBAAiB,SAAS5B,SACR,WAATA,GAET6B,eAAgB,SAAS7B,SACP,UAATA,SC/lBPV,EAAsBC,SAASC,cAAc,SAC7BC,aAAa,QAAS,oBAEtBC,1u6DAsEpBH,SAASI,KAAKC,YAAYN,aAkRlB,CACNO,GAAI,yBACJiC,UAAW,CAACU,uBAEZ1C,WAAY,CACV2C,SAAU,CACRzC,KAAMQ,OACNH,QAAQ,GAEVqC,UAAW,CACT1C,KAAMC,OACNI,QAAQ,GAEVN,OAAQ,CACNC,KAAMC,OACNC,SAAU,kBAEZmC,MAAO,CACLrC,KAAMQ,QAERL,MAAO,CACLH,KAAMC,OACNI,QAAQ,EACRF,MAAO,iBACE,KAGX2O,KAAM,CACJ9O,KAAMQ,OACNH,QAAQ,EACRH,SAAU,gBAEZ6O,MAAO,CACL/O,KAAMyB,MACNpB,QAAQ,EACRF,MAAO,IAETG,MAAO,CACLN,KAAMC,OACNC,SAAU,iBAEZ8O,SAAU,CACRhP,KAAMI,QACND,OAAO,EACPE,QAAQ,GAEV4O,UAAW,CACTjP,KAAMI,QACNC,QAAQ,GAEV6O,QAAS,CACPlP,KAAMI,QACNC,QAAQ,GAEV8O,QAAS,CACPnP,KAAMI,QACNC,QAAQ,GAEV+O,OAAQ,CACNpP,KAAMyB,MACNpB,QAAQ,EACRF,MAAO,IAETiB,MAAO,CACLpB,KAAMQ,OACNL,MAAO,GACPE,QAAQ,IAGZK,SAAU,gBACHkJ,cAEP+D,uBAAwB,eAClBzD,EAAMtJ,UAELgN,kBAAoB3N,OAAOgB,KAAKL,KAAKb,OAAOD,YAAc,IAAIgK,IACjE,SAAS+D,OACH9N,EAASmK,EAAInK,OAAOD,WAAW+N,GAC/BC,EAAW,CACbA,SAAUD,EACVxL,MAAOtC,EAAOqB,OAASyM,EACvB9N,OAAQA,EACRiB,UAAWjB,EAAOiB,WAAa,OAG5B8M,EAAS9M,UAAU2K,gBACtBmC,EAAS9M,UAAU2K,cAAgB,SAGjCzB,EAAIiD,cAAcpN,GACpB+N,EAAS9M,UAAU2F,KACjBmH,EAAS9M,UAAU2F,MAAQ,uBAC7BmH,EAAS3N,MAAQ,QACZ,GAAI+J,EAAI5I,iBAAiBvB,EAAOC,MACrC8N,EAAS9M,UAAU2F,KACjBmH,EAAS9M,UAAU2F,MAAQ,0BAC7BmH,EAAS3N,OAAQ,OACZ,GAAI+J,EAAIlB,cAAcjJ,EAAOC,MAClC8N,EAAS9M,UAAU2F,KACjBmH,EAAS9M,UAAU2F,MAAQ,uBAC7BmH,EAAS3N,MAAQ,QACZ,GAAI+J,EAAI7I,eAAetB,EAAOC,MACnC8N,EAAS9M,UAAU2F,KACjBmH,EAAS9M,UAAU2F,MAAQ,wBAC7BmH,EAAS3N,MAAQ,QACZ,GAAI+J,EAAItI,gBAAgB7B,EAAOC,MACpC8N,EAAS9M,UAAU2F,KACjBmH,EAAS9M,UAAU2F,MAAQ,yBAC7BmH,EAAS9M,UAAU0M,QAAS,EAC5BI,EAAS3N,MAAQ,OACZ,CAAA,IAAI+J,EAAIrI,eAAe9B,EAAOC,aAK5B4I,QAAQtI,MAAM,2BAA4BP,EAAOC,MAJxD8N,EAAS9M,UAAU2F,KACjBmH,EAAS9M,UAAU2F,MAAQ,wBAC7BmH,EAAS3N,MAAQ,UAInB+J,EAAIpD,KAAK,QAAS+G,GAClB3D,EAAIpD,KAAK,SAAU/G,EAAOqB,OAEnB0M,KAIbE,uBAAwB,SAAS7H,EAAO6D,OAClCA,EAAOiC,OAAQ,YAAYC,KAAKlC,EAAOiC,WAIvC/B,EAAMtJ,KACNkN,EAAW3H,EAAMrC,OAAOmK,eACxBhC,EAAO,CAAC,QAAS6B,EAASA,aAE1B9D,EAAOiC,MAAQ,aAAaC,KAAKlC,EAAOiC,MAAO,SAC7CiC,EAAQlE,EAAOiC,KAAKG,MAAM,KAAKC,MAAM,GAAI,GACtC6B,EAAM7H,QACX4F,EAAKnF,KAAKoH,EAAMC,SACZL,EAASM,QAAUN,EAASM,OAAOnC,EAAKK,KAAK,QAC/CL,EAAO6B,EAASM,OAAOnC,EAAKK,KAAK,MAAMF,MAAM,MAI7CpC,EAAO7J,MAAMgK,YACX2D,EAASM,QACXpE,EAAO7J,MAAMgK,WAAWjJ,QAAQ,SAASwG,GACvCA,EAAO6C,QAAQrJ,QAAQ,SAASmN,UACvBP,EAASM,OAAOnC,EAAKE,OAAO,CAACkC,IAAI/B,KAAK,UAMrDtC,EAAO7J,MAAMiK,aAAalJ,QAAQ,SAASwG,OACrC2C,EAAO,CAAC4B,EAAKK,KAAK,KAAM5E,EAAO4C,MAAO5C,EAAO6C,QAAQlE,WACrDqB,EAAOkD,eACJ,IAAItE,EAAI,EAAGkE,EAAK9C,EAAOkD,WAAYtE,EAAIkE,EAAIlE,IAC1CoB,EAAO4G,WAAa5G,EAAO4G,UAAUhI,KACvCwH,EAASM,OAASN,EAASM,QAAU,GACrCN,EAASM,OACPnC,EAAKE,OAAO,CAACzE,EAAO4G,UAAUhI,KAAKgG,KAAK,MACtCL,EAAKE,OAAO,CAAC7F,EAAIoB,EAAO4C,QAAQgC,KAAK,MAE3CjC,EAAKvD,KAAKoD,EAAI4B,WAAWpE,EAAOmD,OAAOvE,EAAIoB,EAAO4C,SAGtDJ,EAAIxC,OAAOqE,MAAM7B,EAAKG,UAEnB,GAAIL,EAAOiC,KAAM,CAClBiC,EAAQlE,EAAOiC,KAAKG,MAAM,KAAKC,MAAM,OACjCzL,KAAKT,MACNsI,eAAeqF,EAASA,gBACxB7I,IAAI,SAAW6I,EAASA,SAAU,IAElCI,EAAM7H,QAAQ,KACfgI,EAAIH,EAAMC,QACdlC,EAAKnF,KAAKuH,GACNP,EAASM,QAAUN,EAASM,OAAOnC,EAAKK,KAAK,QAC/CL,EAAO6B,EAASM,OAAOnC,EAAKK,KAAK,MAAMF,MAAM,WAG5CnH,IAAIgH,EAAKK,KAAK,KAAM1L,KAAKkL,WAAW9B,EAAO7J,QAEhDyI,QAAQC,IAAI,UAAYC,KAAKC,UAAUnI,KAAKT,WAGhD0J,UAAW,eACLK,EAAMtJ,KACNT,EAAQ,QACPyN,kBAAkB1M,QAAQ,SAAS4M,GACtC3N,EAAM2N,EAASA,UAAY5D,EAAI4B,WAAWgC,EAAS3N,cAEhDA,MAAQA,GAEfoO,WAAY,sBACNrE,EAAMtJ,UACLgN,kBAAkB1M,QAAQ,SAAA4M,OACzBvB,EAAKrC,EAAIa,OAAO+C,EAAS9M,UAAU2F,KAAM,CAC3CtE,MAAOyL,EAASzL,MAChBtC,OAAQ+N,EAAS/N,OACjBkO,eAAgBH,EAChBrL,SAAU+G,EAAK/G,SACfC,UAAW8G,EAAK9G,YAGlB6J,EAAG9M,aAAa,OAAQqO,EAASA,UACjCvB,EAAGkC,UAAY,uBAEfX,EAAS3N,MAAQoM,EAAGuB,EAAS9M,UAAU2K,eACvCzB,EAAImB,OACFkB,EACAuB,EAAS9M,UAAU2K,cAChBC,QAAQ,WAAY,OACpBC,cAAgB,WACnB,0BAEFL,MAAItB,EAAIpJ,EAAE4J,MAAM9K,YAAY2M,MAGhCqC,kBAAmB,SAASrC,iBACtBjD,EAAOiD,EAAG0B,sBACPvB,SACHH,EACAA,EAAG0B,eAAejN,UAAU2K,cACzBC,QAAQ,WAAY,OACpBC,cAAgB,WACnB,0BAGJU,EAAG0B,eAAiB,KACpBzC,MAAI5K,KAAKE,EAAE4J,MAAMkC,YAAYL,IAE/B3C,WAAY,mBACNiD,EAASrB,MAAI5K,KAAKE,EAAE4J,MACjBmC,EAAOF,iBACPiC,kBAAkB/B,EAAOF,aAGlChM,eAAgB,gBACTiJ,kBACA+D,8BACAY,kBACA1E,YACDjJ,KAAKmO,MAAM1I,OAAS,QACjBpB,IAAI,OAAQrE,KAAKmO,MAAM,SAEzB9J,IAAI,QAASrE,KAAKwO,OAAO,KAEhCC,KAAM,eACAC,EAAU1O,KAAKmO,MAAMpN,QAAQf,KAAKkO,MAClCO,EAAOC,GACM,IAAbA,GACEA,EAAU1O,KAAKmO,MAAM1I,OAAS,IAChCgJ,EAAOC,EAAU,QAEdrK,IAAI,OAAQrE,KAAKmO,MAAMM,SACvBpK,IAAI,QAASrE,KAAKwO,OAAOC,KAE9BzG,QAAQC,IAAI,mCAGhB0G,KAAM,eACAD,EAAU1O,KAAKmO,MAAMpN,QAAQf,KAAKkO,MAClCS,EAAOD,GACM,IAAbA,GACEA,EAAU,IACZC,EAAOD,EAAU,QAEdrK,IAAI,OAAQrE,KAAKmO,MAAMQ,SACvBtK,IAAI,QAASrE,KAAKwO,OAAOG,KAE9B3G,QAAQC,IAAI,mCAGhB2G,OAAQ,gBACDtH,KAAK,WAEZuH,aAAc,eACRH,EAAU1O,KAAKmO,MAAMpN,QAAQf,KAAKkO,MACtB,IAAZQ,OACGrK,IAAI,WAAW,QAEfA,IAAI,WAAW,GAElBqK,IAAY1O,KAAKmO,MAAM1I,OAAS,OAC7BpB,IAAI,WAAW,QAEfA,IAAI,WAAW,IAGxB3C,cAAe,eACT4H,EAAMtJ,KACV4K,MAAI5K,KAAKE,EAAE4J,MAAM+B,WAAWvL,QAAQ,SAASqL,OACvC5F,EAAO4F,EAAGsC,aAAa,QACvB3E,EAAI5J,OAAS4J,EAAI5J,MAAMqG,GACzB4F,EAAGjM,MAAQ4J,EAAI5J,MAAMqG,GAErB4F,EAAGjM,MAAQ,QAIjBwL,WAAY,SAAS0B,UACZ1E,KAAK2E,MAAM3E,KAAKC,UAAUyE,KAEnCnM,eAAgB,SAASrB,UAErBY,KAAKU,iBAAiBtB,IACtBY,KAAKW,gBAAgBvB,IACrBY,KAAKY,gBAAgBxB,IACrBY,KAAKoI,cAAchJ,IAGvBgJ,cAAe,SAAShJ,UAClByB,MAAMC,QAAQ1B,IACiB,IAA1BA,EAAK2B,QAAQ,QAEJ,SAAT3B,GAGXsB,iBAAkB,SAAStB,UACrByB,MAAMC,QAAQ1B,IACoB,IAA7BA,EAAK2B,QAAQ,WAEJ,YAAT3B,GAGXmN,cAAe,SAASpN,WACbA,EAAOmC,MAElBX,gBAAiB,SAASvB,UACpByB,MAAMC,QAAQ1B,IACmB,IAA5BA,EAAK2B,QAAQ,YAAiD,IAA7B3B,EAAK2B,QAAQ,WAErC,WAAT3B,GAA8B,YAATA,GAGhCwB,gBAAiB,SAASxB,UACpByB,MAAMC,QAAQ1B,IACmB,IAA5BA,EAAK2B,QAAQ,UAEJ,WAAT3B,GAGX4B,gBAAiB,SAAS5B,SACR,WAATA,GAET6B,eAAgB,SAAS7B,SACP,UAATA"}