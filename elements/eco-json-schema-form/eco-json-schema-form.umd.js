!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@polymer/polymer/polymer-legacy.js"),require("@polymer/iron-flex-layout/iron-flex-layout-classes.js"),require("@polymer/paper-checkbox/paper-checkbox.js"),require("@polymer/paper-dropdown-menu/paper-dropdown-menu.js"),require("@polymer/paper-item/paper-item.js"),require("@polymer/paper-listbox/paper-listbox.js"),require("@polymer/iron-validatable-behavior/iron-validatable-behavior.js"),require("@polymer/app-localize-behavior/app-localize-behavior.js"),require("@polymer/paper-input/paper-input.js"),require("@polymer/paper-styles/typography.js"),require("@polymer/polymer/lib/utils/async.js"),require("@polymer/paper-button/paper-button.js"),require("@polymer/iron-icon/iron-icon.js"),require("@polymer/iron-icons/iron-icons.js"),require("@polymer/iron-icons/editor-icons.js"),require("@polymer/paper-icon-button/paper-icon-button.js"),require("paper-collapse-item/paper-collapse-item.js"),require("paper-collapse-item/paper-collapse-group.js"),require("@polymer/polymer/lib/legacy/polymer.dom.js"),require("@polymer/iron-icons/image-icons.js"),require("@polymer/iron-pages/iron-pages.js"),require("@polymer/paper-toolbar/paper-toolbar.js"),require("@polymer/paper-menu-button/paper-menu-button.js"),require("@polymer/paper-ripple/paper-ripple.js")):"function"==typeof define&&define.amd?define(["@polymer/polymer/polymer-legacy.js","@polymer/iron-flex-layout/iron-flex-layout-classes.js","@polymer/paper-checkbox/paper-checkbox.js","@polymer/paper-dropdown-menu/paper-dropdown-menu.js","@polymer/paper-item/paper-item.js","@polymer/paper-listbox/paper-listbox.js","@polymer/iron-validatable-behavior/iron-validatable-behavior.js","@polymer/app-localize-behavior/app-localize-behavior.js","@polymer/paper-input/paper-input.js","@polymer/paper-styles/typography.js","@polymer/polymer/lib/utils/async.js","@polymer/paper-button/paper-button.js","@polymer/iron-icon/iron-icon.js","@polymer/iron-icons/iron-icons.js","@polymer/iron-icons/editor-icons.js","@polymer/paper-icon-button/paper-icon-button.js","paper-collapse-item/paper-collapse-item.js","paper-collapse-item/paper-collapse-group.js","@polymer/polymer/lib/legacy/polymer.dom.js","@polymer/iron-icons/image-icons.js","@polymer/iron-pages/iron-pages.js","@polymer/paper-toolbar/paper-toolbar.js","@polymer/paper-menu-button/paper-menu-button.js","@polymer/paper-ripple/paper-ripple.js"],t):t(e.polymerLegacy_js,null,null,null,null,null,e.ironValidatableBehavior_js,e.appLocalizeBehavior_js,null,null,e.async,null,null,null,null,null,null,null,e.polymer_dom_js)}(this,function(e,t,n,r,o,a,i,s,l,p,c,m,u,h,d,f,y,v,b){"use strict";function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=document.createElement("div");_.setAttribute("style","display: none;"),_.innerHTML='<dom-module id="eco-json-schema-boolean">\n\n  \n\n  <template>\n    <style is="custom-style" include="iron-flex iron-flex-alignment">\n      paper-checkbox {\n        color: #737373;\n        padding: 2px;\n        display: block;\n        font-size: 16px;\n        white-space: normal;\n    }\n    </style>\n\n    <paper-checkbox id="checkbox" class="flex" checked="{{value}}" invalid="[[error]]">[[_label]]</paper-checkbox>\n\n  </template>\n\n  \n\n</dom-module>',document.head.appendChild(_),e.Polymer({is:"eco-json-schema-boolean",properties:{schema:{type:Object,observer:"_schemaChanged"},value:{type:Boolean,notify:!0,value:!1},error:{type:Boolean,value:!1},_label:{type:String,notify:!0,value:""}},ready:function(){},detached:function(){},_schemaChanged:function(){var e=this.schema,t=this.$.checkbox;e.component&&e.component.properties&&Object.keys(e.component.properties).forEach(function(n){t[n]=e.component.properties[n]}),e.title&&(this._label=e.title)},_isSchemaValue:function(e){return this._isSchemaBoolean(e)||this._isSchemaNumber(e)||this._isSchemaString(e)},_isSchemaBoolean:function(e){return Array.isArray(e)?-1!==e.indexOf("boolean"):"boolean"===e},_isSchemaNumber:function(e){return Array.isArray(e)?-1!==e.indexOf("number")||-1!==e.indexOf("integer"):"number"===e||"integer"===e},_isSchemaString:function(e){return Array.isArray(e)?-1!==e.indexOf("string"):"string"===e},_isSchemaObject:function(e){return"object"===e},_isSchemaArray:function(e){return"array"===e}});var x=document.createElement("div");x.setAttribute("style","display: none;"),x.innerHTML='<dom-module id="eco-json-schema-enum">\n\n  \n  \n  \n  \n\n  <template>\n    <style is="custom-style" include="iron-flex iron-flex-alignment">\n      paper-input {\n        --paper-input-container-label: {\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #212121;\n        }\n      };\n\n      paper-dropdown-menu {\n        --paper-input-container-label: {\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #212121;\n        }\n        --paper-dropdown-menu-button: {\n          padding: 2px;\n        }\n      }\n    </style>\n\n    <paper-dropdown-menu id="dropdown" class="layout horizontal vertical" value="{{value}}" required="">\n      <paper-dropdown-menu class="dropdown-content">\n        <paper-listbox slot="dropdown-content" selected="0">\n        <template is="dom-repeat" items="[[_items]]">\n          <paper-item class="flex" label="[[item]]">[[item]]</paper-item>\n        </template>\n        </paper-listbox>\n      </paper-dropdown-menu>\n    </paper-dropdown-menu>\n\n  </template>\n\n  \n\n</dom-module>',document.head.appendChild(x),e.Polymer({is:"eco-json-schema-enum",behaviors:[i.IronValidatableBehavior],properties:{schema:{type:Object,observer:"_schemaChanged"},value:{type:String,notify:!0,value:null},error:{type:String,observer:"_errorChanged",value:null},_items:{type:Object,value:function(){return{}}}},ready:function(){},detached:function(){},_schemaChanged:function(){var e=this.schema,t=this.$.dropdown;e.component&&e.component.properties&&Object.keys(e.component.properties).forEach(function(n){t[n]=e.component.properties[n]}),this._items=e.enum.filter(function(e){return null!==e}),e.title&&(t.label=e.title)},_errorChanged:function(){this.error?this.$.dropdown.invalid=!0:this.$.dropdown.invalid=!1},_isSchemaValue:function(e){return this._isSchemaBoolean(e)||this._isSchemaNumber(e)||this._isSchemaString(e)},_isSchemaBoolean:function(e){return Array.isArray(e)?-1!==e.indexOf("boolean"):"boolean"===e},_isSchemaNumber:function(e){return Array.isArray(e)?-1!==e.indexOf("number")||-1!==e.indexOf("integer"):"number"===e||"integer"===e},_isSchemaString:function(e){return Array.isArray(e)?-1!==e.indexOf("string"):"string"===e},_isSchemaObject:function(e){return"object"===e},_isSchemaArray:function(e){return"array"===e}});var S=document.createElement("div");S.setAttribute("style","display: none;"),S.innerHTML='<dom-module id="eco-json-schema-input">\n\n  \n  \n\n  <template>\n    <style is="custom-style" include="iron-flex iron-flex-alignment">\n      paper-input {\n        padding: 2px;\n\n        --paper-input-container-label: {\n          white-space: normal;\n          position: static;\n          font-size: 16px;\n          color: #212121;\n        }\n      }\n    </style>\n\n    <paper-input id="input" class="flex" value="{{value}}" auto-validate="">\n\n    </paper-input>\n\n  </template>\n\n  \n\n</dom-module>',document.head.appendChild(S),e.Polymer({is:"eco-json-schema-input",behaviors:[s.AppLocalizeBehavior],properties:{language:{value:"en"},resources:{value:function(){return{}}},schema:{type:Object,observer:"_schemaChanged"},value:{type:String,notify:!0,value:function(){return""}},error:{type:String,observer:"_errorChanged",value:null}},ready:function(){},detached:function(){},_schemaChanged:function(){var e=this.schema,t=this.$.input;e.required&&(t.required=!0),this._isSchemaNumber(e.type)&&(t.type="number",e.multipleOf&&(t.step=e.multipleOf),isNaN(e.maximum)||(e.exclusiveMaximum?t.max=e.maximum-(e.multipleOf||1):t.max=e.maximum),isNaN(e.minimum)||(e.exclusiveMinimum?t.min=e.minimum+(e.multipleOf||1):t.min=e.minimum)),this._isSchemaString(e.type)&&("date-time"===e.format?(t.type="datetime-local",t.alwaysFloatLabel=!0):"date"===e.format?t.type="date":"email"===e.format?t.type="email":"hostname"===e.format?t.type="text":"ipv4"===e.format?t.type="text":"ipv6"===e.format?t.type="text":"uri"===e.format?t.type="url":t.type="text",e.maxLength&&(t.maxlength=e.maxLength),e.minLength&&(t.minlength=e.minLength),e.pattern&&(t.pattern=e.pattern)),e.component&&e.component.properties&&Object.keys(e.component.properties).forEach(function(n){t[n]=e.component.properties[n]}),t.alwaysFloatLabel=!0,e.title&&(t.label=e.title)},_errorChanged:function(){this.error?(this.$.input.errorMessage=this.error,this.$.input.invalid=!0):(this.$.input.invalid=!1,this.$.input.errorMessage=null)},_isSchemaValue:function(e){return this._isSchemaBoolean(e)||this._isSchemaNumber(e)||this._isSchemaString(e)},_isSchemaBoolean:function(e){return Array.isArray(e)?-1!==e.indexOf("boolean"):"boolean"===e},_isSchemaNumber:function(e){return Array.isArray(e)?-1!==e.indexOf("number")||-1!==e.indexOf("integer"):"number"===e||"integer"===e},_isSchemaString:function(e){return Array.isArray(e)?-1!==e.indexOf("string"):"string"===e},_isSchemaObject:function(e){return"object"===e},_isSchemaArray:function(e){return"array"===e}});var j=document.createElement("div");j.setAttribute("style","display: none;"),j.innerHTML='<dom-module id="eco-json-schema-file">\n\t\n\t\n\t\n\t\n\n\t<template>\n\t\t<style is="custom-style" include="iron-flex iron-flex-alignment">\n\t\t\tpaper-input {\n\t\t\t\tpadding: 2px;\n\t\t\t\t--paper-input-container-label: {\n\t\t\t\t\twhite-space: normal;\n\t\t\t\t\tposition: static;\n\t\t\t\t\tfont-size: 22px;\n\t\t\t\t\tcolor: #212121;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t:host {\n\t\t\t\tdisplay: inline-block;\n\t\t\t}\n\n\t\t\t.enabled {\n\t\t\t\tborder: 1px dashed #555;\n\t\t\t\t@apply(--file-upload-upload-border-enabled);\n\t\t\t}\n\n\t\t\t.hover {\n\t\t\t\topacity: .7;\n\t\t\t\tborder: 1px dashed #111;\n\t\t\t\t@apply(--file-upload-upload-border-hover);\n\t\t\t}\n\n\t\t\t#UploadBorder {\n\t\t\t\tvertical-align: middle;\n\t\t\t\tcolor: #555;\n\t\t\t\tpadding: 20px;\n\t\t\t\tmax-height: 300px;\n\t\t\t\toverflow-y: auto;\n\t\t\t\tdisplay: inline-block;\n\t\t\t\t@apply(--file-upload-upload-border);\n\t\t\t}\n\n\t\t\t#dropArea {\n\t\t\t\ttext-align: center;\n\t\t\t\t@apply(--file-upload-drop-area);\n\t\t\t}\n\n\t\t\tpaper-button#button {\n\t\t\t\tmargin-bottom: 20px;\n\t\t\t\t@apply(--file-upload-button);\n\t\t\t}\n\n\t\t\t.file {\n\t\t\t\tpadding: 10px 0px;\n\t\t\t\t@apply(--file-upload-file);\n\t\t\t}\n\n\t\t\t.commands {\n\t\t\t\tfloat: right;\n\t\t\t\t@apply(--file-upload-commands);\n\t\t\t}\n\n\t\t\t.commands iron-icon:not([icon="check-circle"]) {\n\t\t\t\tcursor: pointer;\n\t\t\t\topacity: .9;\n\t\t\t\t@apply(--file-upload-commands-faded);\n\t\t\t}\n\n\t\t\t.commands iron-icon:hover {\n\t\t\t\topacity: 1;\n\t\t\t\t@apply(--file-upload-commands-hovered);\n\t\t\t}\n\n\t\t\t[hidden] {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\n\t\t\t.error {\n\t\t\t\tcolor: #f40303;\n\t\t\t\tfont-size: 11px;\n\t\t\t\tmargin-top: 2px;\n\t\t\t\t@apply(--file-upload-error);\n\t\t\t}\n\n\t\t\t.progress-bar {\n\t\t\t\tmargin-top: 2px;\n\t\t\t}\n\n\t\t\tpaper-progress {\n\t\t\t\t--paper-progress-active-color: #03a9f4;\n\t\t\t}\n\n\t\t\tpaper-progress[error] {\n\t\t\t\t--paper-progress-active-color: #f40303;\n\t\t\t}\n\t\t</style>\n\n\t\t<div class="layout horizontal nowrap">\n\t\t\t<div>\n\t\t\t\t<paper-button id="button" on-click="_fileClick" alt="{{paperButtonAlt}}" raised="">\n\t\t\t\t\t<iron-icon icon="editor:attach-file"></iron-icon>{{paperButtonTitle}}</paper-button>\n\t\t\t\t<div id="UploadBorder">\n\t\t\t\t\t<div id="dropArea" hidden$="{{!_shownDropText}}">{{dropText}}</div>\n\t\t\t\t\t<template is="dom-repeat" items="{{files}}">\n\t\t\t\t\t\t<div class="file">\n\t\t\t\t\t\t\t<div class="name"><span>{{item.name}}</span>\n\t\t\t\t\t\t\t\t<div class="commands">\n\t\t\t\t\t\t\t\t\t<iron-icon icon="autorenew" title="{{retryText}}" on-click="_retryUpload" hidden$="{{!item.error}}"></iron-icon>\n\t\t\t\t\t\t\t\t\t<iron-icon icon="cancel" title="{{removeText}}" on-click="_cancelUpload" hidden$="{{item.complete}}"></iron-icon>\n\t\t\t\t\t\t\t\t\t<iron-icon icon="check-circle" title="{{successText}}" hidden$="{{!item.complete}}"></iron-icon>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="error" hidden$="{{!item.error}}">{{errorText}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<input type="file" id="fileInput" on-change="_fileChange" hidden="" multiple="{{multi}}" accept="{{accept}}">\n\t\t</div>\n\n\n\t</template>\n\n\t\n\n</dom-module>',document.head.appendChild(j),e.Polymer({is:"eco-json-schema-file",behaviors:[s.AppLocalizeBehavior],properties:{language:{value:"en",notify:!0},resources:{value:function(){return{}},notify:!0},schema:{type:Object,observer:"_schemaChanged"},value:{type:Object,notify:!0,value:function(){return{}},observer:"_valueChanged"},target:{type:String,value:""},accept:{type:String,value:""},droppable:{type:Boolean,value:!1},dropText:{type:String,value:"Drop Files Here"},multi:{type:Boolean,value:!0},files:{type:Array,notify:!0,value:function(){return[]}},raised:{type:Boolean,value:!0},noink:{type:Boolean,value:!1},headers:{type:Object,value:{}},retryText:{type:String,value:"Retry Upload"},removeText:{type:String,value:"Remove"},successText:{type:String,value:"Success"},errorText:{type:String,value:"Error uploading file..."},_shownDropText:{type:Boolean,value:!1},additional:{type:Object,value:{}},fileDataName:{type:String,value:"file"},paperButtonAlt:{type:String,value:""},paperButtonTitle:{type:String,value:""}},clear:function(){this.set("files",[]),this.$.fileInput.value="",this._showDropText()},ready:function(){this.raised&&this.toggleAttribute("raised",!0,this.$.button),this.noink&&this.toggleAttribute("noink",!0,this.$.button),this.droppable&&(this._showDropText(),this.setupDrop())},setupDrop:function(){var e=this.$.UploadBorder;this.toggleClass("enabled",!0,e),this.ondragover=function(t){t.stopPropagation(),this.toggleClass("hover",!0,e);var n=t.dataTransfer&&t.dataTransfer.dropEffect,r=t.dataTransfer&&t.dataTransfer.effectAllowed;return"none"===n&&"none"!==r&&(t.dataTransfer.dropEffect="move"===r?"move":"copy"),!1},this.ondragleave=function(){return this.toggleClass("hover",!1,e),!1},this.ondrop=function(t){if(this.toggleClass("hover",!1,e),t.preventDefault(),this.multi||0===this.files.length)for(var n=t.dataTransfer.files.length,r=0;r<n;r++){var o=t.dataTransfer.files[r],a=""!==o.type?o.type.match(/^[^\/]*\//)[0]:null,i=o.name.match(/\.[^\.]*$/)[0];(""===this.accept||this.accept.indexOf(a)>-1||this.accept.indexOf(i)>-1)&&(o.progress=0,o.error=!1,o.complete=!1,this.push("files",o),this.uploadFile(o))}}},_fileClick:function(){var e=this.$.fileInput;if(e&&document.createEvent){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),e.dispatchEvent(t)}},_fileChange:function(e){for(var t=e.target.files.length,n=0;n<t;n++){var r=e.target.files[n];r.progress=0,r.error=!1,r.complete=!1,this.push("files",r),this.multi||0===this.files.length||(this.set("files",[]),this.set("value",{})),this.uploadFile(r)}},cancel:function(e){e&&(e.xhr&&e.xhr.abort(),this.splice("files",this.files.indexOf(e),1),this._showDropText())},_cancelUpload:function(e){this.cancel(e.model.__data__.item)},_retryUpload:function(e){e.model.set("item.error",!1),e.model.set("item.progress",0);var t=this;c.microTask.run(function(){t.uploadFile(e.model.__data__.item)})},_showDropText:function(){this.set("_shownDropText",!this.files.length&&this.droppable)},uploadFile:function(e){if(e){this.fire("before-upload"),this._showDropText();this.files.indexOf(e);var t=this,n=new FileReader;n.addEventListener("load",function(){var r=n.result;t.set("value."+t.attributes.name.value+"."+t.files.indexOf(e),r)},!1),t.value.hasOwnProperty(t.attributes.name.value)||this.set("value."+t.attributes.name.value,{}),n.readAsDataURL(e)}},_valueChanged:function(){console.log("this.value: "+JSON.stringify(this.value))},_schemaChanged:function(){this.schema},_isSchemaValue:function(e){return this._isSchemaFile(e)},_isSchemaFile:function(e){return Array.isArray(e)?-1!==e.indexOf("file"):"file"===e},_isSchemaBoolean:function(e){return Array.isArray(e)?-1!==e.indexOf("boolean"):"boolean"===e},_isSchemaNumber:function(e){return Array.isArray(e)?-1!==e.indexOf("number")||-1!==e.indexOf("integer"):"number"===e||"integer"===e},_isSchemaString:function(e){return Array.isArray(e)?-1!==e.indexOf("string"):"string"===e},_isSchemaObject:function(e){return"object"===e},_isSchemaArray:function(e){return"array"===e},stringify:function(e){return JSON.stringify(e)}});var A=document.createElement("div");A.setAttribute("style","display: none;"),A.innerHTML='<dom-module id="eco-json-schema-array">\n\n  \n  \n  \n  \n  \n  \n\n  \n  \n  \n  \n  \n\n  <template>\n    <style is="custom-style" include="iron-flex iron-flex-alignment">\n      paper-input {\n        padding: 2px;\n\n        --paper-input-container-label: {\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #212121;\n        }\n      }\n\n      paper-collapse-item {\n        --paper-collapse-item-header: {\n          font-weight: bold;\n          padding: 8px 0 0 8px;\n        }\n\n        ;\n      }\n\n      #form {\n        border: 1px solid #AAAAAA;\n      }\n\n      #form div:nth-child(odd) {\n        background-color: #F2F2F2;\n        padding: 4px;\n      }\n\n      #form div:nth-child(even) {\n        background-color: #E2E2E2;\n        border-top: 1px solid #AAAAAA;\n        border-bottom: 1px solid #AAAAAA;\n        padding: 4px;\n      }\n\n      #form div:focus,\n      #form div:hover,\n      #form div:active {\n        background-color: #FFFFFF !important;\n      }\n\n      paper-icon-button {\n        float: right;\n        border-radius: 50%;\n      }\n\n      .array-add {\n        color: #34e79a;\n        background-color: #f8f8f8;\n      }\n\n      .array-remove-element {\n        color: #f44336;\n        background-color: #f8f8f8;\n      }\n\n      .label {\n        @apply(--paper-input-container-label);\n        white-space: normal;\n        position: static;\n        font-size: 22px;\n        color: #212121;\n      }\n\n      :host {\n        display: block;\n\n        .label {\n          @apply(--paper-input-container-label);\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #212121;\n        }\n      }\n    </style>\n\n    <div class="horizontal layout">\n      <div class="flex" hidden$="[[!label]]">[[label]]</div>\n      <paper-icon-button id="addarray" title="Add another item" class="array-add" icon="add" on-click="_onAddItem" role="button" aria-label="Add another item"></paper-icon-button>\n    </div>\n\n    <paper-collapse-group id="form" class="vertical flex layout"></paper-collapse-group>\n\n  </template>\n\n  \n\n</dom-module>',document.head.appendChild(A),e.Polymer({is:"eco-json-schema-array",properties:{schema:{type:Object,observer:"_schemaChanged"},label:{type:String},value:{type:Array,notify:!0,value:function(){return[]},observer:"_valueChanged"},error:{type:Object,observer:"_errorChanged"},_schemaArrayItems:{type:Array,notify:!0,value:function(){return[]}}},observers:["_schemaArraySplicesChanged(_schemaArrayItems.splices)"],_valueChanged:function(e,t){var n=this;e!==t&&"undefined"!==g(e)&&"undefined"!==g(this.schema)&&setTimeout(function(){for(var t in n._buildSchemaArrayItems(),e)n._onAddItemWithValue(e[t],parseInt(t))},100)},ready:function(){},detached:function(){this._clearForm()},_buildSchemaArrayItems:function(){this._schemaArrayItems=[]},_setValue:function(){this.value=[],this.value=this._schemaArrayItems.map(function(e){return e.value})},_schemaArraySplicesChanged:function(e){if(!e)return console.warn("detail is undefined");var t=this;e.keySplices&&console.warn("Got keySplices, don't know what to do with them!"),e.indexSplices.forEach(function(e){var n=["value",e.index,e.removed.length];if(e.removed&&e.removed.length)for(var r=e.index,o=e.index+e.removed.length;r<o;r++)t._removeArrayEl(t.$.form.children[r]);if(e.addedCount)for(r=e.index,o=e.index+e.addedCount;r<o;r++){var a=e.object[r],i=t.create(a.component.name,{label:a.label,schema:a.schema,schemaArrayItem:a}),s=t.create("paper-collapse-item",{header:"Item "+(r+1)}),l=t.create("paper-icon-button",{icon:"remove",title:"Remove item"});t.listen(l,"tap","_onRemoveItem"),l.classList.add("array-remove-element"),i.classList.add("flex","horizontal","layout"),dom(s).appendChild(i),dom(s).appendChild(l);var p=t.$.form.children[r];p?dom(t.$.form).insertBefore(s,p):dom(t.$.form).appendChild(s),t.listen(i,a.component.valueProperty.replace(/([A-Z])/g,"-$1").toLowerCase()+"-changed","_schemaArrayItemChanged"),n.push(t._deepClone(i[a.component.valueProperty]))}t.splice.apply(t,n)})},_schemaArrayItemChanged:function(e,t){if(!t.path||!/\.length$/.test(t.path)){var n=this,r=e.target.schemaArrayItem,o=this._schemaArrayItems.indexOf(r),a=["value",o];t.path&&/\.splices$/.test(t.path)?(a=a.concat(t.path.split(".").slice(1,-1)),t.value.keySplices&&console.warn("Got keySplices, don't know what to do with them!"),t.value.indexSplices.forEach(function(e){var t=[a.join("."),e.index,e.removed.length];if(e.addedCount)for(var r=e.index,o=e.index+e.addedCount;r<o;r++)t.push(n._deepClone(e.object[r]));n.splice.apply(n,t)})):t.path?(a=a.concat(t.path.split(".").slice(1)),this.set(a,this._deepClone(t.value))):this.splice("value",o,1,this._deepClone(t.value))}},_removeArrayEl:function(e){var t=dom(e);"undefined"!==g(t.childNodes[0])&&(this.unlisten(t.childNodes[0],t.firstChild.schemaArrayItem.component.valueProperty.replace(/([A-Z])/g,"-$1").toLowerCase()+"-changed","_schemaArrayItemChanged"),"undefined"!==g(t.childNodes[1])&&this.unlisten(t.childNodes[1],"tap","_onRemoveItem")),e.schemaArrayItem=null,dom(this.$.form).removeChild(e)},_clearForm:function(){for(var e=dom(this.$.form);e.firstChild;)this._removeArrayEl(e.firstChild)},_schemaChanged:function(){this._clearForm(),this._buildSchemaArrayItems(),this._setValue()},_errorChanged:function(){var e=this;dom(this.$.form).childNodes.forEach(function(t,n){e.error&&e.error[n]?dom(t).childNodes[0].error=e.error[n]:dom(t).childNodes[0].error=null})},_onAddItemWithValue:function(e,t){var n=this.schema.items;if("undefined"!==g(e))for(var r in e)"undefined"!==g(n.properties[r])&&(n.properties[r].value=e[r]);var o={label:n.title,schema:n,component:n.component||{}};if(o.component.valueProperty||(o.component.valueProperty="value"),!o.component.name)if(this._isSchemaEnum(n))o.component.name="eco-json-schema-enum";else if(this._isSchemaBoolean(n.type))o.component.name="eco-json-schema-boolean";else if(this._isSchemaFile(n.type))o.component.name="eco-json-schema-file";else if(this._isSchemaValue(n.type))o.component.name="eco-json-schema-input";else if(this._isSchemaObject(n.type))o.component.name="eco-json-schema-object";else{if(!this._isSchemaArray(n.type))return console.error("Unknown item type %s",n.type);o.component.name="eco-json-schema-array"}var a=this.create(o.component.name,{label:o.label,schema:o.schema,schemaArrayItem:o}),i=this.create("paper-collapse-item",{header:"Item "+(r+1)}),s=this.create("paper-icon-button",{icon:"remove",title:"Remove item"});this.listen(s,"tap","_onRemoveItem"),s.classList.add("array-remove-element"),a.classList.add("flex","horizontal","layout"),dom(i).appendChild(a),dom(i).appendChild(s);var l=this.$.form.children[r];l?dom(this.$.form).insertBefore(i,l):dom(this.$.form).appendChild(i),this.listen(a,o.component.valueProperty.replace(/([A-Z])/g,"-$1").toLowerCase()+"-changed","_schemaArrayItemChanged"),this._schemaArrayItems.push(o)},_onAddItem:function(){var e=this.schema.items,t={label:e.title,schema:e,component:e.component||{}};if(t.component.valueProperty||(t.component.valueProperty="value"),!t.component.name)if(this._isSchemaEnum(e))t.component.name="eco-json-schema-enum";else if(this._isSchemaBoolean(e.type))t.component.name="eco-json-schema-boolean";else if(this._isSchemaFile(e.type))t.component.name="eco-json-schema-file";else if(this._isSchemaValue(e.type))t.component.name="eco-json-schema-input";else if(this._isSchemaObject(e.type))t.component.name="eco-json-schema-object";else{if(!this._isSchemaArray(e.type))return console.error("Unknown item type %s",e.type);t.component.name="eco-json-schema-array"}this.push("_schemaArrayItems",t)},_onRemoveItem:function(e){var t=dom(e).localTarget.previousSibling.schemaArrayItem,n=this._schemaArrayItems.indexOf(t);this.splice("_schemaArrayItems",n,1)},_deepClone:function(e){return JSON.parse(JSON.stringify(e))},_isSchemaValue:function(e){return this._isSchemaBoolean(e)||this._isSchemaNumber(e)||this._isSchemaString(e)||this._isSchemaFile(e)},_isSchemaFile:function(e){return Array.isArray(e)?-1!==e.indexOf("file"):"file"===e},_isSchemaBoolean:function(e){return Array.isArray(e)?-1!==e.indexOf("boolean"):"boolean"===e},_isSchemaEnum:function(e){return!!e.enum},_isSchemaNumber:function(e){return Array.isArray(e)?-1!==e.indexOf("number")||-1!==e.indexOf("integer"):"number"===e||"integer"===e},_isSchemaString:function(e){return Array.isArray(e)?-1!==e.indexOf("string"):"string"===e},_isSchemaObject:function(e){return"object"===e},_isSchemaArray:function(e){return"array"===e}});var C=document.createElement("div");C.setAttribute("style","display: none;"),C.innerHTML='<dom-module id="eco-json-schema-object">\n\n  \n  \n  \n  \n  \n  \n\n  <template>\n\n    <style is="custom-style" include="iron-flex iron-flex-alignment">\n      div.layout {\n        height: auto;\n      }\n      #form {\n        display: block;\n        @apply(--eco-json-schema-object-form);\n        @apply(--layout-vertical);\n        @apply(--layout-wrap);\n      }\n    </style>\n\n    <template is="dom-if" if="{{!wizard}}">\n      <div class="header" hidden$="[[!label]]">[[label]]</div>\n    </template>\n    <div class="layout vertical flex start-justified">\n      <div id="form" class="layout horizontal flex start-justified"></div>\n    </div>\n\n\n  </template>\n\n  \n\n</dom-module>',document.head.appendChild(C),e.Polymer({is:"eco-json-schema-object",behaviors:[s.AppLocalizeBehavior],properties:{language:{value:"en"},resources:{value:function(){return{}}},schema:{type:Object,observer:"_schemaChanged"},label:{type:String},value:{type:Object,notify:!0,value:function(){return{}}},error:{type:Object,observer:"_errorChanged"},wizard:{type:Boolean,notify:!0}},detached:function(){this._clearForm()},_buildSchemaProperties:function(){var e=this;this._schemaProperties=Object.keys(this.schema.properties||[]).map(function(t){var n=e.schema.properties[t],r={property:t,label:n.title||t,schema:n,component:n.component||{}};if(r.component.valueProperty||(r.component.valueProperty="value"),r.component.slot||(r.component.slot=""),e._isSchemaEnum(n))r.component.name=r.component.name||"eco-json-schema-enum","undefined"===g(n.value)&&(n.value=""),r.value=n.value;else if(e._isSchemaBoolean(n.type))r.component.name=r.component.name||"eco-json-schema-boolean","undefined"===g(n.value)&&(n.value=!1),r.value=n.value;else if(e._isSchemaFile(n.type))r.component.name=r.component.name||"eco-json-schema-file","undefined"===g(n.value)&&(n.value={}),r.value=n.value;else if(e._isSchemaValue(n.type))r.component.name=r.component.name||"eco-json-schema-input","undefined"===g(n.value)&&(n.value=""),r.value=n.value;else if(e._isSchemaObject(n.type))r.component.name=r.component.name||"eco-json-schema-object","undefined"===g(n.value)&&(n.value={}),r.value=n.value;else{if(!e._isSchemaArray(n.type))return console.error("Unknown property type %s",n.type);r.component.name=r.component.name||"eco-json-schema-array","undefined"===g(n.value)&&(n.value=[]),r.value=n.value}return r})},_schemaPropertyChanged:function(e,t){if(!t.path||!/\.length$/.test(t.path)){var n=this,r=e.target.schemaProperty,o=["value",r.property];if(t.path&&/\.splices$/.test(t.path)){for(var a=t.path.split(".").slice(1,-1);a.length;)o.push(a.shift()),r.keyMap&&r.keyMap[o.join(".")]&&(o=r.keyMap[o.join(".")].split("."));t.value.keySplices&&r.keyMap&&t.value.keySplices.forEach(function(e){e.removed.forEach(function(e){delete r.keyMap[o.concat([e]).join(".")]})}),t.value&&t.value.indexSplices.forEach(function(e){var t=[o.join("."),e.index,e.removed.length];if(e.addedCount)for(var a=0,i=e.addedCount;a<i;a++)e.addedKeys&&e.addedKeys[a]&&(r.keyMap=r.keyMap||{},r.keyMap[o.concat([e.addedKeys[a]]).join(".")]=o.concat([a+e.index]).join(".")),t.push(n._deepClone(e.object[a+e.index]));n.splice.apply(n,t)})}else if(t.path){a=t.path.split(".").slice(1);for(this.value.hasOwnProperty(r.property)||this.set("value."+r.property,{});a.length;){var i=a.shift();o.push(i),r.keyMap&&r.keyMap[o.join(".")]&&(o=r.keyMap[o.join(".")].split("."))}this.set(o.join("."),this._deepClone(t.value))}else r.value=t.value,this.set(o,this._deepClone(t.value))}},_setValue:function(){var e=this,t={};this._schemaProperties.forEach(function(n){"undefined"!==g(n.value)&&(t[n.property]=e._deepClone(n.value))}),this.value=t},_buildForm:function(){var e=this,t=this;this._schemaProperties.forEach(function(n){var r=t.create(n.component.name,{label:n.label,schema:n.schema,schemaProperty:n,language:e.language,resources:e.resources});for(var o in r.setAttribute("name",n.property),r.className="flex start-justified",r[n.component.valueProperty]=n.value,n.component.attributes)r.setAttribute(o,n.component.attributes[o]);for(var a in n.component.properties)r[a]=n.component.properties[a];if(t.listen(r,n.component.valueProperty.replace(/([A-Z])/g,"-$1").toLowerCase()+"-changed","_schemaPropertyChanged"),b.dom(t.$.form).appendChild(r),""!=n.component.slot){var i=document.createElement("template");i.innerHTML=n.component.slot,b.dom(r).appendChild(i.content)}})},_removePropertyEl:function(e){"undefined"!==g(e.schemaProperty)&&this.unlisten(e,e.schemaProperty.component.valueProperty.replace(/([A-Z])/g,"-$1").toLowerCase()+"-changed","_schemaPropertyChanged"),e.schemaProperty=null,b.dom(this.$.form).removeChild(e)},_clearForm:function(){for(var e=b.dom(this.$.form);e.firstChild;)this._removePropertyEl(e.firstChild)},_schemaChanged:function(){this._clearForm(),this._buildSchemaProperties(),this._buildForm(),this._setValue()},_errorChanged:function(){var e=this;b.dom(this.$.form).childNodes.forEach(function(t){var n=t.getAttribute("name");e.error&&e.error[n]?t.error=e.error[n]:t.error=null})},_deepClone:function(e){return JSON.parse(JSON.stringify(e))},_isSchemaValue:function(e){return this._isSchemaBoolean(e)||this._isSchemaNumber(e)||this._isSchemaString(e)||this._isSchemaFile(e)},_isSchemaFile:function(e){return Array.isArray(e)?-1!==e.indexOf("file"):"file"===e},_isSchemaBoolean:function(e){return Array.isArray(e)?-1!==e.indexOf("boolean"):"boolean"===e},_isSchemaEnum:function(e){return!!e.enum},_isSchemaNumber:function(e){return Array.isArray(e)?-1!==e.indexOf("number")||-1!==e.indexOf("integer"):"number"===e||"integer"===e},_isSchemaString:function(e){return Array.isArray(e)?-1!==e.indexOf("string"):"string"===e},_isSchemaObject:function(e){return"object"===e},_isSchemaArray:function(e){return"array"===e}});var O=document.createElement("div");O.setAttribute("style","display: none;"),O.innerHTML='<dom-module id="eco-json-schema-wizard">\n  <template>\n    <style is="custom-style" include="iron-flex iron-flex-alignment">\n       :host {\n        display: block;\n        @apply(--layout-vertical);\n      }\n\n      paper-input {\n        padding: 2px;\n        --paper-input-container-label: {\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #fff;\n        }\n      }\n\n      .box,\n      #form {\n        display: -webkit-box;\n        display: -webkit-flex;\n        display: -moz-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-flex-align: center;\n        -ms-flex-align: center;\n        -webkit-align-items: center;\n        align-items: center;\n      }\n\n      .fullbleed {\n        z-index: 1;\n      }\n\n      paper-toolbar.bottom {\n        --paper-toolbar-color: var(--app-primary-color);\n        --paper-toolbar-background: var(--dark-theme-text-color);\n      }\n\n      paper-toolbar.bottom paper-icon-button {\n        --paper-toolbar-color: var(--dark-theme-text-color);\n        --paper-toolbar-background: var(--app-primary-color);\n      }\n\n    </style>\n    <div class="vertical flex layout fullbleed">\n      \x3c!--paper-icon-button id="camButton" icon="editor:insert-photo" raised>add photo</paper-icon-button--\x3e\n      <paper-toolbar>\n        <paper-icon-button id="prevButton" icon="arrow-back" hidden$="{{!hasPrev}}" on-tap="prev" raised="">{{localize(\'prev\')}}</paper-icon-button><span class="title layout horizontal flex" style="white-space: normal">[[title]]</span>\n        <paper-icon-button id="nextButton" icon="arrow-forward" hidden$="{{!hasNext}}" on-tap="next" raised="">{{localize(\'next\')}}</paper-icon-button>\n        <paper-icon-button id="submitButton" icon="cloud-upload" on-tap="submit" raised="">{{localize(\'submit\')}}</paper-icon-button>\n      </paper-toolbar>\n      <iron-pages id="form" class="layout horizontal flex start-justified" role="main" selected="[[page]]" attr-for-selected="name"></iron-pages>\n      <paper-toolbar class="bottom">\n        <div hidden$="{{!hasPrev}}" on-tap="prev">\n          <paper-icon-button id="prevButton" icon="arrow-back" raised="">{{localize(\'prev\')}}</paper-icon-button>\n          <span class="title layout" style="white-space: normal">{{localize(\'prev\')}}</span>\n        </div>\n        <span class="title layout horizontal flex" style="white-space: normal"></span>\n        <div hidden$="{{!hasNext}}" on-tap="next">\n          <span class="title layout" style="white-space: normal">{{localize(\'next\')}}</span>\n          <paper-icon-button id="nextButton" icon="arrow-forward" raised="">{{localize(\'next\')}}</paper-icon-button>\n        </div>\n      </paper-toolbar>\n    </div>\n  </template>\n  \n</dom-module>',document.head.appendChild(O),e.Polymer({is:"eco-json-schema-wizard",behaviors:[s.AppLocalizeBehavior],properties:{language:{type:String,notify:!0},resources:{type:Object,notify:!0},schema:{type:Object,observer:"_schemaChanged"},label:{type:String},value:{type:Object,notify:!0,value:function(){return{}}},page:{type:String,notify:!0,observer:"_pageChanged"},pages:{type:Array,notify:!0,value:[]},error:{type:Object,observer:"_errorChanged"},isReview:{type:Boolean,value:!1,notify:!0},canSubmit:{type:Boolean,notify:!0},hasNext:{type:Boolean,notify:!0},hasPrev:{type:Boolean,notify:!0},titles:{type:Array,notify:!0,value:[]},title:{type:String,value:"",notify:!0}},detached:function(){this._clearForm()},_buildSchemaProperties:function(){var e=this;this._schemaProperties=Object.keys(this.schema.properties||[]).map(function(t){var n=e.schema.properties[t],r={property:t,label:n.title||t,schema:n,component:n.component||{}};if(r.component.valueProperty||(r.component.valueProperty="value"),e._isSchemaEnum(n))r.component.name=r.component.name||"eco-json-schema-enum",r.value="";else if(e._isSchemaBoolean(n.type))r.component.name=r.component.name||"eco-json-schema-boolean",r.value=!1;else if(e._isSchemaFile(n.type))r.component.name=r.component.name||"eco-json-schema-file",r.value="";else if(e._isSchemaValue(n.type))r.component.name=r.component.name||"eco-json-schema-input",r.value="";else if(e._isSchemaObject(n.type))r.component.name=r.component.name||"eco-json-schema-object",r.component.wizard=!0,r.value={};else{if(!e._isSchemaArray(n.type))return console.error("Unknown property type %s",n.type);r.component.name=r.component.name||"eco-json-schema-array",r.value=[]}return e.push("pages",t),e.push("titles",n.title),r})},_schemaPropertyChanged:function(e,t){if(!t.path||!/\.length$/.test(t.path)){var n=this,r=e.target.schemaProperty,o=["value",r.property];if(t.path&&/\.splices$/.test(t.path)){for(var a=t.path.split(".").slice(1,-1);a.length;)o.push(a.shift()),r.keyMap&&r.keyMap[o.join(".")]&&(o=r.keyMap[o.join(".")].split("."));t.value.keySplices&&r.keyMap&&t.value.keySplices.forEach(function(e){e.removed.forEach(function(e){delete r.keyMap[o.concat([e]).join(".")]})}),t.value.indexSplices.forEach(function(e){var t=[o.join("."),e.index,e.removed.length];if(e.addedCount)for(var a=0,i=e.addedCount;a<i;a++)e.addedKeys&&e.addedKeys[a]&&(r.keyMap=r.keyMap||{},r.keyMap[o.concat([e.addedKeys[a]]).join(".")]=o.concat([a+e.index]).join(".")),t.push(n._deepClone(e.object[a+e.index]));n.splice.apply(n,t)})}else if(t.path){a=t.path.split(".").slice(1);for(this.value.hasOwnProperty(r.property)||this.set("value."+r.property,{});a.length;){var i=a.shift();o.push(i),r.keyMap&&r.keyMap[o.join(".")]&&(o=r.keyMap[o.join(".")].split("."))}this.set(o.join("."),this._deepClone(t.value)),console.log("value: "+JSON.stringify(this.value))}}},_setValue:function(){var e=this,t={};this._schemaProperties.forEach(function(n){t[n.property]=e._deepClone(n.value)}),this.value=t},_buildForm:function(){var e=this,t=this;this._schemaProperties.forEach(function(n){var r=t.create(n.component.name,{label:n.label,schema:n.schema,schemaProperty:n,language:e.language,resources:e.resources});r.setAttribute("name",n.property),r.className="flex start-justified",n.value=r[n.component.valueProperty],t.listen(r,n.component.valueProperty.replace(/([A-Z])/g,"-$1").toLowerCase()+"-changed","_schemaPropertyChanged"),b.dom(t.$.form).appendChild(r)})},_removePropertyEl:function(e){"undefined"!==g(e.schemaProperty)&&this.unlisten(e,e.schemaProperty.component.valueProperty.replace(/([A-Z])/g,"-$1").toLowerCase()+"-changed","_schemaPropertyChanged"),e.schemaProperty=null,b.dom(this.$.form).removeChild(e)},_clearForm:function(){for(var e=b.dom(this.$.form);e.firstChild;)this._removePropertyEl(e.firstChild)},_schemaChanged:function(){this._clearForm(),this._buildSchemaProperties(),this._buildForm(),this._setValue(),this.pages.length>0&&this.set("page",this.pages[0]),this.set("title",this.titles[0])},next:function(){var e=this.pages.indexOf(this.page),t=e;-1!==e?(e<this.pages.length-1&&(t=e+1),this.set("page",this.pages[t]),this.set("title",this.titles[t])):console.log("Invalid current page in wizard")},prev:function(){var e=this.pages.indexOf(this.page),t=e;-1!==e?(e>0&&(t=e-1),this.set("page",this.pages[t]),this.set("title",this.titles[t])):console.log("Invalid current page in wizard")},submit:function(){this.fire("submit")},_pageChanged:function(){var e=this.pages.indexOf(this.page);0===e?this.set("hasPrev",!1):this.set("hasPrev",!0),e===this.pages.length-1?this.set("hasNext",!1):this.set("hasNext",!0)},_errorChanged:function(){var e=this;b.dom(this.$.form).childNodes.forEach(function(t){var n=t.getAttribute("name");e.error&&e.error[n]?t.error=e.error[n]:t.error=null})},_deepClone:function(e){return JSON.parse(JSON.stringify(e))},_isSchemaValue:function(e){return this._isSchemaBoolean(e)||this._isSchemaNumber(e)||this._isSchemaString(e)||this._isSchemaFile(e)},_isSchemaFile:function(e){return Array.isArray(e)?-1!==e.indexOf("file"):"file"===e},_isSchemaBoolean:function(e){return Array.isArray(e)?-1!==e.indexOf("boolean"):"boolean"===e},_isSchemaEnum:function(e){return!!e.enum},_isSchemaNumber:function(e){return Array.isArray(e)?-1!==e.indexOf("number")||-1!==e.indexOf("integer"):"number"===e||"integer"===e},_isSchemaString:function(e){return Array.isArray(e)?-1!==e.indexOf("string"):"string"===e},_isSchemaObject:function(e){return"object"===e},_isSchemaArray:function(e){return"array"===e}})});
//# sourceMappingURL=eco-json-schema-form.umd.js.map
